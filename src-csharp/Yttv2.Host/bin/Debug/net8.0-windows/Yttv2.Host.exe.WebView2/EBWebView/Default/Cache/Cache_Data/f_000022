import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/NewCardMenu.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/NewCardMenu.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useState = __vite__cjsImport3_react["useState"]; const useRef = __vite__cjsImport3_react["useRef"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import __vite__cjsImport4_reactDom from "/node_modules/.vite/deps/react-dom.js?v=cd56faf3"; const ReactDOM = __vite__cjsImport4_reactDom.__esModule ? __vite__cjsImport4_reactDom.default : __vite__cjsImport4_reactDom;
import { useLayoutStore } from "/src/store/layoutStore.js";
const NewCardMenu = ({ options, onOptionClick, submenuOptions = {} }) => {
  _s();
  const [isOpen, setIsOpen] = useState(false);
  const [activeSubmenu, setActiveSubmenu] = useState(null);
  const [menuPosition, setMenuPosition] = useState(null);
  const menuRef = useRef(null);
  const buttonRef = useRef(null);
  const { inspectMode } = useLayoutStore();
  const getInspectTitle = (label) => inspectMode ? label : void 0;
  const handleToggle = (e) => {
    e.preventDefault();
    e.stopPropagation();
    if (isOpen) {
      setIsOpen(false);
      setActiveSubmenu(null);
      setMenuPosition(null);
    } else {
      calculatePosition();
      setIsOpen(true);
    }
  };
  const calculatePosition = () => {
    if (buttonRef.current) {
      const rect = buttonRef.current.getBoundingClientRect();
      let top = rect.bottom + 5;
      let left = rect.right - 192;
      if (left < 10) left = rect.left;
      setMenuPosition({ top, left });
    }
  };
  useEffect(() => {
    if (!isOpen) return;
    const handleUpdate = () => {
      calculatePosition();
    };
    window.addEventListener("resize", handleUpdate);
    document.addEventListener("scroll", handleUpdate, true);
    return () => {
      window.removeEventListener("resize", handleUpdate);
      document.removeEventListener("scroll", handleUpdate, true);
    };
  }, [isOpen]);
  useEffect(() => {
    if (!isOpen) return;
    const handleClickOutside = (e) => {
      if (menuRef.current && menuRef.current.contains(e.target)) return;
      if (buttonRef.current && buttonRef.current.contains(e.target)) return;
      setIsOpen(false);
      setActiveSubmenu(null);
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, [isOpen]);
  const handleItemClick = (e, option) => {
    e.preventDefault();
    e.stopPropagation();
    if (option.disabled) return;
    if (option.submenu && submenuOptions[option.submenu]) {
      setActiveSubmenu(option.submenu);
      return;
    }
    console.log("[NewCardMenu] Option clicked:", option.label, option.action);
    if (onOptionClick) {
      onOptionClick(option);
    }
    setIsOpen(false);
    setActiveSubmenu(null);
  };
  const handleSubmenuItemClick = (e, submenuKey, option) => {
    e.preventDefault();
    e.stopPropagation();
    if (option.disabled) return;
    console.log("[NewCardMenu] Submenu Option clicked:", option.label, option.action);
    if (onOptionClick) {
      onOptionClick({ ...option, parentAction: submenuKey });
    }
    setIsOpen(false);
    setActiveSubmenu(null);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "relative", onClick: (e) => e.stopPropagation(), children: [
    /* @__PURE__ */ jsxDEV(
      "button",
      {
        ref: buttonRef,
        onClick: handleToggle,
        className: "p-1.5 rounded-lg hover:bg-slate-700/50 transition-colors text-slate-400 hover:text-white",
        title: getInspectTitle("More options") || "More options",
        children: /* @__PURE__ */ jsxDEV("svg", { className: "w-5 h-5", fill: "currentColor", viewBox: "0 0 20 20", children: /* @__PURE__ */ jsxDEV("path", { d: "M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z" }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
          lineNumber: 144,
          columnNumber: 21
        }, this) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
          lineNumber: 143,
          columnNumber: 17
        }, this)
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
        lineNumber: 137,
        columnNumber: 13
      },
      this
    ),
    isOpen && menuPosition && ReactDOM.createPortal(
      /* @__PURE__ */ jsxDEV(
        "div",
        {
          ref: menuRef,
          className: "fixed z-50 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-visible text-left",
          style: {
            top: menuPosition.top,
            left: menuPosition.left
          },
          onClick: (e) => e.stopPropagation(),
          children: !activeSubmenu ? (
            // Main Menu Loop
            /* @__PURE__ */ jsxDEV("div", { className: "py-1", children: options.map(
              (option, idx) => /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: (e) => handleItemClick(e, option),
                  disabled: option.disabled,
                  className: `w-full text-left px-4 py-2.5 text-sm transition-colors flex items-center justify-between gap-3 ${option.disabled ? "opacity-50 cursor-not-allowed text-slate-500" : option.danger ? "text-red-400 hover:bg-red-500/10 hover:text-red-300" : "text-white hover:bg-slate-700"} ${idx > 0 ? "border-t border-slate-700" : ""}`,
                  children: [
                    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3", children: [
                      option.icon && /* @__PURE__ */ jsxDEV("span", { className: "flex-shrink-0", children: option.icon }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                        lineNumber: 174,
                        columnNumber: 57
                      }, this),
                      /* @__PURE__ */ jsxDEV("span", { children: option.label }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                        lineNumber: 175,
                        columnNumber: 41
                      }, this)
                    ] }, void 0, true, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 173,
                      columnNumber: 37
                    }, this),
                    option.submenu && /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4 text-slate-400", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 5l7 7-7 7" }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 179,
                      columnNumber: 45
                    }, this) }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 178,
                      columnNumber: 15
                    }, this)
                  ]
                },
                idx,
                true,
                {
                  fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                  lineNumber: 162,
                  columnNumber: 13
                },
                this
              )
            ) }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
              lineNumber: 160,
              columnNumber: 11
            }, this)
          ) : (
            // Submenu Loop
            /* @__PURE__ */ jsxDEV("div", { className: "py-1 animate-in slide-in-from-right duration-200", children: [
              /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    setActiveSubmenu(null);
                  },
                  className: "w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-700 border-b border-slate-700 flex items-center gap-2",
                  children: [
                    /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 19l-7-7 7-7" }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 197,
                      columnNumber: 37
                    }, this) }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 196,
                      columnNumber: 33
                    }, this),
                    /* @__PURE__ */ jsxDEV("span", { children: "Back" }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                      lineNumber: 199,
                      columnNumber: 33
                    }, this)
                  ]
                },
                void 0,
                true,
                {
                  fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                  lineNumber: 188,
                  columnNumber: 29
                },
                this
              ),
              /* @__PURE__ */ jsxDEV("div", { className: "max-h-64 overflow-y-auto", children: submenuOptions[activeSubmenu]?.map(
                (subOption, idx) => /* @__PURE__ */ jsxDEV(
                  "button",
                  {
                    onClick: (e) => handleSubmenuItemClick(e, activeSubmenu, subOption),
                    disabled: subOption.disabled,
                    className: `w-full text-left px-4 py-2.5 text-sm transition-colors flex items-center gap-3 ${subOption.disabled ? "opacity-50 cursor-not-allowed text-slate-500" : subOption.danger ? "text-red-400 hover:bg-red-500/10 hover:text-red-300" : "text-white hover:bg-slate-700"} ${idx > 0 ? "border-t border-slate-700" : ""}`,
                    children: [
                      subOption.icon && /* @__PURE__ */ jsxDEV("span", { className: "flex-shrink-0", children: subOption.icon }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                        lineNumber: 214,
                        columnNumber: 60
                      }, this),
                      /* @__PURE__ */ jsxDEV("span", { children: subOption.label }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                        lineNumber: 215,
                        columnNumber: 41
                      }, this)
                    ]
                  },
                  idx,
                  true,
                  {
                    fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                    lineNumber: 203,
                    columnNumber: 15
                  },
                  this
                )
              ) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
                lineNumber: 201,
                columnNumber: 29
              }, this)
            ] }, void 0, true, {
              fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
              lineNumber: 187,
              columnNumber: 11
            }, this)
          )
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
          lineNumber: 149,
          columnNumber: 9
        },
        this
      ),
      document.body
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/NewCardMenu.jsx",
    lineNumber: 136,
    columnNumber: 5
  }, this);
};
_s(NewCardMenu, "5jr9Ss1yGmM1Nfsx3HoUuFahsjY=", false, function() {
  return [useLayoutStore];
});
_c = NewCardMenu;
export default NewCardMenu;
var _c;
$RefreshReg$(_c, "NewCardMenu");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/NewCardMenu.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/NewCardMenu.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsZ0JBYUE7QUFBQSxjQUNILEtBaEJMO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBaUJBO0FBQUEsaUJBL0JKO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBZ0NBO0FBQUE7QUFBQTtBQUFBLFFBdEVSO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQXdFQTtBQUFBLE1BQ0FqQixTQUFTcUI7QUFBQUEsSUFDYjtBQUFBLE9BdkZKO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0F3RkE7QUFFUjtBQUFFakQsR0ExTUlKLGFBQVc7QUFBQSxVQU9XRCxjQUFjO0FBQUE7QUFBQXVELEtBUHBDdEQ7QUE0TU4sZUFBZUE7QUFBWSxJQUFBc0Q7QUFBQUMsYUFBQUQsSUFBQSIsIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJSZWFjdERPTSIsInVzZUxheW91dFN0b3JlIiwiTmV3Q2FyZE1lbnUiLCJvcHRpb25zIiwib25PcHRpb25DbGljayIsInN1Ym1lbnVPcHRpb25zIiwiX3MiLCJpc09wZW4iLCJzZXRJc09wZW4iLCJhY3RpdmVTdWJtZW51Iiwic2V0QWN0aXZlU3VibWVudSIsIm1lbnVQb3NpdGlvbiIsInNldE1lbnVQb3NpdGlvbiIsIm1lbnVSZWYiLCJidXR0b25SZWYiLCJpbnNwZWN0TW9kZSIsImdldEluc3BlY3RUaXRsZSIsImxhYmVsIiwidW5kZWZpbmVkIiwiaGFuZGxlVG9nZ2xlIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2FsY3VsYXRlUG9zaXRpb24iLCJjdXJyZW50IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsImhhbmRsZVVwZGF0ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDbGlja091dHNpZGUiLCJjb250YWlucyIsInRhcmdldCIsImhhbmRsZUl0ZW1DbGljayIsIm9wdGlvbiIsImRpc2FibGVkIiwic3VibWVudSIsImNvbnNvbGUiLCJsb2ciLCJhY3Rpb24iLCJoYW5kbGVTdWJtZW51SXRlbUNsaWNrIiwic3VibWVudUtleSIsInBhcmVudEFjdGlvbiIsImNyZWF0ZVBvcnRhbCIsIm1hcCIsImlkeCIsImRhbmdlciIsImljb24iLCJzdWJPcHRpb24iLCJib2R5IiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiTmV3Q2FyZE1lbnUuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgeyB1c2VMYXlvdXRTdG9yZSB9IGZyb20gJy4uL3N0b3JlL2xheW91dFN0b3JlJztcclxuXHJcbmNvbnN0IE5ld0NhcmRNZW51ID0gKHsgb3B0aW9ucywgb25PcHRpb25DbGljaywgc3VibWVudU9wdGlvbnMgPSB7fSB9KSA9PiB7XHJcbiAgICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgW2FjdGl2ZVN1Ym1lbnUsIHNldEFjdGl2ZVN1Ym1lbnVdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbbWVudVBvc2l0aW9uLCBzZXRNZW51UG9zaXRpb25dID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4gICAgY29uc3QgbWVudVJlZiA9IHVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IGJ1dHRvblJlZiA9IHVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IHsgaW5zcGVjdE1vZGUgfSA9IHVzZUxheW91dFN0b3JlKCk7XHJcblxyXG4gICAgY29uc3QgZ2V0SW5zcGVjdFRpdGxlID0gKGxhYmVsKSA9PiBpbnNwZWN0TW9kZSA/IGxhYmVsIDogdW5kZWZpbmVkO1xyXG5cclxuICAgIC8vIFRvZ2dsZSBNZW51XHJcbiAgICBjb25zdCBoYW5kbGVUb2dnbGUgPSAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICBpZiAoaXNPcGVuKSB7XHJcbiAgICAgICAgICAgIHNldElzT3BlbihmYWxzZSk7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVN1Ym1lbnUobnVsbCk7XHJcbiAgICAgICAgICAgIHNldE1lbnVQb3NpdGlvbihudWxsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcG9zaXRpb24gaW1tZWRpYXRlbHlcclxuICAgICAgICAgICAgY2FsY3VsYXRlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgc2V0SXNPcGVuKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY2FsY3VsYXRlUG9zaXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJ1dHRvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBidXR0b25SZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgLy8gUG9zaXRpb24gYm90dG9tLXJpZ2h0IG9mIGJ1dHRvblxyXG4gICAgICAgICAgICAvLyBGaXhlZCBwb3NpdGlvbmluZyBpcyB2aWV3cG9ydCByZWxhdGl2ZVxyXG4gICAgICAgICAgICBsZXQgdG9wID0gcmVjdC5ib3R0b20gKyA1O1xyXG4gICAgICAgICAgICBsZXQgbGVmdCA9IHJlY3QucmlnaHQgLSAxOTI7IC8vIDE5MnB4IHdpZHRoIGFwcHJveFxyXG5cclxuICAgICAgICAgICAgLy8gU2FmZXR5IGNoZWNrIGZvciBsZWZ0IGVkZ2VcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCAxMCkgbGVmdCA9IHJlY3QubGVmdDtcclxuXHJcbiAgICAgICAgICAgIHNldE1lbnVQb3NpdGlvbih7IHRvcCwgbGVmdCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNjcm9sbC9SZXNpemUgbGlzdGVuZXJzIHRvIGtlZXAgaXQgYXR0YWNoZWRcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc09wZW4pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjYWxjdWxhdGVQb3NpdGlvbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVVcGRhdGUpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVVwZGF0ZSwgdHJ1ZSk7IC8vIENhcHR1cmUgZm9yIGFsbCBlbGVtZW50c1xyXG5cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlVXBkYXRlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlVXBkYXRlLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW2lzT3Blbl0pO1xyXG5cclxuICAgIC8vIENsaWNrIE91dHNpZGUgTGlzdGVuZXJcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc09wZW4pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gSWYgY2xpY2tpbmcgaW5zaWRlIG1lbnUgb3IgYnV0dG9uLCBpZ25vcmVcclxuICAgICAgICAgICAgaWYgKG1lbnVSZWYuY3VycmVudCAmJiBtZW51UmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChidXR0b25SZWYuY3VycmVudCAmJiBidXR0b25SZWYuY3VycmVudC5jb250YWlucyhlLnRhcmdldCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHNldElzT3BlbihmYWxzZSk7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVN1Ym1lbnUobnVsbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIH0sIFtpc09wZW5dKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVJdGVtQ2xpY2sgPSAoZSwgb3B0aW9uKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb24uZGlzYWJsZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIFN1Ym1lbnVcclxuICAgICAgICBpZiAob3B0aW9uLnN1Ym1lbnUgJiYgc3VibWVudU9wdGlvbnNbb3B0aW9uLnN1Ym1lbnVdKSB7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVN1Ym1lbnUob3B0aW9uLnN1Ym1lbnUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZWd1bGFyIEFjdGlvblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTmV3Q2FyZE1lbnVdIE9wdGlvbiBjbGlja2VkOicsIG9wdGlvbi5sYWJlbCwgb3B0aW9uLmFjdGlvbik7XHJcbiAgICAgICAgaWYgKG9uT3B0aW9uQ2xpY2spIHtcclxuICAgICAgICAgICAgb25PcHRpb25DbGljayhvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xyXG4gICAgICAgIHNldEFjdGl2ZVN1Ym1lbnUobnVsbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVN1Ym1lbnVJdGVtQ2xpY2sgPSAoZSwgc3VibWVudUtleSwgb3B0aW9uKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb24uZGlzYWJsZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tOZXdDYXJkTWVudV0gU3VibWVudSBPcHRpb24gY2xpY2tlZDonLCBvcHRpb24ubGFiZWwsIG9wdGlvbi5hY3Rpb24pO1xyXG4gICAgICAgIGlmIChvbk9wdGlvbkNsaWNrKSB7XHJcbiAgICAgICAgICAgIG9uT3B0aW9uQ2xpY2soeyAuLi5vcHRpb24sIHBhcmVudEFjdGlvbjogc3VibWVudUtleSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0SXNPcGVuKGZhbHNlKTtcclxuICAgICAgICBzZXRBY3RpdmVTdWJtZW51KG51bGwpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIiBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIHJlZj17YnV0dG9uUmVmfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xLjUgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS03MDAvNTAgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC13aGl0ZVwiXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17Z2V0SW5zcGVjdFRpdGxlKCdNb3JlIG9wdGlvbnMnKSB8fCAnTW9yZSBvcHRpb25zJ31cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDZhMiAyIDAgMTEwLTQgMiAyIDAgMDEwIDR6TTEwIDEyYTIgMiAwIDExMC00IDIgMiAwIDAxMCA0ek0xMCAxOGEyIDIgMCAxMTAtNCAyIDIgMCAwMTAgNHpcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAge2lzT3BlbiAmJiBtZW51UG9zaXRpb24gJiYgUmVhY3RET00uY3JlYXRlUG9ydGFsKFxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17bWVudVJlZn1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB6LTUwIHctNDggYmctc2xhdGUtODAwIGJvcmRlciBib3JkZXItc2xhdGUtNzAwIHJvdW5kZWQtbGcgc2hhZG93LXhsIG92ZXJmbG93LXZpc2libGUgdGV4dC1sZWZ0XCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IG1lbnVQb3NpdGlvbi50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IG1lbnVQb3NpdGlvbi5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9IC8vIFN0b3AgcHJvcGFnYXRpb24gZnJvbSBwb3J0YWwgdG8gUmVhY3QgdHJlZVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHshYWN0aXZlU3VibWVudSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFpbiBNZW51IExvb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweS0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9ucy5tYXAoKG9wdGlvbiwgaWR4KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGhhbmRsZUl0ZW1DbGljayhlLCBvcHRpb24pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17b3B0aW9uLmRpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMi41IHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0zICR7b3B0aW9uLmRpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnb3BhY2l0eS01MCBjdXJzb3Itbm90LWFsbG93ZWQgdGV4dC1zbGF0ZS01MDAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvcHRpb24uZGFuZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ3RleHQtcmVkLTQwMCBob3ZlcjpiZy1yZWQtNTAwLzEwIGhvdmVyOnRleHQtcmVkLTMwMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAndGV4dC13aGl0ZSBob3ZlcjpiZy1zbGF0ZS03MDAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICR7aWR4ID4gMCA/ICdib3JkZXItdCBib3JkZXItc2xhdGUtNzAwJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLmljb24gJiYgPHNwYW4gY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMFwiPntvcHRpb24uaWNvbn08L3NwYW4+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e29wdGlvbi5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uLnN1Ym1lbnUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtc2xhdGUtNDAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTkgNWw3IDctNyA3XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1Ym1lbnUgTG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB5LTEgYW5pbWF0ZS1pbiBzbGlkZS1pbi1mcm9tLXJpZ2h0IGR1cmF0aW9uLTIwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlU3VibWVudShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yLjUgdGV4dC1zbSB0ZXh0LXNsYXRlLTQwMCBob3ZlcjpiZy1zbGF0ZS03MDAgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTcwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xNSAxOWwtNy03IDctN1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+QmFjazwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtaC02NCBvdmVyZmxvdy15LWF1dG9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3VibWVudU9wdGlvbnNbYWN0aXZlU3VibWVudV0/Lm1hcCgoc3ViT3B0aW9uLCBpZHgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gaGFuZGxlU3VibWVudUl0ZW1DbGljayhlLCBhY3RpdmVTdWJtZW51LCBzdWJPcHRpb24pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3N1Yk9wdGlvbi5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yLjUgdGV4dC1zbSB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyAke3N1Yk9wdGlvbi5kaXNhYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdvcGFjaXR5LTUwIGN1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LXNsYXRlLTUwMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdWJPcHRpb24uZGFuZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICd0ZXh0LXJlZC00MDAgaG92ZXI6YmctcmVkLTUwMC8xMCBob3Zlcjp0ZXh0LXJlZC0zMDAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LXdoaXRlIGhvdmVyOmJnLXNsYXRlLTcwMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICR7aWR4ID4gMCA/ICdib3JkZXItdCBib3JkZXItc2xhdGUtNzAwJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdWJPcHRpb24uaWNvbiAmJiA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wXCI+e3N1Yk9wdGlvbi5pY29ufTwvc3Bhbj59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57c3ViT3B0aW9uLmxhYmVsfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PixcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZXdDYXJkTWVudTtcclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy95dHR2Mi9zcmMvY29tcG9uZW50cy9OZXdDYXJkTWVudS5qc3gifQ==