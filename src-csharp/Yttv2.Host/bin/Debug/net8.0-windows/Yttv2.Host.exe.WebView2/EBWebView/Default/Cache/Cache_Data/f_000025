import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/PageBanner.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/PageBanner.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react;
import { FOLDER_COLORS } from "/src/utils/folderColors.js";
import { Pen, Play } from "/node_modules/.vite/deps/lucide-react.js?v=cd56faf3";
import { getThumbnailUrl } from "/src/utils/youtubeUtils.js";
import UnifiedBannerBackground from "/src/components/UnifiedBannerBackground.jsx";
import { useConfigStore } from "/src/store/configStore.js";
const PageBanner = ({ title, description, folderColor, onEdit, videoCount, countLabel = "Video", creationYear, author, avatar, continueVideo, onContinue, children, childrenPosition = "right", topRightContent, seamlessBottom = false }) => {
  _s();
  const { bannerPattern, customPageBannerImage, bannerBgSize, setBannerHeight, setBannerBgSize } = useConfigStore();
  const isUnsorted = folderColor === "unsorted";
  const colorConfig = !isUnsorted && folderColor ? FOLDER_COLORS.find((c) => c.id === folderColor) : null;
  let gradientStyle;
  let shadowColor;
  const bannerRef = React.useRef(null);
  React.useEffect(() => {
    if (!bannerRef.current) return;
    const updateDimensions = () => {
      const banner = bannerRef.current;
      if (!banner) return;
      const width = banner.offsetWidth;
      const height = banner.offsetHeight;
      if (!customPageBannerImage) {
        setBannerHeight(height);
        return;
      }
      setBannerHeight(height);
    };
    const observer = new ResizeObserver(updateDimensions);
    observer.observe(bannerRef.current);
    window.addEventListener("resize", updateDimensions);
    return () => {
      observer.disconnect();
      window.removeEventListener("resize", updateDimensions);
    };
  }, [customPageBannerImage, setBannerHeight, setBannerBgSize]);
  if (customPageBannerImage) {
    gradientStyle = {
      backgroundImage: `url(${customPageBannerImage})`,
      backgroundSize: "cover",
      // Standard cover
      backgroundPositionY: "center",
      backgroundPositionX: "0px",
      // Allow animation to take over X axis
      backgroundRepeat: "repeat-x"
      // Repeat horizontally for scroll
      // backgroundAttachment: 'fixed', // Removed fixed to basic absolute stitching
    };
    shadowColor = colorConfig?.hex || "#3b82f6";
  } else if (isUnsorted) {
    gradientStyle = {
      background: "linear-gradient(135deg, #64748b 0%, #475569 100%)"
      // Slate/Gray
    };
    shadowColor = "#64748b";
  } else if (colorConfig) {
    gradientStyle = {
      background: `linear-gradient(135deg, ${colorConfig.hex}DD 0%, ${colorConfig.hex} 100%)`
    };
    shadowColor = colorConfig.hex;
  } else {
    gradientStyle = {
      background: "linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)"
      // Sky to Blue
    };
    shadowColor = "#3b82f6";
  }
  const isGif = customPageBannerImage?.startsWith("data:image/gif");
  return /* @__PURE__ */ jsxDEV("div", { ref: bannerRef, className: `w-full relative animate-fade-in group mx-auto h-[220px] ${seamlessBottom ? "mb-0" : "mb-8"}`, children: [
    /* @__PURE__ */ jsxDEV(
      "div",
      {
        className: `absolute inset-0 overflow-hidden ${seamlessBottom ? "rounded-t-2xl rounded-b-none shadow-none" : "rounded-2xl shadow-lg"}`,
        style: {
          // Gradient styles only when NO custom image (fallback)
          ...!customPageBannerImage ? gradientStyle : {},
          boxShadow: seamlessBottom ? "none" : `0 10px 25px -5px ${shadowColor}50`
        },
        children: [
          customPageBannerImage && /* @__PURE__ */ jsxDEV(
            UnifiedBannerBackground,
            {
              image: customPageBannerImage,
              bgSize: "cover",
              yOffset: "center",
              isGif
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
              lineNumber: 126,
              columnNumber: 9
            },
            this
          ),
          !customPageBannerImage && /* @__PURE__ */ jsxDEV("div", { className: `absolute inset-0 pointer-events-none z-0 pattern-${bannerPattern || "diagonal"}` }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 136,
            columnNumber: 9
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none transform group-hover:scale-110 transition-transform duration-1000 ease-in-out" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 142,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "absolute bottom-0 left-0 w-64 h-64 bg-black/10 rounded-full blur-2xl -ml-16 -mb-16 pointer-events-none" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 143,
            columnNumber: 17
          }, this)
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 116,
        columnNumber: 13
      },
      this
    ),
    onEdit && /* @__PURE__ */ jsxDEV(
      "button",
      {
        onClick: (e) => {
          e.stopPropagation();
          onEdit();
        },
        className: "absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all duration-300 transform hover:scale-105 z-20",
        title: "Edit Details",
        children: /* @__PURE__ */ jsxDEV(Pen, { size: 18 }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 156,
          columnNumber: 21
        }, this)
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 148,
        columnNumber: 7
      },
      this
    ),
    topRightContent && /* @__PURE__ */ jsxDEV("div", { className: "absolute top-4 right-4 z-30", children: topRightContent }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
      lineNumber: 162,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "relative z-10 flex items-start h-full gap-8 w-full px-8 pt-4", children: [
      avatar && /* @__PURE__ */ jsxDEV("div", { className: "shrink-0 hidden md:flex flex-col items-center gap-1 animate-in fade-in slide-in-from-left-4 duration-700 mt-8", children: avatar.includes("\n") ? /* @__PURE__ */ jsxDEV("pre", { className: "font-mono text-[4px] leading-none whitespace-pre text-white/90 drop-shadow-md select-none opacity-90 mix-blend-overlay", style: { textShadow: "-0.5px -0.5px 0 #000, 0.5px -0.5px 0 #000, -0.5px 0.5px 0 #000, 0.5px 0.5px 0 #000, 0 1px 2px rgba(0,0,0,1)" }, children: avatar }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 173,
        columnNumber: 11
      }, this) : (
        // Single line avatars (Lenny) are larger
        /* @__PURE__ */ jsxDEV("div", { className: "font-mono text-3xl font-bold text-white/90 drop-shadow-md whitespace-nowrap opacity-90 mix-blend-overlay", style: { textShadow: "-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000, 0 4px 8px rgba(0,0,0,0.8)" }, children: avatar }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 178,
          columnNumber: 11
        }, this)
      ) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 171,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: `flex flex-col justify-start min-w-0 ${continueVideo ? "pr-64" : ""}`, children: [
        /* @__PURE__ */ jsxDEV("h1", { className: "text-4xl md:text-5xl font-black text-white mb-2 tracking-tight drop-shadow-md truncate", style: { textShadow: "-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000, 0 4px 8px rgba(0,0,0,0.8)" }, children: title }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 186,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 text-white/80 font-medium text-sm md:text-base mb-4", style: { textShadow: "-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000, 0 2px 4px rgba(0,0,0,0.9)" }, children: [
          videoCount !== void 0 && /* @__PURE__ */ jsxDEV("span", { children: [
            videoCount,
            " ",
            videoCount === 1 ? countLabel : `${countLabel}s`
          ] }, void 0, true, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 193,
            columnNumber: 13
          }, this),
          videoCount !== void 0 && (creationYear || author) && /* @__PURE__ */ jsxDEV("span", { className: "w-1 h-1 rounded-full bg-white/60 shadow-sm" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 196,
            columnNumber: 13
          }, this),
          creationYear && /* @__PURE__ */ jsxDEV("span", { children: creationYear }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 199,
            columnNumber: 13
          }, this),
          creationYear && author && /* @__PURE__ */ jsxDEV("span", { className: "w-1 h-1 rounded-full bg-white/60 shadow-sm" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 202,
            columnNumber: 13
          }, this),
          author && /* @__PURE__ */ jsxDEV("span", { children: author }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 205,
            columnNumber: 13
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 191,
          columnNumber: 21
        }, this),
        description && /* @__PURE__ */ jsxDEV("p", { className: "text-sm md:text-base text-white/90 font-medium max-w-4xl leading-relaxed drop-shadow-sm opacity-90 line-clamp-2", style: { textShadow: "-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000, 0 2px 4px rgba(0,0,0,0.8)" }, children: description }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 210,
          columnNumber: 11
        }, this),
        children && childrenPosition === "bottom" && /* @__PURE__ */ jsxDEV("div", { className: "mt-4", children }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
          lineNumber: 217,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 185,
        columnNumber: 17
      }, this),
      children && childrenPosition === "right" && /* @__PURE__ */ jsxDEV("div", { className: "ml-auto pl-8", children }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 225,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
      lineNumber: 168,
      columnNumber: 13
    }, this),
    continueVideo && /* @__PURE__ */ jsxDEV(
      "div",
      {
        className: "absolute top-12 right-6 flex flex-col items-end gap-2 group/continue cursor-pointer z-20",
        onClick: (e) => {
          e.stopPropagation();
          if (onContinue) onContinue();
        },
        children: [
          /* @__PURE__ */ jsxDEV("span", { className: "text-white/80 font-bold text-sm tracking-wider group-hover/continue:text-white transition-colors", style: { textShadow: "-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000, 0 2px 4px rgba(0,0,0,0.8)" }, children: "CONTINUE?" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 240,
            columnNumber: 21
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "relative h-24 aspect-video rounded-lg overflow-hidden shadow-lg border-2 border-white/20 group-hover/continue:border-white transition-all transform group-hover/continue:scale-105", children: [
            /* @__PURE__ */ jsxDEV(
              "img",
              {
                src: getThumbnailUrl(continueVideo.video_id, "medium"),
                alt: continueVideo.title,
                className: "w-full h-full object-cover"
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
                lineNumber: 244,
                columnNumber: 25
              },
              this
            ),
            /* @__PURE__ */ jsxDEV("div", { className: "absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover/continue:opacity-100 transition-opacity", children: /* @__PURE__ */ jsxDEV(Play, { className: "text-white fill-white", size: 24 }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
              lineNumber: 250,
              columnNumber: 29
            }, this) }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
              lineNumber: 249,
              columnNumber: 25
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
            lineNumber: 243,
            columnNumber: 21
          }, this)
        ]
      },
      void 0,
      true,
      {
        fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
        lineNumber: 233,
        columnNumber: 7
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/PageBanner.jsx",
    lineNumber: 113,
    columnNumber: 5
  }, this);
};
_s(PageBanner, "h3HHZuPwWUSBsG7pGi63HjjzNOQ=", false, function() {
  return [useConfigStore];
});
_c = PageBanner;
export default PageBanner;
var _c;
$RefreshReg$(_c, "PageBanner");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/PageBanner.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/PageBanner.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QTtBQUFBLE1BbkJKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQW9CQTtBQUFBLE9BNUlSO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0E4SUE7QUFFUjtBQUFFZSxHQXBPSWhCLFlBQVU7QUFBQSxVQUNxRkQsY0FBYztBQUFBO0FBQUErRCxLQUQ3RzlEO0FBdU9OLGVBQWVBO0FBQVcsSUFBQThEO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJSZWFjdCIsIkZPTERFUl9DT0xPUlMiLCJQZW4iLCJQbGF5IiwiZ2V0VGh1bWJuYWlsVXJsIiwiVW5pZmllZEJhbm5lckJhY2tncm91bmQiLCJ1c2VDb25maWdTdG9yZSIsIlBhZ2VCYW5uZXIiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZm9sZGVyQ29sb3IiLCJvbkVkaXQiLCJ2aWRlb0NvdW50IiwiY291bnRMYWJlbCIsImNyZWF0aW9uWWVhciIsImF1dGhvciIsImF2YXRhciIsImNvbnRpbnVlVmlkZW8iLCJvbkNvbnRpbnVlIiwiY2hpbGRyZW4iLCJjaGlsZHJlblBvc2l0aW9uIiwidG9wUmlnaHRDb250ZW50Iiwic2VhbWxlc3NCb3R0b20iLCJfcyIsImJhbm5lclBhdHRlcm4iLCJjdXN0b21QYWdlQmFubmVySW1hZ2UiLCJiYW5uZXJCZ1NpemUiLCJzZXRCYW5uZXJIZWlnaHQiLCJzZXRCYW5uZXJCZ1NpemUiLCJpc1Vuc29ydGVkIiwiY29sb3JDb25maWciLCJmaW5kIiwiYyIsImlkIiwiZ3JhZGllbnRTdHlsZSIsInNoYWRvd0NvbG9yIiwiYmFubmVyUmVmIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiY3VycmVudCIsInVwZGF0ZURpbWVuc2lvbnMiLCJiYW5uZXIiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib2JzZXJ2ZXIiLCJSZXNpemVPYnNlcnZlciIsIm9ic2VydmUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzY29ubmVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsImJhY2tncm91bmRQb3NpdGlvblkiLCJiYWNrZ3JvdW5kUG9zaXRpb25YIiwiYmFja2dyb3VuZFJlcGVhdCIsImhleCIsImJhY2tncm91bmQiLCJpc0dpZiIsInN0YXJ0c1dpdGgiLCJib3hTaGFkb3ciLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiaW5jbHVkZXMiLCJ0ZXh0U2hhZG93IiwidW5kZWZpbmVkIiwidmlkZW9faWQiLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJQYWdlQmFubmVyLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBGT0xERVJfQ09MT1JTIH0gZnJvbSAnLi4vdXRpbHMvZm9sZGVyQ29sb3JzJztcclxuaW1wb3J0IHsgUGVuLCBQbGF5IH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgZ2V0VGh1bWJuYWlsVXJsIH0gZnJvbSAnLi4vdXRpbHMveW91dHViZVV0aWxzJztcclxuXHJcblxyXG5pbXBvcnQgVW5pZmllZEJhbm5lckJhY2tncm91bmQgZnJvbSAnLi9VbmlmaWVkQmFubmVyQmFja2dyb3VuZCc7XHJcbmltcG9ydCB7IHVzZUNvbmZpZ1N0b3JlIH0gZnJvbSAnLi4vc3RvcmUvY29uZmlnU3RvcmUnO1xyXG5cclxuY29uc3QgUGFnZUJhbm5lciA9ICh7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZm9sZGVyQ29sb3IsIG9uRWRpdCwgdmlkZW9Db3VudCwgY291bnRMYWJlbCA9ICdWaWRlbycsIGNyZWF0aW9uWWVhciwgYXV0aG9yLCBhdmF0YXIsIGNvbnRpbnVlVmlkZW8sIG9uQ29udGludWUsIGNoaWxkcmVuLCBjaGlsZHJlblBvc2l0aW9uID0gJ3JpZ2h0JywgdG9wUmlnaHRDb250ZW50LCBzZWFtbGVzc0JvdHRvbSA9IGZhbHNlIH0pID0+IHtcclxuICAgIGNvbnN0IHsgYmFubmVyUGF0dGVybiwgY3VzdG9tUGFnZUJhbm5lckltYWdlLCBiYW5uZXJCZ1NpemUsIHNldEJhbm5lckhlaWdodCwgc2V0QmFubmVyQmdTaXplIH0gPSB1c2VDb25maWdTdG9yZSgpO1xyXG5cclxuICAgIC8vIEZpbmQgY29sb3IgY29uZmlnIGlmIGZvbGRlckNvbG9yIGlzIHByb3ZpZGVkXHJcbiAgICAvLyBJZiBmb2xkZXJDb2xvciBpcyAndW5zb3J0ZWQnLCBkaXN0aW5jdCBncmF5IHN0eWxlXHJcbiAgICBjb25zdCBpc1Vuc29ydGVkID0gZm9sZGVyQ29sb3IgPT09ICd1bnNvcnRlZCc7XHJcblxyXG4gICAgY29uc3QgY29sb3JDb25maWcgPSAoIWlzVW5zb3J0ZWQgJiYgZm9sZGVyQ29sb3IpXHJcbiAgICAgICAgPyBGT0xERVJfQ09MT1JTLmZpbmQoYyA9PiBjLmlkID09PSBmb2xkZXJDb2xvcilcclxuICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIGdyYWRpZW50IHN0eWxlc1xyXG4gICAgbGV0IGdyYWRpZW50U3R5bGU7XHJcbiAgICBsZXQgc2hhZG93Q29sb3I7XHJcblxyXG4gICAgLy8gTWVhc3VyZSBoZWlnaHQgYW5kIGNhbGN1bGF0ZSBiYWNrZ3JvdW5kIHNpemUgZm9yIFVuaWZpZWQgQmFubmVyXHJcbiAgICBjb25zdCBiYW5uZXJSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XHJcblxyXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWJhbm5lclJlZi5jdXJyZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURpbWVuc2lvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhbm5lciA9IGJhbm5lclJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIWJhbm5lcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBiYW5uZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGJhbm5lci5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBubyBjdXN0b20gaW1hZ2UsIGp1c3QgcmVwb3J0IGhlaWdodFxyXG4gICAgICAgICAgICBpZiAoIWN1c3RvbVBhZ2VCYW5uZXJJbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgc2V0QmFubmVySGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEp1c3QgcmVwb3J0IGhlaWdodCBmb3IgUGFnZUJhbm5lciBzcGFjaW5nLCB3ZSB1c2UgY292ZXIvY2VudGVyIG5vdy5cclxuICAgICAgICAgICAgc2V0QmFubmVySGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHVwZGF0ZURpbWVuc2lvbnMpO1xyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoYmFubmVyUmVmLmN1cnJlbnQpO1xyXG5cclxuICAgICAgICAvLyBBbHNvIGxpc3RlbiB0byB3aW5kb3cgcmVzaXplIGZvciBob3Jpem9udGFsIGNoYW5nZXNcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRGltZW5zaW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZURpbWVuc2lvbnMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbY3VzdG9tUGFnZUJhbm5lckltYWdlLCBzZXRCYW5uZXJIZWlnaHQsIHNldEJhbm5lckJnU2l6ZV0pO1xyXG5cclxuICAgIGlmIChjdXN0b21QYWdlQmFubmVySW1hZ2UpIHtcclxuICAgICAgICBncmFkaWVudFN0eWxlID0ge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtjdXN0b21QYWdlQmFubmVySW1hZ2V9KWAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRTaXplOiAnY292ZXInLCAvLyBTdGFuZGFyZCBjb3ZlclxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb25ZOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uWDogJzBweCcsIC8vIEFsbG93IGFuaW1hdGlvbiB0byB0YWtlIG92ZXIgWCBheGlzXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICdyZXBlYXQteCcsIC8vIFJlcGVhdCBob3Jpem9udGFsbHkgZm9yIHNjcm9sbFxyXG4gICAgICAgICAgICAvLyBiYWNrZ3JvdW5kQXR0YWNobWVudDogJ2ZpeGVkJywgLy8gUmVtb3ZlZCBmaXhlZCB0byBiYXNpYyBhYnNvbHV0ZSBzdGl0Y2hpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFVzZSBhIG5ldXRyYWwgb3IgZG9taW5hbnQgY29sb3IgZm9yIHNoYWRvdyBpZiBwb3NzaWJsZSwgb3IgZmFsbGJhY2tcclxuICAgICAgICBzaGFkb3dDb2xvciA9IGNvbG9yQ29uZmlnPy5oZXggfHwgJyMzYjgyZjYnO1xyXG4gICAgfSBlbHNlIGlmIChpc1Vuc29ydGVkKSB7XHJcbiAgICAgICAgZ3JhZGllbnRTdHlsZSA9IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NDc0OGIgMCUsICM0NzU1NjkgMTAwJSknIC8vIFNsYXRlL0dyYXlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNoYWRvd0NvbG9yID0gJyM2NDc0OGInO1xyXG4gICAgfSBlbHNlIGlmIChjb2xvckNvbmZpZykge1xyXG4gICAgICAgIGdyYWRpZW50U3R5bGUgPSB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAke2NvbG9yQ29uZmlnLmhleH1ERCAwJSwgJHtjb2xvckNvbmZpZy5oZXh9IDEwMCUpYFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2hhZG93Q29sb3IgPSBjb2xvckNvbmZpZy5oZXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIERlZmF1bHQgUGxheWxpc3QgQmx1ZVxyXG4gICAgICAgIGdyYWRpZW50U3R5bGUgPSB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMGVhNWU5IDAlLCAjM2I4MmY2IDEwMCUpJyAvLyBTa3kgdG8gQmx1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2hhZG93Q29sb3IgPSAnIzNiODJmNic7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgY3VzdG9tIGltYWdlIGlzIGEgR0lGXHJcbiAgICBjb25zdCBpc0dpZiA9IGN1c3RvbVBhZ2VCYW5uZXJJbWFnZT8uc3RhcnRzV2l0aCgnZGF0YTppbWFnZS9naWYnKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgcmVmPXtiYW5uZXJSZWZ9IGNsYXNzTmFtZT17YHctZnVsbCByZWxhdGl2ZSBhbmltYXRlLWZhZGUtaW4gZ3JvdXAgbXgtYXV0byBoLVsyMjBweF0gJHtzZWFtbGVzc0JvdHRvbSA/ICdtYi0wJyA6ICdtYi04J31gfT5cclxuXHJcbiAgICAgICAgICAgIHsvKiBCYWNrZ3JvdW5kIExheWVyIC0gSGlkZXMgb3ZlcmZsb3cgZm9yIHNoYXBlcy9wYXR0ZXJucy9pbWFnZXMgKi99XHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGFic29sdXRlIGluc2V0LTAgb3ZlcmZsb3ctaGlkZGVuICR7c2VhbWxlc3NCb3R0b20gPyAncm91bmRlZC10LTJ4bCByb3VuZGVkLWItbm9uZSBzaGFkb3ctbm9uZScgOiAncm91bmRlZC0yeGwgc2hhZG93LWxnJ31gfVxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAvLyBHcmFkaWVudCBzdHlsZXMgb25seSB3aGVuIE5PIGN1c3RvbSBpbWFnZSAoZmFsbGJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uKCFjdXN0b21QYWdlQmFubmVySW1hZ2UgPyBncmFkaWVudFN0eWxlIDoge30pLFxyXG4gICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzogc2VhbWxlc3NCb3R0b20gPyAnbm9uZScgOiBgMCAxMHB4IDI1cHggLTVweCAke3NoYWRvd0NvbG9yfTUwYFxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgey8qIFVuaWZpZWQgR1BVIEJhbm5lciAqL31cclxuICAgICAgICAgICAgICAgIHtjdXN0b21QYWdlQmFubmVySW1hZ2UgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxVbmlmaWVkQmFubmVyQmFja2dyb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZT17Y3VzdG9tUGFnZUJhbm5lckltYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZ1NpemU9XCJjb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlPZmZzZXQ9XCJjZW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0dpZj17aXNHaWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIEFuaW1hdGVkIFBhdHRlcm4gT3ZlcmxheSAqL31cclxuICAgICAgICAgICAgICAgIHshY3VzdG9tUGFnZUJhbm5lckltYWdlICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFic29sdXRlIGluc2V0LTAgcG9pbnRlci1ldmVudHMtbm9uZSB6LTAgcGF0dGVybi0ke2Jhbm5lclBhdHRlcm4gfHwgJ2RpYWdvbmFsJ31gfSAvPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBBYnN0cmFjdCBCYWNrZ3JvdW5kIFNoYXBlcyAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTAgcmlnaHQtMCB3LTk2IGgtOTYgYmctd2hpdGUvMTAgcm91bmRlZC1mdWxsIGJsdXItM3hsIC1tci0yMCAtbXQtMjAgcG9pbnRlci1ldmVudHMtbm9uZSB0cmFuc2Zvcm0gZ3JvdXAtaG92ZXI6c2NhbGUtMTEwIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTEwMDAgZWFzZS1pbi1vdXRcIiAvPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgdy02NCBoLTY0IGJnLWJsYWNrLzEwIHJvdW5kZWQtZnVsbCBibHVyLTJ4bCAtbWwtMTYgLW1iLTE2IHBvaW50ZXItZXZlbnRzLW5vbmVcIiAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBFZGl0IEJ1dHRvbiAtIFZpc2libGUgb24gaG92ZXIgaWYgb25FZGl0IGlzIHByb3ZpZGVkICovfVxyXG4gICAgICAgICAgICB7b25FZGl0ICYmIChcclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IGxlZnQtNCBwLTIgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgYmFja2Ryb3AtYmx1ci1tZCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIHRyYW5zZm9ybSBob3ZlcjpzY2FsZS0xMDUgei0yMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJFZGl0IERldGFpbHNcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxQZW4gc2l6ZT17MTh9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIHsvKiBUb3AgUmlnaHQgQ29udGVudCAqL31cclxuICAgICAgICAgICAge3RvcFJpZ2h0Q29udGVudCAmJiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IHJpZ2h0LTQgei0zMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0b3BSaWdodENvbnRlbnR9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIHsvKiBDb250ZW50IENvbnRhaW5lciAtIEFsbG93IG92ZXJmbG93IGZvciBkcm9wZG93bnMgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgei0xMCBmbGV4IGl0ZW1zLXN0YXJ0IGgtZnVsbCBnYXAtOCB3LWZ1bGwgcHgtOCBwdC00XCI+XHJcbiAgICAgICAgICAgICAgICB7LyogQXZhdGFyIFNlY3Rpb24gKE9wdGlvbmFsKSAqL31cclxuICAgICAgICAgICAgICAgIHthdmF0YXIgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hyaW5rLTAgaGlkZGVuIG1kOmZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0xIGFuaW1hdGUtaW4gZmFkZS1pbiBzbGlkZS1pbi1mcm9tLWxlZnQtNCBkdXJhdGlvbi03MDAgbXQtOFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YXZhdGFyLmluY2x1ZGVzKCdcXG4nKSA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3NOYW1lPVwiZm9udC1tb25vIHRleHQtWzRweF0gbGVhZGluZy1ub25lIHdoaXRlc3BhY2UtcHJlIHRleHQtd2hpdGUvOTAgZHJvcC1zaGFkb3ctbWQgc2VsZWN0LW5vbmUgb3BhY2l0eS05MCBtaXgtYmxlbmQtb3ZlcmxheVwiIHN0eWxlPXt7IHRleHRTaGFkb3c6ICctMC41cHggLTAuNXB4IDAgIzAwMCwgMC41cHggLTAuNXB4IDAgIzAwMCwgLTAuNXB4IDAuNXB4IDAgIzAwMCwgMC41cHggMC41cHggMCAjMDAwLCAwIDFweCAycHggcmdiYSgwLDAsMCwxKScgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2F2YXRhcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcHJlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIGxpbmUgYXZhdGFycyAoTGVubnkpIGFyZSBsYXJnZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tb25vIHRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlLzkwIGRyb3Atc2hhZG93LW1kIHdoaXRlc3BhY2Utbm93cmFwIG9wYWNpdHktOTAgbWl4LWJsZW5kLW92ZXJsYXlcIiBzdHlsZT17eyB0ZXh0U2hhZG93OiAnLTJweCAtMnB4IDAgIzAwMCwgMnB4IC0ycHggMCAjMDAwLCAtMnB4IDJweCAwICMwMDAsIDJweCAycHggMCAjMDAwLCAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjgpJyB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXZhdGFyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LXN0YXJ0IG1pbi13LTAgJHtjb250aW51ZVZpZGVvID8gJ3ByLTY0JyA6ICcnfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBtZDp0ZXh0LTV4bCBmb250LWJsYWNrIHRleHQtd2hpdGUgbWItMiB0cmFja2luZy10aWdodCBkcm9wLXNoYWRvdy1tZCB0cnVuY2F0ZVwiIHN0eWxlPXt7IHRleHRTaGFkb3c6ICctMnB4IC0ycHggMCAjMDAwLCAycHggLTJweCAwICMwMDAsIC0ycHggMnB4IDAgIzAwMCwgMnB4IDJweCAwICMwMDAsIDAgNHB4IDhweCByZ2JhKDAsMCwwLDAuOCknIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oMT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIE1ldGFkYXRhIFJvdyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtd2hpdGUvODAgZm9udC1tZWRpdW0gdGV4dC1zbSBtZDp0ZXh0LWJhc2UgbWItNFwiIHN0eWxlPXt7IHRleHRTaGFkb3c6ICctMXB4IC0xcHggMCAjMDAwLCAxcHggLTFweCAwICMwMDAsIC0xcHggMXB4IDAgIzAwMCwgMXB4IDFweCAwICMwMDAsIDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuOSknIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dmlkZW9Db3VudCAhPT0gdW5kZWZpbmVkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPnt2aWRlb0NvdW50fSB7dmlkZW9Db3VudCA9PT0gMSA/IGNvdW50TGFiZWwgOiBgJHtjb3VudExhYmVsfXNgfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyh2aWRlb0NvdW50ICE9PSB1bmRlZmluZWQgJiYgKGNyZWF0aW9uWWVhciB8fCBhdXRob3IpKSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTEgaC0xIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS82MCBzaGFkb3ctc21cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3JlYXRpb25ZZWFyICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntjcmVhdGlvblllYXJ9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7KGNyZWF0aW9uWWVhciAmJiBhdXRob3IpICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInctMSBoLTEgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzYwIHNoYWRvdy1zbVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHthdXRob3IgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2F1dGhvcn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtkZXNjcmlwdGlvbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbWQ6dGV4dC1iYXNlIHRleHQtd2hpdGUvOTAgZm9udC1tZWRpdW0gbWF4LXctNHhsIGxlYWRpbmctcmVsYXhlZCBkcm9wLXNoYWRvdy1zbSBvcGFjaXR5LTkwIGxpbmUtY2xhbXAtMlwiIHN0eWxlPXt7IHRleHRTaGFkb3c6ICctMXB4IC0xcHggMCAjMDAwLCAxcHggLTFweCAwICMwMDAsIC0xcHggMXB4IDAgIzAwMCwgMXB4IDFweCAwICMwMDAsIDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuOCknIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIEJvdHRvbSBDb250ZW50IChlLmcuIFRhYnMpICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHtjaGlsZHJlbiAmJiBjaGlsZHJlblBvc2l0aW9uID09PSAnYm90dG9tJyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIFJpZ2h0IENvbnRlbnQgKi99XHJcbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW4gJiYgY2hpbGRyZW5Qb3NpdGlvbiA9PT0gJ3JpZ2h0JyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC1hdXRvIHBsLThcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogQ29udGludWUgU2VjdGlvbiAtIEJvdHRvbSBSaWdodCAqL31cclxuICAgICAgICAgICAge2NvbnRpbnVlVmlkZW8gJiYgKFxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xMiByaWdodC02IGZsZXggZmxleC1jb2wgaXRlbXMtZW5kIGdhcC0yIGdyb3VwL2NvbnRpbnVlIGN1cnNvci1wb2ludGVyIHotMjBcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbnRpbnVlKSBvbkNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzgwIGZvbnQtYm9sZCB0ZXh0LXNtIHRyYWNraW5nLXdpZGVyIGdyb3VwLWhvdmVyL2NvbnRpbnVlOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnNcIiBzdHlsZT17eyB0ZXh0U2hhZG93OiAnLTFweCAtMXB4IDAgIzAwMCwgMXB4IC0xcHggMCAjMDAwLCAtMXB4IDFweCAwICMwMDAsIDFweCAxcHggMCAjMDAwLCAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjgpJyB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ09OVElOVUU/XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgaC0yNCBhc3BlY3QtdmlkZW8gcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gc2hhZG93LWxnIGJvcmRlci0yIGJvcmRlci13aGl0ZS8yMCBncm91cC1ob3Zlci9jb250aW51ZTpib3JkZXItd2hpdGUgdHJhbnNpdGlvbi1hbGwgdHJhbnNmb3JtIGdyb3VwLWhvdmVyL2NvbnRpbnVlOnNjYWxlLTEwNVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2dldFRodW1ibmFpbFVybChjb250aW51ZVZpZGVvLnZpZGVvX2lkLCAnbWVkaXVtJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e2NvbnRpbnVlVmlkZW8udGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjay8zMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvcGFjaXR5LTAgZ3JvdXAtaG92ZXIvY29udGludWU6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGxheSBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGZpbGwtd2hpdGVcIiBzaXplPXsyNH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGFnZUJhbm5lcjtcclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy95dHR2Mi9zcmMvY29tcG9uZW50cy9QYWdlQmFubmVyLmpzeCJ9