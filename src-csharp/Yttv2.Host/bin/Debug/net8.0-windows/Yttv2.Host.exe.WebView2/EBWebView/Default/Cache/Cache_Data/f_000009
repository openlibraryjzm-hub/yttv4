import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/PlaylistsPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/PlaylistsPage.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useRef = __vite__cjsImport3_react["useRef"];
import { createPlaylist, getAllPlaylists, getPlaylistItems, deletePlaylist, deletePlaylistByName, getAllFoldersWithVideos, exportPlaylist, getFoldersForPlaylist, toggleStuckFolder, getAllStuckFolders, getVideosInFolder, getAllVideoProgress, getAllPlaylistMetadata } from "/src/api/playlistApi.js";
import { getThumbnailUrl } from "/src/utils/youtubeUtils.js";
import { usePlaylistStore } from "/src/store/playlistStore.js";
import { Eye, Play, Shuffle } from "/node_modules/.vite/deps/lucide-react.js?v=cd56faf3";
import { useFolderStore } from "/src/store/folderStore.js";
import { useTabStore } from "/src/store/tabStore.js";
import { useTabPresetStore } from "/src/store/tabPresetStore.js";
import { useLayoutStore } from "/src/store/layoutStore.js";
import { useNavigationStore } from "/src/store/navigationStore.js";
import { getFolderColorById } from "/src/utils/folderColors.js";
import { useInspectLabel } from "/src/utils/inspectLabels.js";
import PlaylistUploader from "/src/components/PlaylistUploader.jsx";
import BulkPlaylistImporter from "/src/components/BulkPlaylistImporter.jsx";
import LocalVideoUploader from "/src/components/LocalVideoUploader.jsx";
import CardMenu from "/src/components/NewCardMenu.jsx";
import TabBar from "/src/components/TabBar.jsx";
import CardThumbnail from "/src/components/CardThumbnail.jsx";
import PageBanner from "/src/components/PageBanner.jsx";
import { useConfigStore } from "/src/store/configStore.js";
import TabPresetsDropdown from "/src/components/TabPresetsDropdown.jsx";
import AddPlaylistToTabModal from "/src/components/AddPlaylistToTabModal.jsx";
import UnifiedBannerBackground from "/src/components/UnifiedBannerBackground.jsx";
import PlaylistCardSkeleton from "/src/components/skeletons/PlaylistCardSkeleton.jsx";
const PlaylistsPage = ({ onVideoSelect }) => {
  _s();
  const [playlists, setPlaylists] = useState([]);
  const [playlistThumbnails, setPlaylistThumbnails] = useState({});
  const [playlistRecentVideos, setPlaylistRecentVideos] = useState({});
  const [playlistItemCounts, setPlaylistItemCounts] = useState({});
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [showUploader, setShowUploader] = useState(false);
  const [showBulkImporter, setShowBulkImporter] = useState(false);
  const [showLocalVideoUploader, setShowLocalVideoUploader] = useState(false);
  const [selectedPlaylistForLocalUpload, setSelectedPlaylistForLocalUpload] = useState(null);
  const [showPlaylistSelector, setShowPlaylistSelector] = useState(false);
  const [deletingPlaylistId, setDeletingPlaylistId] = useState(null);
  const [folders, setFolders] = useState([]);
  const [expandedPlaylists, setExpandedPlaylists] = useState(/* @__PURE__ */ new Set());
  const [playlistFolders, setPlaylistFolders] = useState({});
  const [stuckFolders, setStuckFolders] = useState(/* @__PURE__ */ new Set());
  const { setPlaylistItems, currentPlaylistItems, setCurrentFolder, setPreviewPlaylist, setAllPlaylists, activePlaylistId } = usePlaylistStore();
  const { showColoredFolders, setShowColoredFolders } = useFolderStore();
  const [imageLoadErrors, setImageLoadErrors] = useState(/* @__PURE__ */ new Set());
  const { tabs, activeTabId, addPlaylistToTab, removePlaylistFromTab } = useTabStore();
  const { activePresetId, presets } = useTabPresetStore();
  const { setViewMode, viewMode, inspectMode } = useLayoutStore();
  const { customPageBannerImage, bannerHeight, bannerBgSize } = useConfigStore();
  const { setCurrentPage } = useNavigationStore();
  const getInspectTitle = (label) => inspectMode ? label : void 0;
  const hasDeletedTestPlaylist = useRef(false);
  const [isStuck, setIsStuck] = useState(false);
  const stickySentinelRef = useRef(null);
  const scrollContainerRef = useRef(null);
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        setIsStuck(entry.intersectionRatio < 1 && entry.boundingClientRect.top < 0);
      },
      { threshold: [1], rootMargin: "-1px 0px 0px 0px" }
    );
    if (stickySentinelRef.current) {
      observer.observe(stickySentinelRef.current);
    }
    return () => observer.disconnect();
  }, []);
  useEffect(() => {
    loadPlaylists();
    loadStuckFolders();
  }, []);
  const loadStuckFolders = async () => {
    try {
      const stuck = await getAllStuckFolders();
      const stuckSet = new Set(stuck.map(([playlistId, folderColor]) => `${playlistId}:${folderColor}`));
      setStuckFolders(stuckSet);
    } catch (error2) {
      console.error("Failed to load stuck folders:", error2);
    }
  };
  useEffect(() => {
    if (showColoredFolders) {
      loadFolders();
    } else {
      loadFolders();
    }
    loadStuckFolders();
  }, [showColoredFolders]);
  const loadFolders = async () => {
    try {
      console.log("Loading specific folders via optimized batch fetch...");
      const bulk = await getAllFoldersWithVideos();
      if (Array.isArray(bulk)) {
        console.log("Loaded folders (batch):", bulk.length);
        setFolders(bulk);
      } else {
        setFolders([]);
      }
    } catch (error2) {
      console.error("Failed to load folders:", error2);
      setFolders([]);
    }
  };
  useEffect(() => {
    const cleanupTestPlaylist = async () => {
      if (hasDeletedTestPlaylist.current) return;
      hasDeletedTestPlaylist.current = true;
      try {
        const result = await deletePlaylistByName("Test Playlist");
        if (result) {
          console.log('Successfully deleted "Test Playlist"');
          await loadPlaylists();
        }
      } catch (error2) {
        console.error("Error deleting Test Playlist:", error2);
      }
    };
    cleanupTestPlaylist();
  }, []);
  const loadPlaylists = async () => {
    try {
      setLoading(true);
      setError(null);
      console.log("Loading playlists from database...");
      const [data, metadataList, allProgress] = await Promise.all(
        [
          getAllPlaylists(),
          getAllPlaylistMetadata().catch((e) => {
            console.error("Failed to load metadata", e);
            return [];
          }),
          getAllVideoProgress().catch((e) => {
            console.error("Failed to load video progress", e);
            return [];
          })
        ]
      );
      console.log("Loaded playlists:", data);
      const progressMap = /* @__PURE__ */ new Map();
      if (Array.isArray(allProgress)) {
        allProgress.forEach((p) => {
          if (p.video_id && p.last_updated) {
            progressMap.set(p.video_id, p.last_updated);
          }
        });
      }
      if (Array.isArray(data)) {
        setPlaylists(data);
        setAllPlaylists(data);
        const thumbnailMap = {};
        const recentVideoMap = {};
        const itemCountMap = {};
        const metadataMap = /* @__PURE__ */ new Map();
        if (Array.isArray(metadataList)) {
          metadataList.forEach((m) => metadataMap.set(m.playlist_id, m));
        }
        try {
          const allFolders = await getAllFoldersWithVideos();
          if (Array.isArray(allFolders)) {
            const pFolders = {};
            allFolders.forEach((f) => {
              if (!pFolders[f.playlist_id]) pFolders[f.playlist_id] = [];
              pFolders[f.playlist_id].push(f);
            });
            setPlaylistFolders(pFolders);
          }
        } catch (e) {
          console.warn("Failed to load folders for map", e);
        }
        for (const playlist2 of data) {
          const meta = metadataMap.get(playlist2.id);
          itemCountMap[playlist2.id] = meta ? meta.count : 0;
          if (playlist2.custom_thumbnail_url) {
            thumbnailMap[playlist2.id] = {
              max: playlist2.custom_thumbnail_url,
              standard: playlist2.custom_thumbnail_url
            };
          } else if (meta && meta.first_video) {
            const vid = meta.first_video;
            thumbnailMap[playlist2.id] = {
              max: vid.thumbnail_url || getThumbnailUrl(vid.video_id, "max"),
              standard: vid.thumbnail_url || getThumbnailUrl(vid.video_id, "standard")
            };
          }
          if (meta && meta.recent_video) {
            recentVideoMap[playlist2.id] = meta.recent_video;
          }
        }
        setPlaylistThumbnails(thumbnailMap);
        setPlaylistRecentVideos(recentVideoMap);
        setPlaylistItemCounts(itemCountMap);
      } else {
        console.warn("getAllPlaylists returned non-array data:", data);
        setPlaylists([]);
      }
    } catch (error2) {
      console.error("Failed to load playlists:", error2);
      setError(error2.message || "Failed to load playlists from database");
      setPlaylists([]);
    } finally {
      setLoading(false);
    }
  };
  if (loading) {
    return /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex flex-col", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "px-8 pt-8", children: /* @__PURE__ */ jsxDEV("div", { className: "w-full h-64 bg-slate-800/30 rounded-xl animate-pulse mb-8" }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 281,
        columnNumber: 11
      }, this) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 279,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-2 gap-4 px-8 pb-8", children: [...Array(6)].map(
        (_, i) => /* @__PURE__ */ jsxDEV(PlaylistCardSkeleton, {}, i, false, {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 285,
          columnNumber: 11
        }, this)
      ) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 283,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 278,
      columnNumber: 7
    }, this);
  }
  if (error) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col items-center justify-center w-full h-full gap-4", children: [
      /* @__PURE__ */ jsxDEV("p", { className: "text-red-400 text-lg", children: "Error loading playlists" }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 295,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-slate-400 text-sm", children: error }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 296,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: loadPlaylists,
          className: "px-4 py-2 bg-sky-500 rounded-lg hover:bg-sky-600 transition-colors",
          style: { color: "#052F4A" },
          children: "Retry"
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 297,
          columnNumber: 9
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 294,
      columnNumber: 7
    }, this);
  }
  if (playlists.length === 0) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center w-full h-full", children: /* @__PURE__ */ jsxDEV("p", { className: "text-lg", style: { color: "#052F4A" }, children: "No playlists found. Create one to get started!" }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 311,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 310,
      columnNumber: 7
    }, this);
  }
  const handleUploadComplete = async () => {
    try {
      setShowUploader(false);
      await loadPlaylists();
    } catch (error2) {
      console.error("Error reloading playlists after upload:", error2);
      setShowUploader(false);
    }
  };
  const handleBulkImportComplete = async () => {
    try {
      setShowBulkImporter(false);
      await loadPlaylists();
      if (showColoredFolders) {
        await loadFolders();
      }
    } catch (error2) {
      console.error("Error reloading playlists after bulk import:", error2);
      setShowBulkImporter(false);
    }
  };
  const handleLocalVideoUploadComplete = async () => {
    try {
      setShowLocalVideoUploader(false);
      setSelectedPlaylistForLocalUpload(null);
      await loadPlaylists();
    } catch (error2) {
      console.error("Error reloading playlists after local video upload:", error2);
      setShowLocalVideoUploader(false);
      setSelectedPlaylistForLocalUpload(null);
    }
  };
  const handleOpenLocalVideoUploader = () => {
    if (playlists.length === 0) {
      alert("Please create a playlist first before adding local videos.");
      return;
    }
    if (playlists.length === 1) {
      setSelectedPlaylistForLocalUpload(playlists[0].id);
      setShowLocalVideoUploader(true);
    } else {
      setShowPlaylistSelector(true);
    }
  };
  const handlePlaylistSelected = (playlistId) => {
    setSelectedPlaylistForLocalUpload(playlistId);
    setShowPlaylistSelector(false);
    setShowLocalVideoUploader(true);
  };
  const handleDeletePlaylist = async (playlistId, playlistName, e) => {
    e.stopPropagation();
    try {
      const confirmed = window.confirm(
        `Are you sure you want to delete "${playlistName}"?

This will permanently delete the playlist and all its videos.`
      );
      if (!confirmed) return;
      setDeletingPlaylistId(playlistId);
      try {
        await deletePlaylist(playlistId);
        if (currentPlaylistItems.length > 0) {
          setPlaylistItems([]);
        }
        await loadPlaylists();
      } catch (deleteError) {
        console.error("Failed to delete playlist:", deleteError);
        const errorMessage = deleteError?.message || deleteError?.toString() || "Unknown error";
        alert(`Failed to delete playlist: ${errorMessage}`);
      } finally {
        setDeletingPlaylistId(null);
      }
    } catch (error2) {
      console.error("Error in delete handler:", error2);
      setDeletingPlaylistId(null);
      if (error2.name !== "AbortError" && !error2.message?.includes("cancel")) {
        alert(`An error occurred: ${error2.message || "Unknown error"}`);
      }
    }
  };
  const handleExportPlaylist = async (playlistId, playlistName) => {
    try {
      const exportData = await exportPlaylist(playlistId);
      const jsonString = JSON.stringify(exportData, null, 2);
      const blob = new Blob([jsonString], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = `${playlistName.replace(/[^a-z0-9]/gi, "_")}_export.json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
      alert(`Playlist "${playlistName}" exported successfully!`);
    } catch (error2) {
      console.error("Failed to export playlist:", error2);
      alert(`Failed to export playlist: ${error2.message || "Unknown error"}`);
    }
  };
  const togglePlaylistExpand = async (playlistId) => {
    const isExpanded = expandedPlaylists.has(playlistId);
    if (isExpanded) {
      setExpandedPlaylists((prev) => {
        const newSet = new Set(prev);
        newSet.delete(playlistId);
        return newSet;
      });
    } else {
      setExpandedPlaylists((prev) => new Set(prev).add(playlistId));
      if (!playlistFolders[playlistId] || playlistFolders[playlistId].length === 0) {
        try {
          const folders2 = await getFoldersForPlaylist(playlistId);
          const folderArray = folders2 || [];
          console.log(`Loaded ${folderArray.length} folders for playlist ${playlistId}`);
          setPlaylistFolders((prev) => ({
            ...prev,
            [playlistId]: folderArray
          }));
        } catch (error2) {
          console.error(`Failed to load folders for playlist ${playlistId}:`, error2);
          setPlaylistFolders((prev) => ({
            ...prev,
            [playlistId]: []
          }));
        }
      }
    }
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex flex-col", children: showBulkImporter ? /* @__PURE__ */ jsxDEV(
    BulkPlaylistImporter,
    {
      onImportComplete: handleBulkImportComplete,
      onCancel: () => setShowBulkImporter(false)
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 479,
      columnNumber: 7
    },
    this
  ) : showUploader ? /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-y-auto p-4 bg-transparent", children: /* @__PURE__ */ jsxDEV(
    PlaylistUploader,
    {
      onUploadComplete: handleUploadComplete,
      onCancel: () => setShowUploader(false)
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 485,
      columnNumber: 11
    },
    this
  ) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 484,
    columnNumber: 7
  }, this) : showPlaylistSelector ? /* @__PURE__ */ jsxDEV("div", { className: "fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4", children: /* @__PURE__ */ jsxDEV("div", { className: "bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md p-6", children: [
    /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-between mb-4", children: [
      /* @__PURE__ */ jsxDEV("h3", { className: "text-lg font-semibold", style: { color: "#052F4A" }, children: "Select Playlist" }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 494,
        columnNumber: 15
      }, this),
      /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: () => setShowPlaylistSelector(false),
          className: "text-slate-400 transition-colors",
          onMouseEnter: (e) => e.currentTarget.style.color = "#052F4A",
          onMouseLeave: (e) => e.currentTarget.style.color = "rgb(148 163 184)",
          children: /* @__PURE__ */ jsxDEV("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 502,
            columnNumber: 19
          }, this) }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 501,
            columnNumber: 17
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 495,
          columnNumber: 15
        },
        this
      )
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 493,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV("p", { className: "text-slate-300 text-sm mb-4", children: "Choose a playlist to add local videos to:" }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 506,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV("div", { className: "space-y-2 max-h-64 overflow-y-auto mb-4", children: playlists.map(
      (playlist2) => /* @__PURE__ */ jsxDEV(
        "button",
        {
          onClick: () => handlePlaylistSelected(playlist2.id),
          className: "w-full text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors border border-transparent hover:border-sky-500",
          children: [
            /* @__PURE__ */ jsxDEV("div", { className: "font-medium", style: { color: "#052F4A" }, children: playlist2.name }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
              lineNumber: 514,
              columnNumber: 19
            }, this),
            playlist2.description && /* @__PURE__ */ jsxDEV("div", { className: "text-slate-400 text-xs mt-1 line-clamp-1", children: playlist2.description }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
              lineNumber: 516,
              columnNumber: 15
            }, this)
          ]
        },
        playlist2.id,
        true,
        {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 509,
          columnNumber: 13
        },
        this
      )
    ) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 507,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV(
      "button",
      {
        onClick: () => setShowPlaylistSelector(false),
        className: "w-full px-4 py-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",
        style: { color: "#052F4A" },
        children: "Cancel"
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 521,
        columnNumber: 13
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 492,
    columnNumber: 11
  }, this) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 491,
    columnNumber: 7
  }, this) : showLocalVideoUploader ? /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-y-auto p-4 bg-transparent", children: /* @__PURE__ */ jsxDEV(
    LocalVideoUploader,
    {
      playlistId: selectedPlaylistForLocalUpload,
      onUploadComplete: handleLocalVideoUploadComplete,
      onCancel: () => {
        setShowLocalVideoUploader(false);
        setSelectedPlaylistForLocalUpload(null);
      }
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 532,
      columnNumber: 11
    },
    this
  ) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 531,
    columnNumber: 7
  }, this) : /* @__PURE__ */ jsxDEV(Fragment, { children: /* @__PURE__ */ jsxDEV("div", { ref: scrollContainerRef, className: "flex-1 overflow-y-auto bg-transparent relative", children: [
    (() => {
      const activePreset = presets.find((p) => p.id === activePresetId);
      let bannerTitle = activePresetId === "all" || !activePreset ? "All" : activePreset.name;
      if (activeTabId && activeTabId !== "all") {
        const activeTab = tabs.find((t) => t.id === activeTabId);
        if (activeTab) {
          bannerTitle += ` - ${activeTab.name}`;
        }
      }
      const filteredPlaylists = playlists.filter((playlist2) => {
        if (activeTabId === "all") return true;
        const activeTab = tabs.find((t) => t.id === activeTabId);
        return activeTab && activeTab.playlistIds.includes(playlist2.id);
      });
      const playlistCount = filteredPlaylists.length;
      const totalVideos = filteredPlaylists.reduce((sum, p) => sum + (playlistItemCounts[p.id] || 0), 0);
      return /* @__PURE__ */ jsxDEV("div", { className: "px-8 pt-8", children: /* @__PURE__ */ jsxDEV(
        PageBanner,
        {
          title: bannerTitle,
          description: null,
          color: null,
          isEditable: false,
          seamlessBottom: true,
          videoCount: playlistCount,
          countLabel: "Playlist",
          author: `${totalVideos} Videos`
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 573,
          columnNumber: 19
        },
        this
      ) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 572,
        columnNumber: 15
      }, this);
    })(),
    /* @__PURE__ */ jsxDEV("div", { ref: stickySentinelRef, className: "absolute h-px w-full -mt-px pointer-events-none opacity-0" }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 588,
      columnNumber: 13
    }, this),
    /* @__PURE__ */ jsxDEV(
      "div",
      {
        className: `sticky top-0 z-40 transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1) overflow-hidden -mt-16
              ${isStuck ? "backdrop-blur-xl border-y shadow-2xl mx-0 rounded-none mb-6 pt-2 pb-2 bg-slate-900/70" : "backdrop-blur-[2px] border-b border-x border-t border-white/10 shadow-xl mx-8 rounded-b-2xl mb-8 mt-0 pt-1 pb-0 bg-transparent"}
              `,
        style: {
          backgroundColor: isStuck ? void 0 : "transparent"
          // Fully transparent resting state
        },
        children: /* @__PURE__ */ jsxDEV("div", { className: `px-4 flex items-center justify-between transition-all duration-300 relative z-10 ${isStuck ? "h-[52px]" : "py-0.5"}`, children: [
          /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-x-auto no-scrollbar mask-gradient-right min-w-0", children: /* @__PURE__ */ jsxDEV(TabBar, { onAddPlaylistToTab: addPlaylistToTab, showPresets: true }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 608,
            columnNumber: 19
          }, this) }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 607,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 ml-4 shrink-0 pl-3 border-l border-white/10", children: [
            /* @__PURE__ */ jsxDEV(
              "button",
              {
                onClick: () => setShowColoredFolders(!showColoredFolders),
                className: `p-1.5 rounded-md transition-all ${showColoredFolders ? "bg-sky-600 text-white shadow-sm" : "bg-slate-800/80 text-slate-400 hover:bg-slate-700 hover:text-white border border-white/10"}`,
                title: showColoredFolders ? "Hide Folders" : "Show Folders",
                children: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 624,
                  columnNumber: 23
                }, this) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 623,
                  columnNumber: 21
                }, this)
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 615,
                columnNumber: 19
              },
              this
            ),
            /* @__PURE__ */ jsxDEV(
              "button",
              {
                onClick: () => setShowImportModal(true),
                className: "p-1.5 bg-sky-500 hover:bg-sky-400 text-white rounded-md transition-all shadow-lg hover:shadow-sky-500/25 border border-white/10",
                title: "Add Playlist",
                children: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 4v16m8-8H4" }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 635,
                  columnNumber: 23
                }, this) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 634,
                  columnNumber: 21
                }, this)
              },
              void 0,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 629,
                columnNumber: 19
              },
              this
            )
          ] }, void 0, true, {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 612,
            columnNumber: 17
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
          lineNumber: 604,
          columnNumber: 15
        }, this)
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
        lineNumber: 591,
        columnNumber: 13
      },
      this
    ),
    /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-2 gap-4 px-8 pb-8", children: [
      showColoredFolders && folders.filter((folder) => {
        const folderKey = `${folder.playlist_id}:${folder.folder_color}`;
        if (stuckFolders.has(folderKey)) return false;
        if (activeTabId === "all") return true;
        const activeTab = tabs.find((t) => t.id === activeTabId);
        return activeTab && activeTab.playlistIds.includes(folder.playlist_id);
      }).map((folder, index) => {
        const folderColor = getFolderColorById(folder.folder_color);
        const folderImageKey = `folder-${folder.playlist_id}-${folder.folder_color}`;
        const thumbUrls = folder.first_video ? {
          max: getThumbnailUrl(folder.first_video.video_id, "max"),
          standard: getThumbnailUrl(folder.first_video.video_id, "standard")
        } : null;
        const useFallback = imageLoadErrors.has(folderImageKey);
        const activeThumbnailUrl = thumbUrls ? useFallback ? thumbUrls.standard : thumbUrls.max : null;
        return /* @__PURE__ */ jsxDEV(
          "div",
          {
            onClick: async (e) => {
              e.stopPropagation();
              try {
                const items = await getVideosInFolder(folder.playlist_id, folder.folder_color);
                setPlaylistItems(items, folder.playlist_id, { playlist_id: folder.playlist_id, folder_color: folder.folder_color });
                if (items.length > 0 && onVideoSelect) {
                  onVideoSelect(items[0].video_url);
                } else if (folder.first_video && onVideoSelect) {
                  onVideoSelect(folder.first_video.video_url);
                }
              } catch (error2) {
                console.error("Failed to load folder items:", error2);
              }
            },
            className: "cursor-pointer group relative",
            children: [
              /* @__PURE__ */ jsxDEV("div", { className: "relative aspect-video overflow-hidden rounded-lg", style: { backgroundColor: "#0f172a" }, children: [
                /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    className: "absolute left-0 top-0 bottom-0 w-2 z-10",
                    style: { backgroundColor: folderColor.hex }
                  },
                  void 0,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 689,
                    columnNumber: 25
                  },
                  this
                ),
                activeThumbnailUrl ? /* @__PURE__ */ jsxDEV(
                  "img",
                  {
                    src: activeThumbnailUrl,
                    alt: folder.first_video?.title || "Folder thumbnail",
                    className: "w-full h-full object-cover pl-2",
                    onError: () => {
                      if (!useFallback) {
                        setImageLoadErrors((prev) => new Set(prev).add(folderImageKey));
                      }
                    },
                    style: {
                      display: "block",
                      width: "100%",
                      height: "100%",
                      objectFit: "cover",
                      paddingLeft: "8px",
                      position: "relative",
                      zIndex: 1
                    }
                  },
                  void 0,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 694,
                    columnNumber: 21
                  },
                  this
                ) : /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex items-center justify-center pl-2", children: /* @__PURE__ */ jsxDEV(
                  "svg",
                  {
                    className: "w-12 h-12 text-slate-500",
                    fill: "none",
                    stroke: "currentColor",
                    viewBox: "0 0 24 24",
                    children: /* @__PURE__ */ jsxDEV(
                      "path",
                      {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        strokeWidth: 2,
                        d: "M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                      },
                      void 0,
                      false,
                      {
                        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                        lineNumber: 721,
                        columnNumber: 31
                      },
                      this
                    )
                  },
                  void 0,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 715,
                    columnNumber: 29
                  },
                  this
                ) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 714,
                  columnNumber: 21
                }, this),
                /* @__PURE__ */ jsxDEV("div", { className: "absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200 flex items-center justify-center", children: /* @__PURE__ */ jsxDEV("div", { className: "opacity-0 group-hover:opacity-100 transition-opacity", children: /* @__PURE__ */ jsxDEV(
                  "svg",
                  {
                    className: "w-16 h-16",
                    style: { color: "#052F4A" },
                    fill: "currentColor",
                    viewBox: "0 0 20 20",
                    children: /* @__PURE__ */ jsxDEV("path", { d: "M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                      lineNumber: 739,
                      columnNumber: 31
                    }, this)
                  },
                  void 0,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 733,
                    columnNumber: 29
                  },
                  this
                ) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 732,
                  columnNumber: 27
                }, this) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                  lineNumber: 731,
                  columnNumber: 25
                }, this)
              ] }, void 0, true, {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 687,
                columnNumber: 23
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "mt-2 relative", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 mb-1", children: [
                /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    className: "w-3 h-3 rounded-full flex-shrink-0",
                    style: { backgroundColor: folderColor.hex }
                  },
                  void 0,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 749,
                    columnNumber: 27
                  },
                  this
                ),
                /* @__PURE__ */ jsxDEV(
                  "h3",
                  {
                    className: "font-medium text-sm truncate transition-colors",
                    style: { color: "#052F4A" },
                    onMouseEnter: (e) => e.currentTarget.style.color = "#38bdf8",
                    onMouseLeave: (e) => e.currentTarget.style.color = "#052F4A",
                    children: [
                      folderColor.name,
                      " Folder"
                    ]
                  },
                  void 0,
                  true,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 753,
                    columnNumber: 27
                  },
                  this
                )
              ] }, void 0, true, {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 747,
                columnNumber: 25
              }, this) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 746,
                columnNumber: 23
              }, this)
            ]
          },
          `folder-${folder.playlist_id}-${folder.folder_color}-${index}`,
          true,
          {
            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
            lineNumber: 668,
            columnNumber: 17
          },
          this
        );
      }),
      (() => {
        const filteredPlaylists = playlists.filter((playlist2) => {
          if (activeTabId === "all") return true;
          const activeTab = tabs.find((t) => t.id === activeTabId);
          return activeTab && activeTab.playlistIds.includes(playlist2.id);
        });
        const items = [];
        const processedStuckFolders = /* @__PURE__ */ new Set();
        filteredPlaylists.forEach((playlist2) => {
          items.push({ type: "playlist", data: playlist2 });
          const isExpanded = expandedPlaylists.has(playlist2.id);
          const folders2 = playlistFolders[playlist2.id] || [];
          if (isExpanded && folders2.length > 0) {
            folders2.forEach((folder) => {
              const folderKey = `${folder.playlist_id}:${folder.folder_color}`;
              processedStuckFolders.add(folderKey);
              items.push({ type: "folder", data: folder, parentPlaylist: playlist2 });
            });
          }
          folders2.forEach((folder) => {
            const folderKey = `${folder.playlist_id}:${folder.folder_color}`;
            if (stuckFolders.has(folderKey) && !processedStuckFolders.has(folderKey)) {
              processedStuckFolders.add(folderKey);
              items.push({ type: "folder", data: folder, parentPlaylist: playlist2, isStuck: true });
            }
          });
        });
        if (!showColoredFolders) {
          folders.forEach((folder) => {
            const folderKey = `${folder.playlist_id}:${folder.folder_color}`;
            if (stuckFolders.has(folderKey) && !processedStuckFolders.has(folderKey)) {
              const parentPlaylist = playlists.find((p) => p.id === folder.playlist_id);
              if (parentPlaylist) {
                const isInFiltered = activeTabId === "all" || tabs.find((t) => t.id === activeTabId)?.playlistIds.includes(folder.playlist_id);
                if (isInFiltered) {
                  processedStuckFolders.add(folderKey);
                  items.push({ type: "folder", data: folder, parentPlaylist, isStuck: true });
                }
              }
            }
          });
        }
        return items.map((item, index) => {
          if (item.type === "playlist") {
            const playlist2 = item.data;
            const thumbData = playlistThumbnails[playlist2.id];
            const playlistImageKey = `playlist-${playlist2.id}`;
            const useFallback = imageLoadErrors.has(playlistImageKey);
            const activeThumbnailUrl = thumbData ? useFallback ? thumbData.standard : thumbData.max : null;
            const recentVideo = playlistRecentVideos[playlist2.id];
            const itemCount = playlistItemCounts[playlist2.id] || 0;
            const isExpanded = expandedPlaylists.has(playlist2.id);
            const folders2 = playlistFolders[playlist2.id] || [];
            const hasFolders = folders2.length > 0;
            return /* @__PURE__ */ jsxDEV(
              "div",
              {
                onClick: async (e) => {
                  if (e.target.closest('[data-card-menu="true"]')) {
                    return;
                  }
                  try {
                    const items2 = await getPlaylistItems(playlist2.id);
                    setPlaylistItems(items2, playlist2.id, null, playlist2.name);
                    if (items2.length > 0 && onVideoSelect) {
                      onVideoSelect(items2[0].video_url);
                    }
                  } catch (error2) {
                    console.error("Failed to load playlist items:", error2);
                  }
                },
                className: "cursor-pointer group relative",
                title: getInspectTitle(`Playlist: ${playlist2.name}`),
                children: /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    className: `border-2 border-slate-700/50 rounded-xl p-2 bg-slate-800/20 hover:border-sky-500/50 transition-colors h-full flex flex-col ${String(playlist2.id) === String(activePlaylistId) ? "active-playlist-marker" : ""}`,
                    "data-active-playlist": String(playlist2.id) === String(activePlaylistId) ? "true" : "false",
                    children: [
                      /* @__PURE__ */ jsxDEV("div", { className: "mb-2 flex items-center justify-between border-2 border-[#052F4A] rounded-md p-1 bg-slate-100/90 shadow-sm relative overflow-hidden h-[38px]", children: [
                        /* @__PURE__ */ jsxDEV(
                          "h3",
                          {
                            className: "font-bold text-lg truncate transition-colors pl-1 flex-1 text-left",
                            style: { color: "#052F4A" },
                            onMouseEnter: (e) => e.currentTarget.style.color = "#38bdf8",
                            onMouseLeave: (e) => e.currentTarget.style.color = "#052F4A",
                            title: playlist2.name,
                            children: playlist2.name
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 863,
                            columnNumber: 29
                          },
                          this
                        ),
                        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity absolute right-1 top-0 bottom-0 pr-1 pl-4 bg-gradient-to-l from-slate-100 via-slate-100 to-transparent", children: [
                          /* @__PURE__ */ jsxDEV(
                            "button",
                            {
                              onClick: async (e) => {
                                e.stopPropagation();
                                try {
                                  const items2 = await getPlaylistItems(playlist2.id);
                                  setPreviewPlaylist(items2, playlist2.id, null);
                                  setCurrentPage("videos");
                                  if (viewMode === "full") {
                                    setViewMode("half");
                                  }
                                } catch (error2) {
                                  console.error("Failed to load playlist items for preview:", error2);
                                }
                              },
                              className: "p-1 hover:bg-slate-200 rounded text-[#052F4A] hover:text-sky-600 transition-colors",
                              title: "Preview playlist",
                              children: /* @__PURE__ */ jsxDEV(Eye, { size: 18, strokeWidth: 2.5 }, void 0, false, {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 890,
                                columnNumber: 33
                              }, this)
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 873,
                              columnNumber: 31
                            },
                            this
                          ),
                          /* @__PURE__ */ jsxDEV(
                            "button",
                            {
                              onClick: async (e) => {
                                e.stopPropagation();
                                try {
                                  const items2 = await getPlaylistItems(playlist2.id);
                                  setPlaylistItems(items2, playlist2.id, null, playlist2.name);
                                  if (items2.length > 0 && onVideoSelect) {
                                    onVideoSelect(items2[0].video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to load playlist items:", error2);
                                }
                              },
                              onContextMenu: async (e) => {
                                e.stopPropagation();
                                e.preventDefault();
                                try {
                                  const items2 = await getPlaylistItems(playlist2.id);
                                  setPlaylistItems(items2, playlist2.id, null, playlist2.name);
                                  if (items2.length > 0 && onVideoSelect) {
                                    let targetVideo = items2[0];
                                    if (activeThumbnailUrl) {
                                      const coverMatch = items2.find((item2) => {
                                        const maxThumb = getThumbnailUrl(item2.video_id, "max");
                                        const stdThumb = getThumbnailUrl(item2.video_id, "standard");
                                        return maxThumb === activeThumbnailUrl || stdThumb === activeThumbnailUrl;
                                      });
                                      if (coverMatch) {
                                        targetVideo = coverMatch;
                                        console.log("Playing cover video:", targetVideo.title);
                                      }
                                    }
                                    onVideoSelect(targetVideo.video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to play cover video:", error2);
                                }
                              },
                              className: "p-1 hover:bg-slate-200 rounded text-[#052F4A] hover:text-sky-600 transition-colors",
                              title: "Play playlist (Right-click for cover video)",
                              children: /* @__PURE__ */ jsxDEV(Play, { size: 18, fill: "currentColor" }, void 0, false, {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 939,
                                columnNumber: 33
                              }, this)
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 892,
                              columnNumber: 31
                            },
                            this
                          ),
                          /* @__PURE__ */ jsxDEV(
                            "button",
                            {
                              onClick: async (e) => {
                                e.stopPropagation();
                                try {
                                  const items2 = await getPlaylistItems(playlist2.id);
                                  const shuffled = [...items2].sort(() => Math.random() - 0.5);
                                  setPlaylistItems(shuffled, playlist2.id, null, playlist2.name);
                                  if (shuffled.length > 0 && onVideoSelect) {
                                    onVideoSelect(shuffled[0].video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to shuffle playlist:", error2);
                                }
                              },
                              className: "p-1 hover:bg-slate-200 rounded text-[#052F4A] hover:text-sky-600 transition-colors",
                              title: "Shuffle playlist",
                              children: /* @__PURE__ */ jsxDEV(Shuffle, { size: 18 }, void 0, false, {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 959,
                                columnNumber: 33
                              }, this)
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 941,
                              columnNumber: 31
                            },
                            this
                          )
                        ] }, void 0, true, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 872,
                          columnNumber: 29
                        }, this)
                      ] }, void 0, true, {
                        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                        lineNumber: 862,
                        columnNumber: 27
                      }, this),
                      /* @__PURE__ */ jsxDEV("div", { className: "rounded-lg overflow-hidden relative group mt-auto", style: {
                        width: "100%",
                        paddingBottom: "56.25%",
                        // 16:9 aspect ratio
                        backgroundColor: "#0f172a"
                      }, children: [
                        activeThumbnailUrl ? /* @__PURE__ */ jsxDEV(
                          "img",
                          {
                            src: activeThumbnailUrl,
                            alt: playlist2.name,
                            onError: () => {
                              if (!useFallback) {
                                setImageLoadErrors((prev) => new Set(prev).add(playlistImageKey));
                              }
                            },
                            style: {
                              position: "absolute",
                              top: 0,
                              left: 0,
                              width: "100%",
                              height: "100%",
                              objectFit: "cover",
                              display: "block"
                            }
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 971,
                            columnNumber: 27
                          },
                          this
                        ) : /* @__PURE__ */ jsxDEV("div", { style: {
                          position: "absolute",
                          top: 0,
                          left: 0,
                          width: "100%",
                          height: "100%",
                          display: "flex",
                          alignItems: "center",
                          justifyContent: "center"
                        }, children: /* @__PURE__ */ jsxDEV(
                          "svg",
                          {
                            className: "w-12 h-12 text-slate-500",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: /* @__PURE__ */ jsxDEV(
                              "path",
                              {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M4 6h16M4 12h16M4 18h16"
                              },
                              void 0,
                              false,
                              {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 1006,
                                columnNumber: 35
                              },
                              this
                            )
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1e3,
                            columnNumber: 33
                          },
                          this
                        ) }, void 0, false, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 990,
                          columnNumber: 27
                        }, this),
                        /* @__PURE__ */ jsxDEV("div", { className: "absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-30", onClick: (e) => e.stopPropagation(), children: /* @__PURE__ */ jsxDEV(
                          CardMenu,
                          {
                            options: [
                              {
                                label: isExpanded ? "Collapse Folders" : "Expand Folders",
                                icon: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: isExpanded ? "M5 15l7-7 7 7" : "M19 9l-7 7-7-7" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1026,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1025,
                                  columnNumber: 33
                                }, this),
                                action: "toggleFolders"
                              },
                              {
                                label: "Export Playlist",
                                icon: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1035,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1034,
                                  columnNumber: 33
                                }, this),
                                action: "export"
                              },
                              {
                                label: "Add to Tab",
                                submenu: "tabs",
                                icon: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 6v6m0 0v6m0-6h6m-6 0H6" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1045,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1044,
                                  columnNumber: 33
                                }, this)
                              },
                              ...activeTabId !== "all" ? [{
                                label: "Remove from Tab",
                                icon: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M20 12H4" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1053,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1052,
                                  columnNumber: 33
                                }, this),
                                action: "removeFromTabCurrent",
                                danger: true
                              }] : [],
                              {
                                label: deletingPlaylistId === playlist2.id ? "Deleting..." : "Delete",
                                danger: true,
                                icon: deletingPlaylistId === playlist2.id ? /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4 animate-spin", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1064,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1063,
                                  columnNumber: 33
                                }, this) : /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1068,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1067,
                                  columnNumber: 33
                                }, this),
                                action: "delete",
                                disabled: deletingPlaylistId === playlist2.id
                              }
                            ],
                            submenuOptions: {
                              tabs: tabs.filter((tab) => tab.id !== "all").map((tab) => {
                                const isInTab = tab.playlistIds.includes(playlist2.id);
                                return {
                                  label: isInTab ? ` ${tab.name}` : tab.name,
                                  action: isInTab ? "removeFromTab" : "addToTab",
                                  tabId: tab.id
                                };
                              })
                            },
                            onOptionClick: (option) => {
                              if (option.action === "toggleFolders") {
                                togglePlaylistExpand(playlist2.id);
                              } else if (option.action === "export") {
                                handleExportPlaylist(playlist2.id, playlist2.name);
                              } else if (option.action === "removeFromTabCurrent") {
                                console.log("Removing playlist", playlist2.id, "from active tab", activeTabId);
                                removePlaylistFromTab(activeTabId, playlist2.id);
                              } else if (option.action === "delete" && !option.disabled) {
                                handleDeletePlaylist(playlist2.id, playlist2.name, { stopPropagation: () => {
                                } });
                              } else if (option.action === "addToTab") {
                                addPlaylistToTab(option.tabId, playlist2.id);
                              } else if (option.action === "removeFromTab") {
                                removePlaylistFromTab(option.tabId, playlist2.id);
                              }
                            }
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1020,
                            columnNumber: 31
                          },
                          this
                        ) }, void 0, false, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 1019,
                          columnNumber: 29
                        }, this)
                      ] }, void 0, true, {
                        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                        lineNumber: 965,
                        columnNumber: 27
                      }, this)
                    ]
                  },
                  void 0,
                  true,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 857,
                    columnNumber: 25
                  },
                  this
                )
              },
              playlist2.id,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 837,
                columnNumber: 21
              },
              this
            );
          } else {
            const folder = item.data;
            const folderColor = getFolderColorById(folder.folder_color);
            const folderImageKey = `folder-${folder.playlist_id}-${folder.folder_color}`;
            const thumbUrls = folder.first_video ? {
              max: getThumbnailUrl(folder.first_video.video_id, "max"),
              standard: getThumbnailUrl(folder.first_video.video_id, "standard")
            } : null;
            const useFallback = imageLoadErrors.has(folderImageKey);
            const activeThumbnailUrl = thumbUrls ? useFallback ? thumbUrls.standard : thumbUrls.max : null;
            const folderKey = `${folder.playlist_id}:${folder.folder_color}`;
            const isStuck2 = stuckFolders.has(folderKey);
            return /* @__PURE__ */ jsxDEV(
              "div",
              {
                onClick: async (e) => {
                  if (e.target.closest('[data-card-menu="true"]')) {
                    return;
                  }
                  try {
                    const items2 = await getPlaylistItems(folder.playlist_id);
                    const playlistTitle = item.parentPlaylist ? item.parentPlaylist.name : null;
                    setPlaylistItems(items2, folder.playlist_id, { playlist_id: folder.playlist_id, folder_color: folder.folder_color }, playlistTitle);
                    if (folder.first_video && onVideoSelect) {
                      onVideoSelect(folder.first_video.video_url);
                    }
                  } catch (error2) {
                    console.error("Failed to load folder playlist items:", error2);
                  }
                },
                className: "cursor-pointer group relative",
                title: getInspectTitle(`${folderColor.name} folder`),
                children: /* @__PURE__ */ jsxDEV(
                  "div",
                  {
                    className: `border-2 border-slate-700/50 rounded-xl p-2 bg-slate-800/20 hover:border-sky-500/50 transition-colors h-full flex flex-col ${String(playlist.id) === String(activePlaylistId) ? "active-playlist-marker" : ""}`,
                    "data-active-playlist": String(playlist.id) === String(activePlaylistId) ? "true" : "false",
                    children: [
                      /* @__PURE__ */ jsxDEV("div", { className: "mb-2 relative border-2 border-[#052F4A] rounded-md p-1 bg-slate-100/90 shadow-sm flex items-center justify-between h-[38px] overflow-hidden", children: [
                        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 justify-center pl-1", children: [
                          /* @__PURE__ */ jsxDEV(
                            "div",
                            {
                              className: "w-3 h-3 rounded-full flex-shrink-0",
                              style: { backgroundColor: folderColor.hex }
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 1157,
                              columnNumber: 31
                            },
                            this
                          ),
                          /* @__PURE__ */ jsxDEV(
                            "h3",
                            {
                              className: "font-medium text-sm truncate transition-colors pr-8",
                              style: { color: "#052F4A" },
                              onMouseEnter: (e) => e.currentTarget.style.color = "#38bdf8",
                              onMouseLeave: (e) => e.currentTarget.style.color = "#052F4A",
                              children: [
                                folderColor.name,
                                " Folder"
                              ]
                            },
                            void 0,
                            true,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 1161,
                              columnNumber: 31
                            },
                            this
                          )
                        ] }, void 0, true, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 1155,
                          columnNumber: 29
                        }, this),
                        /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity absolute right-1 top-0 bottom-0 pr-1 pl-4 bg-gradient-to-l from-slate-100 via-slate-100 to-transparent", children: [
                          /* @__PURE__ */ jsxDEV(
                            "button",
                            {
                              onClick: async (e) => {
                                e.stopPropagation();
                                try {
                                  const items2 = await getVideosInFolder(folder.playlist_id, folder.folder_color);
                                  const playlistTitle = item.parentPlaylist ? item.parentPlaylist.name : null;
                                  setPlaylistItems(items2, folder.playlist_id, { playlist_id: folder.playlist_id, folder_color: folder.folder_color }, playlistTitle);
                                  if (items2.length > 0 && onVideoSelect) {
                                    onVideoSelect(items2[0].video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to load folder playlist items:", error2);
                                }
                              },
                              onContextMenu: async (e) => {
                                e.stopPropagation();
                                e.preventDefault();
                                try {
                                  const items2 = await getVideosInFolder(folder.playlist_id, folder.folder_color);
                                  const playlistTitle = item.parentPlaylist ? item.parentPlaylist.name : null;
                                  setPlaylistItems(items2, folder.playlist_id, { playlist_id: folder.playlist_id, folder_color: folder.folder_color }, playlistTitle);
                                  if (items2.length > 0 && onVideoSelect) {
                                    let targetVideo = items2[0];
                                    if (activeThumbnailUrl) {
                                      const coverMatch = items2.find((v) => {
                                        const maxThumb = getThumbnailUrl(v.video_id, "max");
                                        const stdThumb = getThumbnailUrl(v.video_id, "standard");
                                        return maxThumb === activeThumbnailUrl || stdThumb === activeThumbnailUrl;
                                      });
                                      if (coverMatch) targetVideo = coverMatch;
                                    }
                                    onVideoSelect(targetVideo.video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to play folder cover:", error2);
                                }
                              },
                              className: "p-1 hover:bg-slate-200 rounded text-[#052F4A] hover:text-sky-600 transition-colors",
                              title: "Play folder (Right-click for cover video)",
                              children: /* @__PURE__ */ jsxDEV(Play, { size: 18, fill: "currentColor" }, void 0, false, {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 1214,
                                columnNumber: 33
                              }, this)
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 1171,
                              columnNumber: 31
                            },
                            this
                          ),
                          /* @__PURE__ */ jsxDEV(
                            "button",
                            {
                              onClick: async (e) => {
                                e.stopPropagation();
                                try {
                                  const items2 = await getVideosInFolder(folder.playlist_id, folder.folder_color);
                                  const shuffled = [...items2].sort(() => Math.random() - 0.5);
                                  const playlistTitle = item.parentPlaylist ? item.parentPlaylist.name : null;
                                  setPlaylistItems(shuffled, folder.playlist_id, { playlist_id: folder.playlist_id, folder_color: folder.folder_color }, playlistTitle);
                                  if (shuffled.length > 0 && onVideoSelect) {
                                    onVideoSelect(shuffled[0].video_url);
                                  }
                                } catch (error2) {
                                  console.error("Failed to shuffle folder:", error2);
                                }
                              },
                              className: "p-1 hover:bg-slate-200 rounded text-[#052F4A] hover:text-sky-600 transition-colors",
                              title: "Shuffle folder",
                              children: /* @__PURE__ */ jsxDEV(Shuffle, { size: 18 }, void 0, false, {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 1237,
                                columnNumber: 33
                              }, this)
                            },
                            void 0,
                            false,
                            {
                              fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                              lineNumber: 1216,
                              columnNumber: 31
                            },
                            this
                          )
                        ] }, void 0, true, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 1170,
                          columnNumber: 29
                        }, this)
                      ] }, void 0, true, {
                        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                        lineNumber: 1154,
                        columnNumber: 27
                      }, this),
                      /* @__PURE__ */ jsxDEV("div", { className: "rounded-lg overflow-hidden relative group mt-auto", style: {
                        width: "100%",
                        paddingBottom: "56.25%",
                        // 16:9 aspect ratio
                        backgroundColor: "#0f172a",
                        overflow: "hidden"
                      }, children: [
                        /* @__PURE__ */ jsxDEV(
                          "div",
                          {
                            className: "absolute left-0 top-0 bottom-0 w-2 z-10",
                            style: { backgroundColor: folderColor.hex }
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1252,
                            columnNumber: 29
                          },
                          this
                        ),
                        activeThumbnailUrl ? /* @__PURE__ */ jsxDEV(
                          "img",
                          {
                            src: activeThumbnailUrl,
                            alt: folder.first_video?.title || "Folder thumbnail",
                            onError: () => {
                              if (!useFallback) {
                                setImageLoadErrors((prev) => new Set(prev).add(folderImageKey));
                              }
                            },
                            style: {
                              position: "absolute",
                              top: 0,
                              left: 0,
                              width: "100%",
                              height: "100%",
                              objectFit: "cover",
                              display: "block",
                              paddingLeft: "8px"
                            }
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1257,
                            columnNumber: 27
                          },
                          this
                        ) : /* @__PURE__ */ jsxDEV("div", { style: {
                          position: "absolute",
                          top: 0,
                          left: 0,
                          width: "100%",
                          height: "100%",
                          display: "flex",
                          alignItems: "center",
                          justifyContent: "center",
                          paddingLeft: "8px"
                        }, children: /* @__PURE__ */ jsxDEV(
                          "svg",
                          {
                            className: "w-12 h-12 text-slate-500",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: /* @__PURE__ */ jsxDEV(
                              "path",
                              {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                              },
                              void 0,
                              false,
                              {
                                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                lineNumber: 1294,
                                columnNumber: 35
                              },
                              this
                            )
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1288,
                            columnNumber: 33
                          },
                          this
                        ) }, void 0, false, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 1277,
                          columnNumber: 27
                        }, this),
                        /* @__PURE__ */ jsxDEV("div", { className: "absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-20", children: /* @__PURE__ */ jsxDEV(
                          CardMenu,
                          {
                            options: [
                              {
                                label: isStuck2 ? "Unstick Folder" : "Stick Folder",
                                icon: isStuck2 ? /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M5 13l4 4L19 7" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1312,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1311,
                                  columnNumber: 33
                                }, this) : /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1316,
                                  columnNumber: 41
                                }, this) }, void 0, false, {
                                  fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                                  lineNumber: 1315,
                                  columnNumber: 33
                                }, this),
                                action: "toggleStick"
                              }
                            ],
                            onOptionClick: async (option) => {
                              if (option.action === "toggleStick") {
                                try {
                                  const newStuckStatus = await toggleStuckFolder(folder.playlist_id, folder.folder_color);
                                  const folderKey2 = `${folder.playlist_id}:${folder.folder_color}`;
                                  setStuckFolders((prev) => {
                                    const next = new Set(prev);
                                    if (newStuckStatus) {
                                      next.add(folderKey2);
                                    } else {
                                      next.delete(folderKey2);
                                    }
                                    return next;
                                  });
                                } catch (error2) {
                                  console.error("Failed to toggle stick folder:", error2);
                                }
                              }
                            }
                          },
                          void 0,
                          false,
                          {
                            fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                            lineNumber: 1306,
                            columnNumber: 31
                          },
                          this
                        ) }, void 0, false, {
                          fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                          lineNumber: 1305,
                          columnNumber: 29
                        }, this)
                      ] }, void 0, true, {
                        fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                        lineNumber: 1245,
                        columnNumber: 27
                      }, this)
                    ]
                  },
                  void 0,
                  true,
                  {
                    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                    lineNumber: 1149,
                    columnNumber: 25
                  },
                  this
                )
              },
              `${folder.playlist_id}-${folder.folder_color}-${index}`,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
                lineNumber: 1127,
                columnNumber: 21
              },
              this
            );
          }
        });
      })()
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
      lineNumber: 644,
      columnNumber: 13
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 546,
    columnNumber: 11
  }, this) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 542,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PlaylistsPage.jsx",
    lineNumber: 477,
    columnNumber: 5
  }, this);
};
_s(PlaylistsPage, "E3XUiMNO1JgvEtGXo1bsxJXKYYs=", false, function() {
  return [usePlaylistStore, useFolderStore, useTabStore, useTabPresetStore, useLayoutStore, useConfigStore, useNavigationStore];
});
_c = PlaylistsPage;
export default PlaylistsPage;
var _c;
$RefreshReg$(_c, "PlaylistsPage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/PlaylistsPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/PlaylistsPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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LCJ1c2VSZWYiLCJjcmVhdGVQbGF5bGlzdCIsImdldEFsbFBsYXlsaXN0cyIsImdldFBsYXlsaXN0SXRlbXMiLCJkZWxldGVQbGF5bGlzdCIsImRlbGV0ZVBsYXlsaXN0QnlOYW1lIiwiZ2V0QWxsRm9sZGVyc1dpdGhWaWRlb3MiLCJleHBvcnRQbGF5bGlzdCIsImdldEZvbGRlcnNGb3JQbGF5bGlzdCIsInRvZ2dsZVN0dWNrRm9sZGVyIiwiZ2V0QWxsU3R1Y2tGb2xkZXJzIiwiZ2V0VmlkZW9zSW5Gb2xkZXIiLCJnZXRBbGxWaWRlb1Byb2dyZXNzIiwiZ2V0QWxsUGxheWxpc3RNZXRhZGF0YSIsImdldFRodW1ibmFpbFVybCIsInVzZVBsYXlsaXN0U3RvcmUiLCJFeWUiLCJQbGF5IiwiU2h1ZmZsZSIsInVzZUZvbGRlclN0b3JlIiwidXNlVGFiU3RvcmUiLCJ1c2VUYWJQcmVzZXRTdG9yZSIsInVzZUxheW91dFN0b3JlIiwidXNlTmF2aWdhdGlvblN0b3JlIiwiZ2V0Rm9sZGVyQ29sb3JCeUlkIiwidXNlSW5zcGVjdExhYmVsIiwiUGxheWxpc3RVcGxvYWRlciIsIkJ1bGtQbGF5bGlzdEltcG9ydGVyIiwiTG9jYWxWaWRlb1VwbG9hZGVyIiwiQ2FyZE1lbnUiLCJUYWJCYXIiLCJDYXJkVGh1bWJuYWlsIiwiUGFnZUJhbm5lciIsInVzZUNvbmZpZ1N0b3JlIiwiVGFiUHJlc2V0c0Ryb3Bkb3duIiwiQWRkUGxheWxpc3RUb1RhYk1vZGFsIiwiVW5pZmllZEJhbm5lckJhY2tncm91bmQiLCJQbGF5bGlzdENhcmRTa2VsZXRvbiIsIlBsYXlsaXN0c1BhZ2UiLCJvblZpZGVvU2VsZWN0IiwiX3MiLCJwbGF5bGlzdHMiLCJzZXRQbGF5bGlzdHMiLCJwbGF5bGlzdFRodW1ibmFpbHMiLCJzZXRQbGF5bGlzdFRodW1ibmFpbHMiLCJwbGF5bGlzdFJlY2VudFZpZGVvcyIsInNldFBsYXlsaXN0UmVjZW50VmlkZW9zIiwicGxheWxpc3RJdGVtQ291bnRzIiwic2V0UGxheWxpc3RJdGVtQ291bnRzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic2hvd1VwbG9hZGVyIiwic2V0U2hvd1VwbG9hZGVyIiwic2hvd0J1bGtJbXBvcnRlciIsInNldFNob3dCdWxrSW1wb3J0ZXIiLCJzaG93TG9jYWxWaWRlb1VwbG9hZGVyIiwic2V0U2hvd0xvY2FsVmlkZW9VcGxvYWRlciIsInNlbGVjdGVkUGxheWxpc3RGb3JMb2NhbFVwbG9hZCIsInNldFNlbGVjdGVkUGxheWxpc3RGb3JMb2NhbFVwbG9hZCIsInNob3dQbGF5bGlzdFNlbGVjdG9yIiwic2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IiLCJkZWxldGluZ1BsYXlsaXN0SWQiLCJzZXREZWxldGluZ1BsYXlsaXN0SWQiLCJmb2xkZXJzIiwic2V0Rm9sZGVycyIsImV4cGFuZGVkUGxheWxpc3RzIiwic2V0RXhwYW5kZWRQbGF5bGlzdHMiLCJTZXQiLCJwbGF5bGlzdEZvbGRlcnMiLCJzZXRQbGF5bGlzdEZvbGRlcnMiLCJzdHVja0ZvbGRlcnMiLCJzZXRTdHVja0ZvbGRlcnMiLCJzZXRQbGF5bGlzdEl0ZW1zIiwiY3VycmVudFBsYXlsaXN0SXRlbXMiLCJzZXRDdXJyZW50Rm9sZGVyIiwic2V0UHJldmlld1BsYXlsaXN0Iiwic2V0QWxsUGxheWxpc3RzIiwiYWN0aXZlUGxheWxpc3RJZCIsInNob3dDb2xvcmVkRm9sZGVycyIsInNldFNob3dDb2xvcmVkRm9sZGVycyIsImltYWdlTG9hZEVycm9ycyIsInNldEltYWdlTG9hZEVycm9ycyIsInRhYnMiLCJhY3RpdmVUYWJJZCIsImFkZFBsYXlsaXN0VG9UYWIiLCJyZW1vdmVQbGF5bGlzdEZyb21UYWIiLCJhY3RpdmVQcmVzZXRJZCIsInByZXNldHMiLCJzZXRWaWV3TW9kZSIsInZpZXdNb2RlIiwiaW5zcGVjdE1vZGUiLCJjdXN0b21QYWdlQmFubmVySW1hZ2UiLCJiYW5uZXJIZWlnaHQiLCJiYW5uZXJCZ1NpemUiLCJzZXRDdXJyZW50UGFnZSIsImdldEluc3BlY3RUaXRsZSIsImxhYmVsIiwidW5kZWZpbmVkIiwiaGFzRGVsZXRlZFRlc3RQbGF5bGlzdCIsImlzU3R1Y2siLCJzZXRJc1N0dWNrIiwic3RpY2t5U2VudGluZWxSZWYiLCJzY3JvbGxDb250YWluZXJSZWYiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cnkiLCJpbnRlcnNlY3Rpb25SYXRpbyIsImJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsInRocmVzaG9sZCIsInJvb3RNYXJnaW4iLCJjdXJyZW50Iiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJsb2FkUGxheWxpc3RzIiwibG9hZFN0dWNrRm9sZGVycyIsInN0dWNrIiwic3R1Y2tTZXQiLCJtYXAiLCJwbGF5bGlzdElkIiwiZm9sZGVyQ29sb3IiLCJjb25zb2xlIiwibG9hZEZvbGRlcnMiLCJsb2ciLCJidWxrIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiY2xlYW51cFRlc3RQbGF5bGlzdCIsInJlc3VsdCIsImRhdGEiLCJtZXRhZGF0YUxpc3QiLCJhbGxQcm9ncmVzcyIsIlByb21pc2UiLCJhbGwiLCJjYXRjaCIsImUiLCJwcm9ncmVzc01hcCIsIk1hcCIsImZvckVhY2giLCJwIiwidmlkZW9faWQiLCJsYXN0X3VwZGF0ZWQiLCJzZXQiLCJ0aHVtYm5haWxNYXAiLCJyZWNlbnRWaWRlb01hcCIsIml0ZW1Db3VudE1hcCIsIm1ldGFkYXRhTWFwIiwibSIsInBsYXlsaXN0X2lkIiwiYWxsRm9sZGVycyIsInBGb2xkZXJzIiwiZiIsInB1c2giLCJ3YXJuIiwicGxheWxpc3QiLCJtZXRhIiwiZ2V0IiwiaWQiLCJjb3VudCIsImN1c3RvbV90aHVtYm5haWxfdXJsIiwibWF4Iiwic3RhbmRhcmQiLCJmaXJzdF92aWRlbyIsInZpZCIsInRodW1ibmFpbF91cmwiLCJyZWNlbnRfdmlkZW8iLCJtZXNzYWdlIiwiXyIsImkiLCJjb2xvciIsImhhbmRsZVVwbG9hZENvbXBsZXRlIiwiaGFuZGxlQnVsa0ltcG9ydENvbXBsZXRlIiwiaGFuZGxlTG9jYWxWaWRlb1VwbG9hZENvbXBsZXRlIiwiaGFuZGxlT3BlbkxvY2FsVmlkZW9VcGxvYWRlciIsImFsZXJ0IiwiaGFuZGxlUGxheWxpc3RTZWxlY3RlZCIsImhhbmRsZURlbGV0ZVBsYXlsaXN0IiwicGxheWxpc3ROYW1lIiwic3RvcFByb3BhZ2F0aW9uIiwiY29uZmlybWVkIiwid2luZG93IiwiY29uZmlybSIsImRlbGV0ZUVycm9yIiwiZXJyb3JNZXNzYWdlIiwidG9TdHJpbmciLCJuYW1lIiwiaW5jbHVkZXMiLCJoYW5kbGVFeHBvcnRQbGF5bGlzdCIsImV4cG9ydERhdGEiLCJqc29uU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsImJsb2IiLCJCbG9iIiwidHlwZSIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJyZXBsYWNlIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsInJldm9rZU9iamVjdFVSTCIsInRvZ2dsZVBsYXlsaXN0RXhwYW5kIiwiaXNFeHBhbmRlZCIsImhhcyIsInByZXYiLCJuZXdTZXQiLCJkZWxldGUiLCJhZGQiLCJmb2xkZXJBcnJheSIsImN1cnJlbnRUYXJnZXQiLCJzdHlsZSIsImRlc2NyaXB0aW9uIiwiYWN0aXZlUHJlc2V0IiwiZmluZCIsImJhbm5lclRpdGxlIiwiYWN0aXZlVGFiIiwidCIsImZpbHRlcmVkUGxheWxpc3RzIiwiZmlsdGVyIiwicGxheWxpc3RJZHMiLCJwbGF5bGlzdENvdW50IiwidG90YWxWaWRlb3MiLCJyZWR1Y2UiLCJzdW0iLCJiYWNrZ3JvdW5kQ29sb3IiLCJzZXRTaG93SW1wb3J0TW9kYWwiLCJmb2xkZXIiLCJmb2xkZXJLZXkiLCJmb2xkZXJfY29sb3IiLCJpbmRleCIsImZvbGRlckltYWdlS2V5IiwidGh1bWJVcmxzIiwidXNlRmFsbGJhY2siLCJhY3RpdmVUaHVtYm5haWxVcmwiLCJpdGVtcyIsInZpZGVvX3VybCIsImhleCIsInRpdGxlIiwiZGlzcGxheSIsIndpZHRoIiwiaGVpZ2h0Iiwib2JqZWN0Rml0IiwicGFkZGluZ0xlZnQiLCJwb3NpdGlvbiIsInpJbmRleCIsInByb2Nlc3NlZFN0dWNrRm9sZGVycyIsInBhcmVudFBsYXlsaXN0IiwiaXNJbkZpbHRlcmVkIiwiaXRlbSIsInRodW1iRGF0YSIsInBsYXlsaXN0SW1hZ2VLZXkiLCJyZWNlbnRWaWRlbyIsIml0ZW1Db3VudCIsImhhc0ZvbGRlcnMiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiU3RyaW5nIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXRWaWRlbyIsImNvdmVyTWF0Y2giLCJtYXhUaHVtYiIsInN0ZFRodW1iIiwic2h1ZmZsZWQiLCJzb3J0IiwiTWF0aCIsInJhbmRvbSIsInBhZGRpbmdCb3R0b20iLCJsZWZ0IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiaWNvbiIsImFjdGlvbiIsInN1Ym1lbnUiLCJkYW5nZXIiLCJkaXNhYmxlZCIsInRhYiIsImlzSW5UYWIiLCJ0YWJJZCIsIm9wdGlvbiIsInBsYXlsaXN0VGl0bGUiLCJ2Iiwib3ZlcmZsb3ciLCJuZXdTdHVja1N0YXR1cyIsIm5leHQiLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJQbGF5bGlzdHNQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjcmVhdGVQbGF5bGlzdCwgZ2V0QWxsUGxheWxpc3RzLCBnZXRQbGF5bGlzdEl0ZW1zLCBkZWxldGVQbGF5bGlzdCwgZGVsZXRlUGxheWxpc3RCeU5hbWUsIGdldEFsbEZvbGRlcnNXaXRoVmlkZW9zLCBleHBvcnRQbGF5bGlzdCwgZ2V0Rm9sZGVyc0ZvclBsYXlsaXN0LCB0b2dnbGVTdHVja0ZvbGRlciwgZ2V0QWxsU3R1Y2tGb2xkZXJzLCBnZXRWaWRlb3NJbkZvbGRlciwgZ2V0QWxsVmlkZW9Qcm9ncmVzcywgZ2V0QWxsUGxheWxpc3RNZXRhZGF0YSB9IGZyb20gJy4uL2FwaS9wbGF5bGlzdEFwaSc7XHJcbmltcG9ydCB7IGdldFRodW1ibmFpbFVybCB9IGZyb20gJy4uL3V0aWxzL3lvdXR1YmVVdGlscyc7XHJcbmltcG9ydCB7IHVzZVBsYXlsaXN0U3RvcmUgfSBmcm9tICcuLi9zdG9yZS9wbGF5bGlzdFN0b3JlJztcclxuaW1wb3J0IHsgRXllLCBQbGF5LCBTaHVmZmxlIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgdXNlRm9sZGVyU3RvcmUgfSBmcm9tICcuLi9zdG9yZS9mb2xkZXJTdG9yZSc7XHJcbmltcG9ydCB7IHVzZVRhYlN0b3JlIH0gZnJvbSAnLi4vc3RvcmUvdGFiU3RvcmUnO1xyXG5pbXBvcnQgeyB1c2VUYWJQcmVzZXRTdG9yZSB9IGZyb20gJy4uL3N0b3JlL3RhYlByZXNldFN0b3JlJztcclxuaW1wb3J0IHsgdXNlTGF5b3V0U3RvcmUgfSBmcm9tICcuLi9zdG9yZS9sYXlvdXRTdG9yZSc7XHJcbmltcG9ydCB7IHVzZU5hdmlnYXRpb25TdG9yZSB9IGZyb20gJy4uL3N0b3JlL25hdmlnYXRpb25TdG9yZSc7XHJcbmltcG9ydCB7IGdldEZvbGRlckNvbG9yQnlJZCB9IGZyb20gJy4uL3V0aWxzL2ZvbGRlckNvbG9ycyc7XHJcbmltcG9ydCB7IHVzZUluc3BlY3RMYWJlbCB9IGZyb20gJy4uL3V0aWxzL2luc3BlY3RMYWJlbHMnO1xyXG5pbXBvcnQgUGxheWxpc3RVcGxvYWRlciBmcm9tICcuL1BsYXlsaXN0VXBsb2FkZXInO1xyXG5pbXBvcnQgQnVsa1BsYXlsaXN0SW1wb3J0ZXIgZnJvbSAnLi9CdWxrUGxheWxpc3RJbXBvcnRlcic7XHJcbmltcG9ydCBMb2NhbFZpZGVvVXBsb2FkZXIgZnJvbSAnLi9Mb2NhbFZpZGVvVXBsb2FkZXInO1xyXG5pbXBvcnQgQ2FyZE1lbnUgZnJvbSAnLi9OZXdDYXJkTWVudSc7IC8vIFVzaW5nIE5ld0NhcmRNZW51IGFzIENhcmRNZW51XHJcbmltcG9ydCBUYWJCYXIgZnJvbSAnLi9UYWJCYXInO1xyXG5pbXBvcnQgQ2FyZFRodW1ibmFpbCBmcm9tICcuL0NhcmRUaHVtYm5haWwnO1xyXG5pbXBvcnQgUGFnZUJhbm5lciBmcm9tICcuL1BhZ2VCYW5uZXInO1xyXG5pbXBvcnQgeyB1c2VDb25maWdTdG9yZSB9IGZyb20gJy4uL3N0b3JlL2NvbmZpZ1N0b3JlJztcclxuaW1wb3J0IFRhYlByZXNldHNEcm9wZG93biBmcm9tICcuL1RhYlByZXNldHNEcm9wZG93bic7XHJcbmltcG9ydCBBZGRQbGF5bGlzdFRvVGFiTW9kYWwgZnJvbSAnLi9BZGRQbGF5bGlzdFRvVGFiTW9kYWwnO1xyXG5pbXBvcnQgVW5pZmllZEJhbm5lckJhY2tncm91bmQgZnJvbSAnLi9VbmlmaWVkQmFubmVyQmFja2dyb3VuZCc7XHJcbmltcG9ydCBQbGF5bGlzdENhcmRTa2VsZXRvbiBmcm9tICcuL3NrZWxldG9ucy9QbGF5bGlzdENhcmRTa2VsZXRvbic7XHJcblxyXG5jb25zdCBQbGF5bGlzdHNQYWdlID0gKHsgb25WaWRlb1NlbGVjdCB9KSA9PiB7XHJcbiAgY29uc3QgW3BsYXlsaXN0cywgc2V0UGxheWxpc3RzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbcGxheWxpc3RUaHVtYm5haWxzLCBzZXRQbGF5bGlzdFRodW1ibmFpbHNdID0gdXNlU3RhdGUoe30pO1xyXG4gIGNvbnN0IFtwbGF5bGlzdFJlY2VudFZpZGVvcywgc2V0UGxheWxpc3RSZWNlbnRWaWRlb3NdID0gdXNlU3RhdGUoe30pO1xyXG4gIGNvbnN0IFtwbGF5bGlzdEl0ZW1Db3VudHMsIHNldFBsYXlsaXN0SXRlbUNvdW50c10gPSB1c2VTdGF0ZSh7fSk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbc2hvd1VwbG9hZGVyLCBzZXRTaG93VXBsb2FkZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzaG93QnVsa0ltcG9ydGVyLCBzZXRTaG93QnVsa0ltcG9ydGVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc2hvd0xvY2FsVmlkZW9VcGxvYWRlciwgc2V0U2hvd0xvY2FsVmlkZW9VcGxvYWRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3NlbGVjdGVkUGxheWxpc3RGb3JMb2NhbFVwbG9hZCwgc2V0U2VsZWN0ZWRQbGF5bGlzdEZvckxvY2FsVXBsb2FkXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtzaG93UGxheWxpc3RTZWxlY3Rvciwgc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3JdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtkZWxldGluZ1BsYXlsaXN0SWQsIHNldERlbGV0aW5nUGxheWxpc3RJZF0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZm9sZGVycywgc2V0Rm9sZGVyc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2V4cGFuZGVkUGxheWxpc3RzLCBzZXRFeHBhbmRlZFBsYXlsaXN0c10gPSB1c2VTdGF0ZShuZXcgU2V0KCkpOyAvLyBUcmFjayB3aGljaCBwbGF5bGlzdHMgYXJlIGV4cGFuZGVkXHJcbiAgY29uc3QgW3BsYXlsaXN0Rm9sZGVycywgc2V0UGxheWxpc3RGb2xkZXJzXSA9IHVzZVN0YXRlKHt9KTsgLy8gU3RvcmUgZm9sZGVycyBmb3IgZWFjaCBwbGF5bGlzdDogeyBwbGF5bGlzdElkOiBbZm9sZGVyc10gfVxyXG4gIGNvbnN0IFtzdHVja0ZvbGRlcnMsIHNldFN0dWNrRm9sZGVyc10gPSB1c2VTdGF0ZShuZXcgU2V0KCkpOyAvLyBUcmFjayBzdHVjayBmb2xkZXJzOiBTZXQgb2YgXCJwbGF5bGlzdElkOmZvbGRlckNvbG9yXCIgc3RyaW5nc1xyXG4gIGNvbnN0IHsgc2V0UGxheWxpc3RJdGVtcywgY3VycmVudFBsYXlsaXN0SXRlbXMsIHNldEN1cnJlbnRGb2xkZXIsIHNldFByZXZpZXdQbGF5bGlzdCwgc2V0QWxsUGxheWxpc3RzLCBhY3RpdmVQbGF5bGlzdElkIH0gPSB1c2VQbGF5bGlzdFN0b3JlKCk7XHJcbiAgY29uc3QgeyBzaG93Q29sb3JlZEZvbGRlcnMsIHNldFNob3dDb2xvcmVkRm9sZGVycyB9ID0gdXNlRm9sZGVyU3RvcmUoKTtcclxuICBjb25zdCBbaW1hZ2VMb2FkRXJyb3JzLCBzZXRJbWFnZUxvYWRFcnJvcnNdID0gdXNlU3RhdGUobmV3IFNldCgpKTtcclxuICBjb25zdCB7IHRhYnMsIGFjdGl2ZVRhYklkLCBhZGRQbGF5bGlzdFRvVGFiLCByZW1vdmVQbGF5bGlzdEZyb21UYWIgfSA9IHVzZVRhYlN0b3JlKCk7XHJcbiAgY29uc3QgeyBhY3RpdmVQcmVzZXRJZCwgcHJlc2V0cyB9ID0gdXNlVGFiUHJlc2V0U3RvcmUoKTtcclxuICBjb25zdCB7IHNldFZpZXdNb2RlLCB2aWV3TW9kZSwgaW5zcGVjdE1vZGUgfSA9IHVzZUxheW91dFN0b3JlKCk7XHJcbiAgY29uc3QgeyBjdXN0b21QYWdlQmFubmVySW1hZ2UsIGJhbm5lckhlaWdodCwgYmFubmVyQmdTaXplIH0gPSB1c2VDb25maWdTdG9yZSgpO1xyXG4gIGNvbnN0IHsgc2V0Q3VycmVudFBhZ2UgfSA9IHVzZU5hdmlnYXRpb25TdG9yZSgpO1xyXG5cclxuXHJcblxyXG4gIC8vIEhlbHBlciB0byBnZXQgaW5zcGVjdCBsYWJlbFxyXG4gIGNvbnN0IGdldEluc3BlY3RUaXRsZSA9IChsYWJlbCkgPT4gaW5zcGVjdE1vZGUgPyBsYWJlbCA6IHVuZGVmaW5lZDtcclxuICBjb25zdCBoYXNEZWxldGVkVGVzdFBsYXlsaXN0ID0gdXNlUmVmKGZhbHNlKTtcclxuXHJcbiAgLy8gU3RpY2t5IGhlYWRlciBzdGF0ZSBkZXRlY3Rpb25cclxuICBjb25zdCBbaXNTdHVjaywgc2V0SXNTdHVja10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3Qgc3RpY2t5U2VudGluZWxSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICAgIChbZW50cnldKSA9PiB7XHJcbiAgICAgICAgc2V0SXNTdHVjayhlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA8IDEgJiYgZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LnRvcCA8IDApO1xyXG4gICAgICB9LFxyXG4gICAgICB7IHRocmVzaG9sZDogWzFdLCByb290TWFyZ2luOiAnLTFweCAwcHggMHB4IDBweCcgfVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoc3RpY2t5U2VudGluZWxSZWYuY3VycmVudCkge1xyXG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHN0aWNreVNlbnRpbmVsUmVmLmN1cnJlbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsb2FkUGxheWxpc3RzKCk7XHJcbiAgICBsb2FkU3R1Y2tGb2xkZXJzKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBsb2FkU3R1Y2tGb2xkZXJzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3R1Y2sgPSBhd2FpdCBnZXRBbGxTdHVja0ZvbGRlcnMoKTtcclxuICAgICAgY29uc3Qgc3R1Y2tTZXQgPSBuZXcgU2V0KHN0dWNrLm1hcCgoW3BsYXlsaXN0SWQsIGZvbGRlckNvbG9yXSkgPT4gYCR7cGxheWxpc3RJZH06JHtmb2xkZXJDb2xvcn1gKSk7XHJcbiAgICAgIHNldFN0dWNrRm9sZGVycyhzdHVja1NldCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBzdHVjayBmb2xkZXJzOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHNob3dDb2xvcmVkRm9sZGVycykge1xyXG4gICAgICBsb2FkRm9sZGVycygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRXZlbiB3aGVuIHRvZ2dsZWQgb2ZmLCB3ZSBuZWVkIGZvbGRlciBkYXRhIGZvciBzdHVjayBmb2xkZXJzXHJcbiAgICAgIGxvYWRGb2xkZXJzKCk7XHJcbiAgICB9XHJcbiAgICAvLyBSZWxvYWQgc3R1Y2sgZm9sZGVycyB3aGVuIHRvZ2dsaW5nIHRvIGVuc3VyZSB3ZSBoYXZlIGZvbGRlciBkYXRhXHJcbiAgICBsb2FkU3R1Y2tGb2xkZXJzKCk7XHJcbiAgfSwgW3Nob3dDb2xvcmVkRm9sZGVyc10pO1xyXG5cclxuICBjb25zdCBsb2FkRm9sZGVycyA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIHNwZWNpZmljIGZvbGRlcnMgdmlhIG9wdGltaXplZCBiYXRjaCBmZXRjaC4uLicpO1xyXG5cclxuICAgICAgLy8gVXNlIHRoZSBiYXRjaCBjb21tYW5kIHRvIGdldCBhbGwgZm9sZGVycyBhdCBvbmNlXHJcbiAgICAgIGNvbnN0IGJ1bGsgPSBhd2FpdCBnZXRBbGxGb2xkZXJzV2l0aFZpZGVvcygpO1xyXG5cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYnVsaykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGVkIGZvbGRlcnMgKGJhdGNoKTonLCBidWxrLmxlbmd0aCk7XHJcbiAgICAgICAgc2V0Rm9sZGVycyhidWxrKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRGb2xkZXJzKFtdKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZm9sZGVyczonLCBlcnJvcik7XHJcbiAgICAgIHNldEZvbGRlcnMoW10pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE9uZS10aW1lIGNsZWFudXA6IERlbGV0ZSBcIlRlc3QgUGxheWxpc3RcIiBpZiBpdCBleGlzdHNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgY2xlYW51cFRlc3RQbGF5bGlzdCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKGhhc0RlbGV0ZWRUZXN0UGxheWxpc3QuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICBoYXNEZWxldGVkVGVzdFBsYXlsaXN0LmN1cnJlbnQgPSB0cnVlO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZWxldGVQbGF5bGlzdEJ5TmFtZSgnVGVzdCBQbGF5bGlzdCcpO1xyXG4gICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgZGVsZXRlZCBcIlRlc3QgUGxheWxpc3RcIicpO1xyXG4gICAgICAgICAgLy8gUmVsb2FkIHBsYXlsaXN0cyBhZnRlciBkZWxldGlvblxyXG4gICAgICAgICAgYXdhaXQgbG9hZFBsYXlsaXN0cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBUZXN0IFBsYXlsaXN0OicsIGVycm9yKTtcclxuICAgICAgICAvLyBEb24ndCBzaG93IGVycm9yIHRvIHVzZXIsIGp1c3QgbG9nIGl0XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY2xlYW51cFRlc3RQbGF5bGlzdCgpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgbG9hZFBsYXlsaXN0cyA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHNldEVycm9yKG51bGwpO1xyXG4gICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBwbGF5bGlzdHMgZnJvbSBkYXRhYmFzZS4uLicpO1xyXG5cclxuICAgICAgLy8gTG9hZCBwbGF5bGlzdHMsIG1ldGFkYXRhLCBhbmQgdmlkZW8gcHJvZ3Jlc3MgaW4gcGFyYWxsZWxcclxuICAgICAgY29uc3QgW2RhdGEsIG1ldGFkYXRhTGlzdCwgYWxsUHJvZ3Jlc3NdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGdldEFsbFBsYXlsaXN0cygpLFxyXG4gICAgICAgIGdldEFsbFBsYXlsaXN0TWV0YWRhdGEoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBtZXRhZGF0YVwiLCBlKTtcclxuICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9KSxcclxuICAgICAgICBnZXRBbGxWaWRlb1Byb2dyZXNzKCkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgdmlkZW8gcHJvZ3Jlc3NcIiwgZSk7XHJcbiAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfSlcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnTG9hZGVkIHBsYXlsaXN0czonLCBkYXRhKTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIG1hcCBmb3IgcXVpY2sgcHJvZ3Jlc3MgbG9va3VwOiB2aWRlb19pZCAtPiBsYXN0X3VwZGF0ZWRcclxuICAgICAgY29uc3QgcHJvZ3Jlc3NNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsbFByb2dyZXNzKSkge1xyXG4gICAgICAgIGFsbFByb2dyZXNzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICBpZiAocC52aWRlb19pZCAmJiBwLmxhc3RfdXBkYXRlZCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzc01hcC5zZXQocC52aWRlb19pZCwgcC5sYXN0X3VwZGF0ZWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbnN1cmUgZGF0YSBpcyBhbiBhcnJheVxyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgIHNldFBsYXlsaXN0cyhkYXRhKTtcclxuICAgICAgICBzZXRBbGxQbGF5bGlzdHMoZGF0YSk7XHJcblxyXG4gICAgICAgIC8vIFByb2Nlc3MgbWV0YWRhdGFcclxuICAgICAgICBjb25zdCB0aHVtYm5haWxNYXAgPSB7fTtcclxuICAgICAgICBjb25zdCByZWNlbnRWaWRlb01hcCA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGl0ZW1Db3VudE1hcCA9IHt9O1xyXG5cclxuICAgICAgICAvLyBNZXRhZGF0YSBsaXN0IGlzIGFuIGFycmF5IG9mIG9iamVjdHNcclxuICAgICAgICBjb25zdCBtZXRhZGF0YU1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YUxpc3QpKSB7XHJcbiAgICAgICAgICBtZXRhZGF0YUxpc3QuZm9yRWFjaChtID0+IG1ldGFkYXRhTWFwLnNldChtLnBsYXlsaXN0X2lkLCBtKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBbHNvIHByZS1sb2FkIGZvbGRlcnMgZm9yIHBsYXlsaXN0cyB0byBkZXRlcm1pbmUgaWYgZXhwYW5kIG9wdGlvbiBzaG91bGQgYmUgc2hvd25cclxuICAgICAgICAvLyBXZSBjYW4gdXNlIHRoZSBsb2FkZWQgJ2ZvbGRlcnMnIHN0YXRlIGlmIGF2YWlsYWJsZSwgb3IgZmV0Y2ggaXQuXHJcbiAgICAgICAgLy8gQnV0IGxvYWRGb2xkZXJzIGlzIGNhbGxlZCBzZXBhcmF0ZWx5LlxyXG4gICAgICAgIC8vIFdlIG5lZWQgJ3BsYXlsaXN0Rm9sZGVycycgbWFwIHBvcHVsYXRlZC5cclxuICAgICAgICAvLyBTaW5jZSBsb2FkRm9sZGVycyBub3cgdXNlcyBnZXRBbGxGb2xkZXJzV2l0aFZpZGVvcywgd2UgY2FuIGRlcml2ZSBwbGF5bGlzdEZvbGRlcnMgZnJvbSB0aGF0LlxyXG4gICAgICAgIC8vIFVzZSBhIHNlcGFyYXRlIGNhbGwgaGVyZSBvciB3YWl0IGZvciBmb2xkZXIgc3RhdGU/XHJcbiAgICAgICAgLy8gTGV0J3MgZG8gYSBiYXRjaCBmZXRjaCBvZiBmb2xkZXJzIGhlcmUgdG9vIHRvIGJlIHNhZmUgYW5kIHBvcHVsYXRlIHBsYXlsaXN0Rm9sZGVyc1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBhbGxGb2xkZXJzID0gYXdhaXQgZ2V0QWxsRm9sZGVyc1dpdGhWaWRlb3MoKTtcclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsbEZvbGRlcnMpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBGb2xkZXJzID0ge307XHJcbiAgICAgICAgICAgIGFsbEZvbGRlcnMuZm9yRWFjaChmID0+IHtcclxuICAgICAgICAgICAgICBpZiAoIXBGb2xkZXJzW2YucGxheWxpc3RfaWRdKSBwRm9sZGVyc1tmLnBsYXlsaXN0X2lkXSA9IFtdO1xyXG4gICAgICAgICAgICAgIHBGb2xkZXJzW2YucGxheWxpc3RfaWRdLnB1c2goZik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZXRQbGF5bGlzdEZvbGRlcnMocEZvbGRlcnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBsb2FkIGZvbGRlcnMgZm9yIG1hcFwiLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcGxheWxpc3Qgb2YgZGF0YSkge1xyXG4gICAgICAgICAgY29uc3QgbWV0YSA9IG1ldGFkYXRhTWFwLmdldChwbGF5bGlzdC5pZCk7XHJcblxyXG4gICAgICAgICAgLy8gSXRlbSBDb3VudFxyXG4gICAgICAgICAgaXRlbUNvdW50TWFwW3BsYXlsaXN0LmlkXSA9IG1ldGEgPyBtZXRhLmNvdW50IDogMDtcclxuXHJcbiAgICAgICAgICAvLyBUaHVtYm5haWxcclxuICAgICAgICAgIGlmIChwbGF5bGlzdC5jdXN0b21fdGh1bWJuYWlsX3VybCkge1xyXG4gICAgICAgICAgICB0aHVtYm5haWxNYXBbcGxheWxpc3QuaWRdID0ge1xyXG4gICAgICAgICAgICAgIG1heDogcGxheWxpc3QuY3VzdG9tX3RodW1ibmFpbF91cmwsXHJcbiAgICAgICAgICAgICAgc3RhbmRhcmQ6IHBsYXlsaXN0LmN1c3RvbV90aHVtYm5haWxfdXJsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEgJiYgbWV0YS5maXJzdF92aWRlbykge1xyXG4gICAgICAgICAgICBjb25zdCB2aWQgPSBtZXRhLmZpcnN0X3ZpZGVvO1xyXG4gICAgICAgICAgICB0aHVtYm5haWxNYXBbcGxheWxpc3QuaWRdID0ge1xyXG4gICAgICAgICAgICAgIG1heDogdmlkLnRodW1ibmFpbF91cmwgfHwgZ2V0VGh1bWJuYWlsVXJsKHZpZC52aWRlb19pZCwgJ21heCcpLFxyXG4gICAgICAgICAgICAgIHN0YW5kYXJkOiB2aWQudGh1bWJuYWlsX3VybCB8fCBnZXRUaHVtYm5haWxVcmwodmlkLnZpZGVvX2lkLCAnc3RhbmRhcmQnKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFJlY2VudCBWaWRlb1xyXG4gICAgICAgICAgLy8gVGhlIGJhY2tlbmQgbm93IHByb3ZpZGVzICdyZWNlbnRfdmlkZW8nIGJhc2VkIG9uIERCIHF1ZXJ5XHJcbiAgICAgICAgICBpZiAobWV0YSAmJiBtZXRhLnJlY2VudF92aWRlbykge1xyXG4gICAgICAgICAgICByZWNlbnRWaWRlb01hcFtwbGF5bGlzdC5pZF0gPSBtZXRhLnJlY2VudF92aWRlbztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFBsYXlsaXN0VGh1bWJuYWlscyh0aHVtYm5haWxNYXApO1xyXG4gICAgICAgIHNldFBsYXlsaXN0UmVjZW50VmlkZW9zKHJlY2VudFZpZGVvTWFwKTtcclxuICAgICAgICBzZXRQbGF5bGlzdEl0ZW1Db3VudHMoaXRlbUNvdW50TWFwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ2dldEFsbFBsYXlsaXN0cyByZXR1cm5lZCBub24tYXJyYXkgZGF0YTonLCBkYXRhKTtcclxuICAgICAgICBzZXRQbGF5bGlzdHMoW10pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBwbGF5bGlzdHM6JywgZXJyb3IpO1xyXG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gbG9hZCBwbGF5bGlzdHMgZnJvbSBkYXRhYmFzZScpO1xyXG4gICAgICBzZXRQbGF5bGlzdHMoW10pO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIGlmIChsb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtOCBwdC04XCI+XHJcbiAgICAgICAgICB7LyogU2tlbGV0b24gQmFubmVyICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC02NCBiZy1zbGF0ZS04MDAvMzAgcm91bmRlZC14bCBhbmltYXRlLXB1bHNlIG1iLThcIiAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCBweC04IHBiLThcIj5cclxuICAgICAgICAgIHtbLi4uQXJyYXkoNildLm1hcCgoXywgaSkgPT4gKFxyXG4gICAgICAgICAgICA8UGxheWxpc3RDYXJkU2tlbGV0b24ga2V5PXtpfSAvPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgaC1mdWxsIGdhcC00XCI+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNDAwIHRleHQtbGdcIj5FcnJvciBsb2FkaW5nIHBsYXlsaXN0czwvcD5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTQwMCB0ZXh0LXNtXCI+e2Vycm9yfTwvcD5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBvbkNsaWNrPXtsb2FkUGxheWxpc3RzfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLXNreS01MDAgcm91bmRlZC1sZyBob3ZlcjpiZy1za3ktNjAwIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnIzA1MkY0QScgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICBSZXRyeVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAocGxheWxpc3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgaC1mdWxsXCI+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZ1wiIHN0eWxlPXt7IGNvbG9yOiAnIzA1MkY0QScgfX0+Tm8gcGxheWxpc3RzIGZvdW5kLiBDcmVhdGUgb25lIHRvIGdldCBzdGFydGVkITwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaGFuZGxlVXBsb2FkQ29tcGxldGUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRTaG93VXBsb2FkZXIoZmFsc2UpO1xyXG4gICAgICBhd2FpdCBsb2FkUGxheWxpc3RzKCk7IC8vIFJlbG9hZCBwbGF5bGlzdHMgYWZ0ZXIgdXBsb2FkXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWxvYWRpbmcgcGxheWxpc3RzIGFmdGVyIHVwbG9hZDonLCBlcnJvcik7XHJcbiAgICAgIC8vIFN0aWxsIGNsb3NlIHRoZSB1cGxvYWRlciBldmVuIGlmIHJlbG9hZCBmYWlsc1xyXG4gICAgICBzZXRTaG93VXBsb2FkZXIoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUJ1bGtJbXBvcnRDb21wbGV0ZSA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNldFNob3dCdWxrSW1wb3J0ZXIoZmFsc2UpO1xyXG4gICAgICBhd2FpdCBsb2FkUGxheWxpc3RzKCk7IC8vIFJlbG9hZCBwbGF5bGlzdHMgYWZ0ZXIgYnVsayBpbXBvcnRcclxuICAgICAgaWYgKHNob3dDb2xvcmVkRm9sZGVycykge1xyXG4gICAgICAgIGF3YWl0IGxvYWRGb2xkZXJzKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbG9hZGluZyBwbGF5bGlzdHMgYWZ0ZXIgYnVsayBpbXBvcnQ6JywgZXJyb3IpO1xyXG4gICAgICAvLyBTdGlsbCBjbG9zZSB0aGUgYnVsayBpbXBvcnRlciBldmVuIGlmIHJlbG9hZCBmYWlsc1xyXG4gICAgICBzZXRTaG93QnVsa0ltcG9ydGVyKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVMb2NhbFZpZGVvVXBsb2FkQ29tcGxldGUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRTaG93TG9jYWxWaWRlb1VwbG9hZGVyKGZhbHNlKTtcclxuICAgICAgc2V0U2VsZWN0ZWRQbGF5bGlzdEZvckxvY2FsVXBsb2FkKG51bGwpO1xyXG4gICAgICBhd2FpdCBsb2FkUGxheWxpc3RzKCk7IC8vIFJlbG9hZCBwbGF5bGlzdHMgYWZ0ZXIgbG9jYWwgdmlkZW8gdXBsb2FkXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWxvYWRpbmcgcGxheWxpc3RzIGFmdGVyIGxvY2FsIHZpZGVvIHVwbG9hZDonLCBlcnJvcik7XHJcbiAgICAgIC8vIFN0aWxsIGNsb3NlIHRoZSB1cGxvYWRlciBldmVuIGlmIHJlbG9hZCBmYWlsc1xyXG4gICAgICBzZXRTaG93TG9jYWxWaWRlb1VwbG9hZGVyKGZhbHNlKTtcclxuICAgICAgc2V0U2VsZWN0ZWRQbGF5bGlzdEZvckxvY2FsVXBsb2FkKG51bGwpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU9wZW5Mb2NhbFZpZGVvVXBsb2FkZXIgPSAoKSA9PiB7XHJcbiAgICBpZiAocGxheWxpc3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBhbGVydCgnUGxlYXNlIGNyZWF0ZSBhIHBsYXlsaXN0IGZpcnN0IGJlZm9yZSBhZGRpbmcgbG9jYWwgdmlkZW9zLicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBJZiBvbmx5IG9uZSBwbGF5bGlzdCwgdXNlIGl0IGRpcmVjdGx5XHJcbiAgICBpZiAocGxheWxpc3RzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBzZXRTZWxlY3RlZFBsYXlsaXN0Rm9yTG9jYWxVcGxvYWQocGxheWxpc3RzWzBdLmlkKTtcclxuICAgICAgc2V0U2hvd0xvY2FsVmlkZW9VcGxvYWRlcih0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFNob3cgcGxheWxpc3Qgc2VsZWN0b3IgbW9kYWxcclxuICAgICAgc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IodHJ1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUGxheWxpc3RTZWxlY3RlZCA9IChwbGF5bGlzdElkKSA9PiB7XHJcbiAgICBzZXRTZWxlY3RlZFBsYXlsaXN0Rm9yTG9jYWxVcGxvYWQocGxheWxpc3RJZCk7XHJcbiAgICBzZXRTaG93UGxheWxpc3RTZWxlY3RvcihmYWxzZSk7XHJcbiAgICBzZXRTaG93TG9jYWxWaWRlb1VwbG9hZGVyKHRydWUpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZVBsYXlsaXN0ID0gYXN5bmMgKHBsYXlsaXN0SWQsIHBsYXlsaXN0TmFtZSwgZSkgPT4ge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCB0cmlnZ2VyaW5nIHRoZSBwbGF5bGlzdCBjbGlja1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IHdpbmRvdy5jb25maXJtKFxyXG4gICAgICAgIGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiJHtwbGF5bGlzdE5hbWV9XCI/XFxuXFxuVGhpcyB3aWxsIHBlcm1hbmVudGx5IGRlbGV0ZSB0aGUgcGxheWxpc3QgYW5kIGFsbCBpdHMgdmlkZW9zLmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XHJcblxyXG4gICAgICBzZXREZWxldGluZ1BsYXlsaXN0SWQocGxheWxpc3RJZCk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRlbGV0ZVBsYXlsaXN0KHBsYXlsaXN0SWQpO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgZGVsZXRlZCBwbGF5bGlzdCB3YXMgdGhlIGN1cnJlbnQgb25lLCBjbGVhciB0aGUgcGxheWxpc3QgaXRlbXNcclxuICAgICAgICBpZiAoY3VycmVudFBsYXlsaXN0SXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhbXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZWxvYWQgcGxheWxpc3RzXHJcbiAgICAgICAgYXdhaXQgbG9hZFBsYXlsaXN0cygpO1xyXG4gICAgICB9IGNhdGNoIChkZWxldGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgcGxheWxpc3Q6JywgZGVsZXRlRXJyb3IpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGRlbGV0ZUVycm9yPy5tZXNzYWdlIHx8IGRlbGV0ZUVycm9yPy50b1N0cmluZygpIHx8ICdVbmtub3duIGVycm9yJztcclxuICAgICAgICBhbGVydChgRmFpbGVkIHRvIGRlbGV0ZSBwbGF5bGlzdDogJHtlcnJvck1lc3NhZ2V9YCk7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0RGVsZXRpbmdQbGF5bGlzdElkKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGUgaGFuZGxlcjonLCBlcnJvcik7XHJcbiAgICAgIHNldERlbGV0aW5nUGxheWxpc3RJZChudWxsKTtcclxuICAgICAgLy8gRG9uJ3Qgc2hvdyBhbGVydCBmb3IgdXNlciBjYW5jZWxsYXRpb25cclxuICAgICAgaWYgKGVycm9yLm5hbWUgIT09ICdBYm9ydEVycm9yJyAmJiAhZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ2NhbmNlbCcpKSB7XHJcbiAgICAgICAgYWxlcnQoYEFuIGVycm9yIG9jY3VycmVkOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRXhwb3J0UGxheWxpc3QgPSBhc3luYyAocGxheWxpc3RJZCwgcGxheWxpc3ROYW1lKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgZXhwb3J0IGRhdGFcclxuICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IGF3YWl0IGV4cG9ydFBsYXlsaXN0KHBsYXlsaXN0SWQpO1xyXG5cclxuICAgICAgLy8gQ29udmVydCB0byBKU09OIHN0cmluZ1xyXG4gICAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZXhwb3J0RGF0YSwgbnVsbCwgMik7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgYmxvYiBhbmQgZG93bmxvYWRcclxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtqc29uU3RyaW5nXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XHJcbiAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcclxuICAgICAgbGluay5kb3dubG9hZCA9IGAke3BsYXlsaXN0TmFtZS5yZXBsYWNlKC9bXmEtejAtOV0vZ2ksICdfJyl9X2V4cG9ydC5qc29uYDtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xyXG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcblxyXG4gICAgICBhbGVydChgUGxheWxpc3QgXCIke3BsYXlsaXN0TmFtZX1cIiBleHBvcnRlZCBzdWNjZXNzZnVsbHkhYCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IHBsYXlsaXN0OicsIGVycm9yKTtcclxuICAgICAgYWxlcnQoYEZhaWxlZCB0byBleHBvcnQgcGxheWxpc3Q6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlUGxheWxpc3RFeHBhbmQgPSBhc3luYyAocGxheWxpc3RJZCkgPT4ge1xyXG4gICAgY29uc3QgaXNFeHBhbmRlZCA9IGV4cGFuZGVkUGxheWxpc3RzLmhhcyhwbGF5bGlzdElkKTtcclxuXHJcbiAgICBpZiAoaXNFeHBhbmRlZCkge1xyXG4gICAgICAvLyBDb2xsYXBzZTogcmVtb3ZlIGZyb20gZXhwYW5kZWQgc2V0XHJcbiAgICAgIHNldEV4cGFuZGVkUGxheWxpc3RzKHByZXYgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XHJcbiAgICAgICAgbmV3U2V0LmRlbGV0ZShwbGF5bGlzdElkKTtcclxuICAgICAgICByZXR1cm4gbmV3U2V0O1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEV4cGFuZDogYWRkIHRvIGV4cGFuZGVkIHNldCBhbmQgbG9hZCBmb2xkZXJzXHJcbiAgICAgIHNldEV4cGFuZGVkUGxheWxpc3RzKHByZXYgPT4gbmV3IFNldChwcmV2KS5hZGQocGxheWxpc3RJZCkpO1xyXG5cclxuICAgICAgLy8gTG9hZCBmb2xkZXJzIGZvciB0aGlzIHBsYXlsaXN0IGlmIG5vdCBhbHJlYWR5IGxvYWRlZFxyXG4gICAgICBpZiAoIXBsYXlsaXN0Rm9sZGVyc1twbGF5bGlzdElkXSB8fCBwbGF5bGlzdEZvbGRlcnNbcGxheWxpc3RJZF0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGZvbGRlcnMgPSBhd2FpdCBnZXRGb2xkZXJzRm9yUGxheWxpc3QocGxheWxpc3RJZCk7XHJcbiAgICAgICAgICBjb25zdCBmb2xkZXJBcnJheSA9IGZvbGRlcnMgfHwgW107XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGVkICR7Zm9sZGVyQXJyYXkubGVuZ3RofSBmb2xkZXJzIGZvciBwbGF5bGlzdCAke3BsYXlsaXN0SWR9YCk7XHJcblxyXG4gICAgICAgICAgc2V0UGxheWxpc3RGb2xkZXJzKHByZXYgPT4gKHtcclxuICAgICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgICAgW3BsYXlsaXN0SWRdOiBmb2xkZXJBcnJheVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBmb2xkZXJzIGZvciBwbGF5bGlzdCAke3BsYXlsaXN0SWR9OmAsIGVycm9yKTtcclxuICAgICAgICAgIHNldFBsYXlsaXN0Rm9sZGVycyhwcmV2ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgICAgIFtwbGF5bGlzdElkXTogW11cclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGZsZXggZmxleC1jb2xcIj5cclxuICAgICAge3Nob3dCdWxrSW1wb3J0ZXIgPyAoXHJcbiAgICAgICAgPEJ1bGtQbGF5bGlzdEltcG9ydGVyXHJcbiAgICAgICAgICBvbkltcG9ydENvbXBsZXRlPXtoYW5kbGVCdWxrSW1wb3J0Q29tcGxldGV9XHJcbiAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gc2V0U2hvd0J1bGtJbXBvcnRlcihmYWxzZSl9XHJcbiAgICAgICAgLz5cclxuICAgICAgKSA6IHNob3dVcGxvYWRlciA/IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC00IGJnLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICA8UGxheWxpc3RVcGxvYWRlclxyXG4gICAgICAgICAgICBvblVwbG9hZENvbXBsZXRlPXtoYW5kbGVVcGxvYWRDb21wbGV0ZX1cclxuICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFNob3dVcGxvYWRlcihmYWxzZSl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApIDogc2hvd1BsYXlsaXN0U2VsZWN0b3IgPyAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzcwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAgcC00XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXNsYXRlLTgwMCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtNzAwIHctZnVsbCBtYXgtdy1tZCBwLTZcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGRcIiBzdHlsZT17eyBjb2xvcjogJyMwNTJGNEEnIH19PlNlbGVjdCBQbGF5bGlzdDwvaDM+XHJcbiAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IoZmFsc2UpfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS00MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4gZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmNvbG9yID0gJyMwNTJGNEEnfVxyXG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4gZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmNvbG9yID0gJ3JnYigxNDggMTYzIDE4NCknfVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy01IGgtNVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtMzAwIHRleHQtc20gbWItNFwiPkNob29zZSBhIHBsYXlsaXN0IHRvIGFkZCBsb2NhbCB2aWRlb3MgdG86PC9wPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtYXgtaC02NCBvdmVyZmxvdy15LWF1dG8gbWItNFwiPlxyXG4gICAgICAgICAgICAgIHtwbGF5bGlzdHMubWFwKChwbGF5bGlzdCkgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBrZXk9e3BsYXlsaXN0LmlkfVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVQbGF5bGlzdFNlbGVjdGVkKHBsYXlsaXN0LmlkKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBwLTMgYmctc2xhdGUtNzAwIGhvdmVyOmJnLXNsYXRlLTYwMCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ym9yZGVyLXNreS01MDBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCIgc3R5bGU9e3sgY29sb3I6ICcjMDUyRjRBJyB9fT57cGxheWxpc3QubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAge3BsYXlsaXN0LmRlc2NyaXB0aW9uICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNDAwIHRleHQteHMgbXQtMSBsaW5lLWNsYW1wLTFcIj57cGxheWxpc3QuZGVzY3JpcHRpb259PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UGxheWxpc3RTZWxlY3RvcihmYWxzZSl9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMiBiZy1zbGF0ZS03MDAgcm91bmRlZC1sZyBob3ZlcjpiZy1zbGF0ZS02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnIzA1MkY0QScgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIENhbmNlbFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApIDogc2hvd0xvY2FsVmlkZW9VcGxvYWRlciA/IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC00IGJnLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICA8TG9jYWxWaWRlb1VwbG9hZGVyXHJcbiAgICAgICAgICAgIHBsYXlsaXN0SWQ9e3NlbGVjdGVkUGxheWxpc3RGb3JMb2NhbFVwbG9hZH1cclxuICAgICAgICAgICAgb25VcGxvYWRDb21wbGV0ZT17aGFuZGxlTG9jYWxWaWRlb1VwbG9hZENvbXBsZXRlfVxyXG4gICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xyXG4gICAgICAgICAgICAgIHNldFNob3dMb2NhbFZpZGVvVXBsb2FkZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICAgIHNldFNlbGVjdGVkUGxheWxpc3RGb3JMb2NhbFVwbG9hZChudWxsKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICkgOiAoXHJcbiAgICAgICAgPD5cclxuXHJcblxyXG4gICAgICAgICAgey8qIFBsYXlsaXN0IEdyaWQgLSAzIHBlciByb3cgKi99XHJcbiAgICAgICAgICA8ZGl2IHJlZj17c2Nyb2xsQ29udGFpbmVyUmVmfSBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIGJnLXRyYW5zcGFyZW50IHJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgIHsoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVByZXNldCA9IHByZXNldHMuZmluZChwID0+IHAuaWQgPT09IGFjdGl2ZVByZXNldElkKTtcclxuICAgICAgICAgICAgICBsZXQgYmFubmVyVGl0bGUgPSBhY3RpdmVQcmVzZXRJZCA9PT0gJ2FsbCcgfHwgIWFjdGl2ZVByZXNldFxyXG4gICAgICAgICAgICAgICAgPyBcIkFsbFwiXHJcbiAgICAgICAgICAgICAgICA6IGFjdGl2ZVByZXNldC5uYW1lO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiSWQgJiYgYWN0aXZlVGFiSWQgIT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0YWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWJJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGJhbm5lclRpdGxlICs9IGAgLSAke2FjdGl2ZVRhYi5uYW1lfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdmlzaWJsZSBwbGF5bGlzdHMgYW5kIHRvdGFsIHZpZGVvc1xyXG4gICAgICAgICAgICAgIC8vIEZpbHRlciBsb2dpYyBtdXN0IG1hdGNoIHRoZSByZW5kZXJpbmcgbG9naWMgYmVsb3dcclxuICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFBsYXlsaXN0cyA9IHBsYXlsaXN0cy5maWx0ZXIoKHBsYXlsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiSWQgPT09ICdhbGwnKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IGFjdGl2ZVRhYklkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVUYWIgJiYgYWN0aXZlVGFiLnBsYXlsaXN0SWRzLmluY2x1ZGVzKHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgY29uc3QgcGxheWxpc3RDb3VudCA9IGZpbHRlcmVkUGxheWxpc3RzLmxlbmd0aDtcclxuICAgICAgICAgICAgICBjb25zdCB0b3RhbFZpZGVvcyA9IGZpbHRlcmVkUGxheWxpc3RzLnJlZHVjZSgoc3VtLCBwKSA9PiBzdW0gKyAocGxheWxpc3RJdGVtQ291bnRzW3AuaWRdIHx8IDApLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtOCBwdC04XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxQYWdlQmFubmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Jhbm5lclRpdGxlfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIGlzRWRpdGFibGU9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlYW1sZXNzQm90dG9tPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvQ291bnQ9e3BsYXlsaXN0Q291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRMYWJlbD1cIlBsYXlsaXN0XCJcclxuICAgICAgICAgICAgICAgICAgICBhdXRob3I9e2Ake3RvdGFsVmlkZW9zfSBWaWRlb3NgfVxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSkoKX1cclxuXHJcbiAgICAgICAgICAgIHsvKiBTdGlja3kgU2VudGluZWwgKi99XHJcbiAgICAgICAgICAgIDxkaXYgcmVmPXtzdGlja3lTZW50aW5lbFJlZn0gY2xhc3NOYW1lPVwiYWJzb2x1dGUgaC1weCB3LWZ1bGwgLW10LXB4IHBvaW50ZXItZXZlbnRzLW5vbmUgb3BhY2l0eS0wXCIgLz5cclxuXHJcbiAgICAgICAgICAgIHsvKiBTdGlja3kgVG9vbGJhciAqL31cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHN0aWNreSB0b3AtMCB6LTQwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTUwMCBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIG92ZXJmbG93LWhpZGRlbiAtbXQtMTZcclxuICAgICAgICAgICAgICAke2lzU3R1Y2tcclxuICAgICAgICAgICAgICAgICAgPyAnYmFja2Ryb3AtYmx1ci14bCBib3JkZXIteSBzaGFkb3ctMnhsIG14LTAgcm91bmRlZC1ub25lIG1iLTYgcHQtMiBwYi0yIGJnLXNsYXRlLTkwMC83MCdcclxuICAgICAgICAgICAgICAgICAgOiAnYmFja2Ryb3AtYmx1ci1bMnB4XSBib3JkZXItYiBib3JkZXIteCBib3JkZXItdCBib3JkZXItd2hpdGUvMTAgc2hhZG93LXhsIG14LTggcm91bmRlZC1iLTJ4bCBtYi04IG10LTAgcHQtMSBwYi0wIGJnLXRyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGB9XHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNTdHVjayA/IHVuZGVmaW5lZCA6ICd0cmFuc3BhcmVudCcgLy8gRnVsbHkgdHJhbnNwYXJlbnQgcmVzdGluZyBzdGF0ZVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuXHJcblxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcHgtNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIHJlbGF0aXZlIHotMTAgJHtpc1N0dWNrID8gJ2gtWzUycHhdJyA6ICdweS0wLjUnfWB9PlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBMZWZ0OiBUYWIgQmFyICovfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteC1hdXRvIG5vLXNjcm9sbGJhciBtYXNrLWdyYWRpZW50LXJpZ2h0IG1pbi13LTBcIj5cclxuICAgICAgICAgICAgICAgICAgPFRhYkJhciBvbkFkZFBsYXlsaXN0VG9UYWI9e2FkZFBsYXlsaXN0VG9UYWJ9IHNob3dQcmVzZXRzPXt0cnVlfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIFJpZ2h0OiBDb250cm9scyAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWwtNCBzaHJpbmstMCBwbC0zIGJvcmRlci1sIGJvcmRlci13aGl0ZS8xMFwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEZvbGRlciBUb2dnbGUgLSBJY29uIE9ubHkgKi99XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Q29sb3JlZEZvbGRlcnMoIXNob3dDb2xvcmVkRm9sZGVycyl9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0xLjUgcm91bmRlZC1tZCB0cmFuc2l0aW9uLWFsbCAke3Nob3dDb2xvcmVkRm9sZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgPyAnYmctc2t5LTYwMCB0ZXh0LXdoaXRlIHNoYWRvdy1zbSdcclxuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXNsYXRlLTgwMC84MCB0ZXh0LXNsYXRlLTQwMCBob3ZlcjpiZy1zbGF0ZS03MDAgaG92ZXI6dGV4dC13aGl0ZSBib3JkZXIgYm9yZGVyLXdoaXRlLzEwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3Nob3dDb2xvcmVkRm9sZGVycyA/IFwiSGlkZSBGb2xkZXJzXCIgOiBcIlNob3cgRm9sZGVyc1wifVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMyA3djEwYTIgMiAwIDAwMiAyaDE0YTIgMiAwIDAwMi0yVjlhMiAyIDAgMDAtMi0yaC02bC0yLTJINWEyIDIgMCAwMC0yIDJ6XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQWRkIFBsYXlsaXN0IC0gSWNvbiBPbmx5ICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0ltcG9ydE1vZGFsKHRydWUpfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMS41IGJnLXNreS01MDAgaG92ZXI6Ymctc2t5LTQwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1hbGwgc2hhZG93LWxnIGhvdmVyOnNoYWRvdy1za3ktNTAwLzI1IGJvcmRlciBib3JkZXItd2hpdGUvMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQWRkIFBsYXlsaXN0XCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDR2MTZtOC04SDRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogR3JpZCAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC00IHB4LTggcGItOFwiPlxyXG4gICAgICAgICAgICAgIHsvKiBDb2xvcmVkIEZvbGRlcnMgLSBGaWx0ZXJlZCBieSBhY3RpdmUgdGFiIChvbmx5IHNob3cgaWYgc2hvd0NvbG9yZWRGb2xkZXJzIGlzIHRydWUpICovfVxyXG4gICAgICAgICAgICAgIHtzaG93Q29sb3JlZEZvbGRlcnMgJiYgZm9sZGVyc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoZm9sZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIERvbid0IHNob3cgZm9sZGVycyB0aGF0IGFyZSBzdHVjayAodGhleSdsbCBiZSBzaG93biBpbiB0aGUgcGxheWxpc3Qgc2VjdGlvbilcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyS2V5ID0gYCR7Zm9sZGVyLnBsYXlsaXN0X2lkfToke2ZvbGRlci5mb2xkZXJfY29sb3J9YDtcclxuICAgICAgICAgICAgICAgICAgaWYgKHN0dWNrRm9sZGVycy5oYXMoZm9sZGVyS2V5KSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYklkID09PSAnYWxsJykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IGFjdGl2ZVRhYklkKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZVRhYiAmJiBhY3RpdmVUYWIucGxheWxpc3RJZHMuaW5jbHVkZXMoZm9sZGVyLnBsYXlsaXN0X2lkKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubWFwKChmb2xkZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlckNvbG9yID0gZ2V0Rm9sZGVyQ29sb3JCeUlkKGZvbGRlci5mb2xkZXJfY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJJbWFnZUtleSA9IGBmb2xkZXItJHtmb2xkZXIucGxheWxpc3RfaWR9LSR7Zm9sZGVyLmZvbGRlcl9jb2xvcn1gO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB0aHVtYlVybHMgPSBmb2xkZXIuZmlyc3RfdmlkZW8gPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBnZXRUaHVtYm5haWxVcmwoZm9sZGVyLmZpcnN0X3ZpZGVvLnZpZGVvX2lkLCAnbWF4JyksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmQ6IGdldFRodW1ibmFpbFVybChmb2xkZXIuZmlyc3RfdmlkZW8udmlkZW9faWQsICdzdGFuZGFyZCcpXHJcbiAgICAgICAgICAgICAgICAgIH0gOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgY29uc3QgdXNlRmFsbGJhY2sgPSBpbWFnZUxvYWRFcnJvcnMuaGFzKGZvbGRlckltYWdlS2V5KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGh1bWJuYWlsVXJsID0gdGh1bWJVcmxzID8gKHVzZUZhbGxiYWNrID8gdGh1bWJVcmxzLnN0YW5kYXJkIDogdGh1bWJVcmxzLm1heCkgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Bmb2xkZXItJHtmb2xkZXIucGxheWxpc3RfaWR9LSR7Zm9sZGVyLmZvbGRlcl9jb2xvcn0tJHtpbmRleH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdldFZpZGVvc0luRm9sZGVyKGZvbGRlci5wbGF5bGlzdF9pZCwgZm9sZGVyLmZvbGRlcl9jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgZm9sZGVyLnBsYXlsaXN0X2lkLCB7IHBsYXlsaXN0X2lkOiBmb2xkZXIucGxheWxpc3RfaWQsIGZvbGRlcl9jb2xvcjogZm9sZGVyLmZvbGRlcl9jb2xvciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCAmJiBvblZpZGVvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvU2VsZWN0KGl0ZW1zWzBdLnZpZGVvX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmb2xkZXIuZmlyc3RfdmlkZW8gJiYgb25WaWRlb1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdChmb2xkZXIuZmlyc3RfdmlkZW8udmlkZW9fdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZm9sZGVyIGl0ZW1zOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1cnNvci1wb2ludGVyIGdyb3VwIHJlbGF0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogVGh1bWJuYWlsIHdpdGggY29sb3JlZCBib3JkZXIgLSBSb3VuZGVkICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBhc3BlY3QtdmlkZW8gb3ZlcmZsb3ctaGlkZGVuIHJvdW5kZWQtbGdcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjMGYxNzJhJyB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbG9yZWQgbGVmdCBib3JkZXIgaW5kaWNhdG9yICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0wIHRvcC0wIGJvdHRvbS0wIHctMiB6LTEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGZvbGRlckNvbG9yLmhleCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGh1bWJuYWlsVXJsID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YWN0aXZlVGh1bWJuYWlsVXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtmb2xkZXIuZmlyc3RfdmlkZW8/LnRpdGxlIHx8ICdGb2xkZXIgdGh1bWJuYWlsJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyIHBsLTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZUZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1hZ2VMb2FkRXJyb3JzKHByZXYgPT4gbmV3IFNldChwcmV2KS5hZGQoZm9sZGVySW1hZ2VLZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ6ICdjb3ZlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiAnOHB4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwbC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LXNsYXRlLTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTMgN3YxMGEyIDIgMCAwMDIgMmgxNGEyIDIgMCAwMDItMlY5YTIgMiAwIDAwLTItMmgtNmwtMi0ySDVhMiAyIDAgMDAtMiAyelwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIFBsYXkgb3ZlcmxheSBvbiBob3ZlciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktMCBncm91cC1ob3ZlcjpiZy1vcGFjaXR5LTQwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTE2IGgtMTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogJyMwNTJGNEEnIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDIwIDIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk02LjMgMi44NDFBMS41IDEuNSAwIDAwNCA0LjExVjE1Ljg5YTEuNSAxLjUgMCAwMDIuMyAxLjI2OWw5LjM0NC01Ljg5YTEuNSAxLjUgMCAwMDAtMi41MzhMNi4zIDIuODR6XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb2xkZXIgSW5mbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiByZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQ29sb3JlZCBkb3QgaW5kaWNhdG9yICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGZsZXgtc2hyaW5rLTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBmb2xkZXJDb2xvci5oZXggfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNtIHRydW5jYXRlIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnIzA1MkY0QScgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IGUuY3VycmVudFRhcmdldC5zdHlsZS5jb2xvciA9ICcjMzhiZGY4J31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IGUuY3VycmVudFRhcmdldC5zdHlsZS5jb2xvciA9ICcjMDUyRjRBJ30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9sZGVyQ29sb3IubmFtZX0gRm9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KX1cclxuXHJcbiAgICAgICAgICAgICAgey8qIFJlZ3VsYXIgUGxheWxpc3RzIC0gRmlsdGVyZWQgYnkgYWN0aXZlIHRhYiAqL31cclxuICAgICAgICAgICAgICB7KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGEgZmxhdCBhcnJheSBvZiBpdGVtcyAocGxheWxpc3RzICsgdGhlaXIgZXhwYW5kZWQgZm9sZGVycylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUGxheWxpc3RzID0gcGxheWxpc3RzLmZpbHRlcigocGxheWxpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYklkID09PSAnYWxsJykgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IGFjdGl2ZVRhYklkKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZVRhYiAmJiBhY3RpdmVUYWIucGxheWxpc3RJZHMuaW5jbHVkZXMocGxheWxpc3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFN0dWNrRm9sZGVycyA9IG5ldyBTZXQoKTsgLy8gVHJhY2sgd2hpY2ggc3R1Y2sgZm9sZGVycyB3ZSd2ZSBhbHJlYWR5IGFkZGVkXHJcblxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRQbGF5bGlzdHMuZm9yRWFjaCgocGxheWxpc3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwbGF5bGlzdCBpdHNlbGZcclxuICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IHR5cGU6ICdwbGF5bGlzdCcsIGRhdGE6IHBsYXlsaXN0IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gSWYgZXhwYW5kZWQsIGFkZCBpdHMgZm9sZGVycyByaWdodCBhZnRlclxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpc0V4cGFuZGVkID0gZXhwYW5kZWRQbGF5bGlzdHMuaGFzKHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVycyA9IHBsYXlsaXN0Rm9sZGVyc1twbGF5bGlzdC5pZF0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgIGlmIChpc0V4cGFuZGVkICYmIGZvbGRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJLZXkgPSBgJHtmb2xkZXIucGxheWxpc3RfaWR9OiR7Zm9sZGVyLmZvbGRlcl9jb2xvcn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkU3R1Y2tGb2xkZXJzLmFkZChmb2xkZXJLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7IHR5cGU6ICdmb2xkZXInLCBkYXRhOiBmb2xkZXIsIHBhcmVudFBsYXlsaXN0OiBwbGF5bGlzdCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gQWxzbyBhZGQgc3R1Y2sgZm9sZGVycyBmb3IgdGhpcyBwbGF5bGlzdCAoZXZlbiBpZiBub3QgZXhwYW5kZWQpXHJcbiAgICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyS2V5ID0gYCR7Zm9sZGVyLnBsYXlsaXN0X2lkfToke2ZvbGRlci5mb2xkZXJfY29sb3J9YDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3R1Y2tGb2xkZXJzLmhhcyhmb2xkZXJLZXkpICYmICFwcm9jZXNzZWRTdHVja0ZvbGRlcnMuaGFzKGZvbGRlcktleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFN0dWNrRm9sZGVycy5hZGQoZm9sZGVyS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goeyB0eXBlOiAnZm9sZGVyJywgZGF0YTogZm9sZGVyLCBwYXJlbnRQbGF5bGlzdDogcGxheWxpc3QsIGlzU3R1Y2s6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFsc28gYWRkIHN0dWNrIGZvbGRlcnMgZnJvbSB0aGUgZ2xvYmFsIGZvbGRlcnMgbGlzdCAoZm9yIHdoZW4gc2hvd0NvbG9yZWRGb2xkZXJzIGlzIG9mZilcclxuICAgICAgICAgICAgICAgIGlmICghc2hvd0NvbG9yZWRGb2xkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyS2V5ID0gYCR7Zm9sZGVyLnBsYXlsaXN0X2lkfToke2ZvbGRlci5mb2xkZXJfY29sb3J9YDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3R1Y2tGb2xkZXJzLmhhcyhmb2xkZXJLZXkpICYmICFwcm9jZXNzZWRTdHVja0ZvbGRlcnMuaGFzKGZvbGRlcktleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHBsYXlsaXN0IGlzIGluIGZpbHRlcmVkIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudFBsYXlsaXN0ID0gcGxheWxpc3RzLmZpbmQocCA9PiBwLmlkID09PSBmb2xkZXIucGxheWxpc3RfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFBsYXlsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5GaWx0ZXJlZCA9IGFjdGl2ZVRhYklkID09PSAnYWxsJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IGFjdGl2ZVRhYklkKT8ucGxheWxpc3RJZHMuaW5jbHVkZXMoZm9sZGVyLnBsYXlsaXN0X2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5GaWx0ZXJlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFN0dWNrRm9sZGVycy5hZGQoZm9sZGVyS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHsgdHlwZTogJ2ZvbGRlcicsIGRhdGE6IGZvbGRlciwgcGFyZW50UGxheWxpc3Q6IHBhcmVudFBsYXlsaXN0LCBpc1N0dWNrOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAncGxheWxpc3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWxpc3QgPSBpdGVtLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJEYXRhID0gcGxheWxpc3RUaHVtYm5haWxzW3BsYXlsaXN0LmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5bGlzdEltYWdlS2V5ID0gYHBsYXlsaXN0LSR7cGxheWxpc3QuaWR9YDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IGltYWdlTG9hZEVycm9ycy5oYXMocGxheWxpc3RJbWFnZUtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGh1bWJuYWlsVXJsID0gdGh1bWJEYXRhID8gKHVzZUZhbGxiYWNrID8gdGh1bWJEYXRhLnN0YW5kYXJkIDogdGh1bWJEYXRhLm1heCkgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWNlbnRWaWRlbyA9IHBsYXlsaXN0UmVjZW50VmlkZW9zW3BsYXlsaXN0LmlkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtQ291bnQgPSBwbGF5bGlzdEl0ZW1Db3VudHNbcGxheWxpc3QuaWRdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IGV4cGFuZGVkUGxheWxpc3RzLmhhcyhwbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVycyA9IHBsYXlsaXN0Rm9sZGVyc1twbGF5bGlzdC5pZF0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzRm9sZGVycyA9IGZvbGRlcnMubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwbGF5bGlzdC5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCB0cmlnZ2VyIGlmIGNsaWNraW5nIG9uIG1lbnVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtY2FyZC1tZW51PVwidHJ1ZVwiXScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdldFBsYXlsaXN0SXRlbXMocGxheWxpc3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgcGxheWxpc3QuaWQsIG51bGwsIHBsYXlsaXN0Lm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDAgJiYgb25WaWRlb1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvU2VsZWN0KGl0ZW1zWzBdLnZpZGVvX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHBsYXlsaXN0IGl0ZW1zOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1cnNvci1wb2ludGVyIGdyb3VwIHJlbGF0aXZlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldEluc3BlY3RUaXRsZShgUGxheWxpc3Q6ICR7cGxheWxpc3QubmFtZX1gKX1cclxuICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJvcmRlci0yIGJvcmRlci1zbGF0ZS03MDAvNTAgcm91bmRlZC14bCBwLTIgYmctc2xhdGUtODAwLzIwIGhvdmVyOmJvcmRlci1za3ktNTAwLzUwIHRyYW5zaXRpb24tY29sb3JzIGgtZnVsbCBmbGV4IGZsZXgtY29sICR7U3RyaW5nKHBsYXlsaXN0LmlkKSA9PT0gU3RyaW5nKGFjdGl2ZVBsYXlsaXN0SWQpID8gJ2FjdGl2ZS1wbGF5bGlzdC1tYXJrZXInIDogJyd9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWFjdGl2ZS1wbGF5bGlzdD17U3RyaW5nKHBsYXlsaXN0LmlkKSA9PT0gU3RyaW5nKGFjdGl2ZVBsYXlsaXN0SWQpID8gXCJ0cnVlXCIgOiBcImZhbHNlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUGxheWxpc3QgSW5mbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJvcmRlci0yIGJvcmRlci1bIzA1MkY0QV0gcm91bmRlZC1tZCBwLTEgYmctc2xhdGUtMTAwLzkwIHNoYWRvdy1zbSByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4gaC1bMzhweF1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1sZyB0cnVuY2F0ZSB0cmFuc2l0aW9uLWNvbG9ycyBwbC0xIGZsZXgtMSB0ZXh0LWxlZnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogJyMwNTJGNEEnIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IGUuY3VycmVudFRhcmdldC5zdHlsZS5jb2xvciA9ICcjMzhiZGY4J31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4gZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmNvbG9yID0gJyMwNTJGNEEnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17cGxheWxpc3QubmFtZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwbGF5bGlzdC5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSG92ZXIgQ29udHJvbHMgLSBNb3ZlZCB0byBUaXRsZSBCYXIgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgYWJzb2x1dGUgcmlnaHQtMSB0b3AtMCBib3R0b20tMCBwci0xIHBsLTQgYmctZ3JhZGllbnQtdG8tbCBmcm9tLXNsYXRlLTEwMCB2aWEtc2xhdGUtMTAwIHRvLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2V0UGxheWxpc3RJdGVtcyhwbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFByZXZpZXdQbGF5bGlzdChpdGVtcywgcGxheWxpc3QuaWQsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UGFnZSgndmlkZW9zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3TW9kZSA9PT0gJ2Z1bGwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Vmlld01vZGUoJ2hhbGYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgcGxheWxpc3QgaXRlbXMgZm9yIHByZXZpZXc6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIGhvdmVyOmJnLXNsYXRlLTIwMCByb3VuZGVkIHRleHQtWyMwNTJGNEFdIGhvdmVyOnRleHQtc2t5LTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJQcmV2aWV3IHBsYXlsaXN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFeWUgc2l6ZT17MTh9IHN0cm9rZVdpZHRoPXsyLjV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdldFBsYXlsaXN0SXRlbXMocGxheWxpc3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQbGF5bGlzdEl0ZW1zKGl0ZW1zLCBwbGF5bGlzdC5pZCwgbnVsbCwgcGxheWxpc3QubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwICYmIG9uVmlkZW9TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvU2VsZWN0KGl0ZW1zWzBdLnZpZGVvX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHBsYXlsaXN0IGl0ZW1zOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2FzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRQbGF5bGlzdEl0ZW1zKHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgcGxheWxpc3QuaWQsIG51bGwsIHBsYXlsaXN0Lm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDAgJiYgb25WaWRlb1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdmlkZW8gdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IGNvdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWN0aXZlVGh1bWJuYWlsVXJsIGlzIGF2YWlsYWJsZSBpbiBzY29wZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRWaWRlbyA9IGl0ZW1zWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGh1bWJuYWlsVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3Zlck1hdGNoID0gaXRlbXMuZmluZChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4VGh1bWIgPSBnZXRUaHVtYm5haWxVcmwoaXRlbS52aWRlb19pZCwgJ21heCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGRUaHVtYiA9IGdldFRodW1ibmFpbFVybChpdGVtLnZpZGVvX2lkLCAnc3RhbmRhcmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1heFRodW1iID09PSBhY3RpdmVUaHVtYm5haWxVcmwgfHwgc3RkVGh1bWIgPT09IGFjdGl2ZVRodW1ibmFpbFVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3Zlck1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFZpZGVvID0gY292ZXJNYXRjaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BsYXlpbmcgY292ZXIgdmlkZW86JywgdGFyZ2V0VmlkZW8udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdCh0YXJnZXRWaWRlby52aWRlb191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGxheSBjb3ZlciB2aWRlbzonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTEgaG92ZXI6Ymctc2xhdGUtMjAwIHJvdW5kZWQgdGV4dC1bIzA1MkY0QV0gaG92ZXI6dGV4dC1za3ktNjAwIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlBsYXkgcGxheWxpc3QgKFJpZ2h0LWNsaWNrIGZvciBjb3ZlciB2aWRlbylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsYXkgc2l6ZT17MTh9IGZpbGw9XCJjdXJyZW50Q29sb3JcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRQbGF5bGlzdEl0ZW1zKHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltcGxlIHNodWZmbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2h1ZmZsZWQgPSBbLi4uaXRlbXNdLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYXlsaXN0SXRlbXMoc2h1ZmZsZWQsIHBsYXlsaXN0LmlkLCBudWxsLCBwbGF5bGlzdC5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNodWZmbGVkLmxlbmd0aCA+IDAgJiYgb25WaWRlb1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9TZWxlY3Qoc2h1ZmZsZWRbMF0udmlkZW9fdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNodWZmbGUgcGxheWxpc3Q6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIGhvdmVyOmJnLXNsYXRlLTIwMCByb3VuZGVkIHRleHQtWyMwNTJGNEFdIGhvdmVyOnRleHQtc2t5LTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJTaHVmZmxlIHBsYXlsaXN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaHVmZmxlIHNpemU9ezE4fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogVGh1bWJuYWlsICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmUgZ3JvdXAgbXQtYXV0b1wiIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogJzU2LjI1JScsIC8vIDE2OjkgYXNwZWN0IHJhdGlvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMGYxNzJhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUaHVtYm5haWxVcmwgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2FjdGl2ZVRodW1ibmFpbFVybH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3BsYXlsaXN0Lm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VGYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbWFnZUxvYWRFcnJvcnMocHJldiA9PiBuZXcgU2V0KHByZXYpLmFkZChwbGF5bGlzdEltYWdlS2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Rml0OiAnY292ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LXNsYXRlLTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTQgNmgxNk00IDEyaDE2TTQgMThoMTZcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBQbGF5IG92ZXJsYXkgb24gaG92ZXIgLSBSRU1PVkVEIHBlciB1c2VyIHJlcXVlc3QgKi99XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIDMtZG90IG1lbnUgLSBtb3ZlZCB0byBob3ZlciBvdmVybGF5IChUb3AgUmlnaHQpICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMjAwIHotMzBcIiBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZE1lbnVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpc0V4cGFuZGVkID8gJ0NvbGxhcHNlIEZvbGRlcnMnIDogJ0V4cGFuZCBGb2xkZXJzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPXtpc0V4cGFuZGVkID8gXCJNNSAxNWw3LTcgNyA3XCIgOiBcIk0xOSA5bC03IDctNy03XCJ9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3RvZ2dsZUZvbGRlcnMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdFeHBvcnQgUGxheWxpc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTIgMTB2Nm0wIDBsLTMtM20zIDNsMy0zbTIgOEg3YTIgMiAwIDAxLTItMlY1YTIgMiAwIDAxMi0yaDUuNTg2YTEgMSAwIDAxLjcwNy4yOTNsNS40MTQgNS40MTRhMSAxIDAgMDEuMjkzLjcwN1YxOWEyIDIgMCAwMS0yIDJ6XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZXhwb3J0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQWRkIHRvIFRhYicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1lbnU6ICd0YWJzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDZ2Nm0wIDB2Nm0wLTZoNm0tNiAwSDZcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihhY3RpdmVUYWJJZCAhPT0gJ2FsbCcgPyBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1JlbW92ZSBmcm9tIFRhYicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0yMCAxMkg0XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlRnJvbVRhYkN1cnJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dIDogW10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGVsZXRpbmdQbGF5bGlzdElkID09PSBwbGF5bGlzdC5pZCA/ICdEZWxldGluZy4uLicgOiAnRGVsZXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2VyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBkZWxldGluZ1BsYXlsaXN0SWQgPT09IHBsYXlsaXN0LmlkID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNCBhbmltYXRlLXNwaW5cIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk00IDR2NWguNTgybTE1LjM1NiAyQTguMDAxIDguMDAxIDAgMDA0LjU4MiA5bTAgMEg5bTExIDExdi01aC0uNTgxbTAgMGE4LjAwMyA4LjAwMyAwIDAxLTE1LjM1Ny0ybTE1LjM1NyAySDE1XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSA3bC0uODY3IDEyLjE0MkEyIDIgMCAwMTE2LjEzOCAyMUg3Ljg2MmEyIDIgMCAwMS0xLjk5NS0xLjg1OEw1IDdtNSA0djZtNC02djZtMS0xMFY0YTEgMSAwIDAwLTEtMWgtNGExIDEgMCAwMC0xIDF2M000IDdoMTZcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdkZWxldGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGVsZXRpbmdQbGF5bGlzdElkID09PSBwbGF5bGlzdC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtZW51T3B0aW9ucz17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiczogdGFic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHRhYiA9PiB0YWIuaWQgIT09ICdhbGwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHRhYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJblRhYiA9IHRhYi5wbGF5bGlzdElkcy5pbmNsdWRlcyhwbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpc0luVGFiID8gYOKckyAke3RhYi5uYW1lfWAgOiB0YWIubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogaXNJblRhYiA/ICdyZW1vdmVGcm9tVGFiJyA6ICdhZGRUb1RhYicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJZDogdGFiLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcHRpb25DbGljaz17KG9wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5hY3Rpb24gPT09ICd0b2dnbGVGb2xkZXJzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVQbGF5bGlzdEV4cGFuZChwbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbi5hY3Rpb24gPT09ICdleHBvcnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUV4cG9ydFBsYXlsaXN0KHBsYXlsaXN0LmlkLCBwbGF5bGlzdC5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9uLmFjdGlvbiA9PT0gJ3JlbW92ZUZyb21UYWJDdXJyZW50Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZpbmcgcGxheWxpc3QnLCBwbGF5bGlzdC5pZCwgJ2Zyb20gYWN0aXZlIHRhYicsIGFjdGl2ZVRhYklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUGxheWxpc3RGcm9tVGFiKGFjdGl2ZVRhYklkLCBwbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbi5hY3Rpb24gPT09ICdkZWxldGUnICYmICFvcHRpb24uZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlUGxheWxpc3QocGxheWxpc3QuaWQsIHBsYXlsaXN0Lm5hbWUsIHsgc3RvcFByb3BhZ2F0aW9uOiAoKSA9PiB7IH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbi5hY3Rpb24gPT09ICdhZGRUb1RhYicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkUGxheWxpc3RUb1RhYihvcHRpb24udGFiSWQsIHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9uLmFjdGlvbiA9PT0gJ3JlbW92ZUZyb21UYWInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVBsYXlsaXN0RnJvbVRhYihvcHRpb24udGFiSWQsIHBsYXlsaXN0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyIGZvbGRlciBjYXJkIC0gc2FtZSBzaXplIGFzIHBsYXlsaXN0IGNhcmRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBpdGVtLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyQ29sb3IgPSBnZXRGb2xkZXJDb2xvckJ5SWQoZm9sZGVyLmZvbGRlcl9jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9sZGVySW1hZ2VLZXkgPSBgZm9sZGVyLSR7Zm9sZGVyLnBsYXlsaXN0X2lkfS0ke2ZvbGRlci5mb2xkZXJfY29sb3J9YDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHVtYlVybHMgPSBmb2xkZXIuZmlyc3RfdmlkZW8gPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtYXg6IGdldFRodW1ibmFpbFVybChmb2xkZXIuZmlyc3RfdmlkZW8udmlkZW9faWQsICdtYXgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkOiBnZXRUaHVtYm5haWxVcmwoZm9sZGVyLmZpcnN0X3ZpZGVvLnZpZGVvX2lkLCAnc3RhbmRhcmQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZUZhbGxiYWNrID0gaW1hZ2VMb2FkRXJyb3JzLmhhcyhmb2xkZXJJbWFnZUtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGh1bWJuYWlsVXJsID0gdGh1bWJVcmxzID8gKHVzZUZhbGxiYWNrID8gdGh1bWJVcmxzLnN0YW5kYXJkIDogdGh1bWJVcmxzLm1heCkgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJLZXkgPSBgJHtmb2xkZXIucGxheWxpc3RfaWR9OiR7Zm9sZGVyLmZvbGRlcl9jb2xvcn1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1N0dWNrID0gc3R1Y2tGb2xkZXJzLmhhcyhmb2xkZXJLZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2ZvbGRlci5wbGF5bGlzdF9pZH0tJHtmb2xkZXIuZm9sZGVyX2NvbG9yfS0ke2luZGV4fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgdHJpZ2dlciBpZiBjbGlja2luZyBvbiBtZW51XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWNhcmQtbWVudT1cInRydWVcIl0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRQbGF5bGlzdEl0ZW1zKGZvbGRlci5wbGF5bGlzdF9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgcGFyZW50UGxheWxpc3QgbmFtZSBpZiBhdmFpbGFibGUgKGl0IHNob3VsZCBiZSBhdHRhY2ggdG8gaXRlbSBpbiB0aGUgbGlzdCBidWlsZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWxpc3RUaXRsZSA9IGl0ZW0ucGFyZW50UGxheWxpc3QgPyBpdGVtLnBhcmVudFBsYXlsaXN0Lm5hbWUgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgZm9sZGVyLnBsYXlsaXN0X2lkLCB7IHBsYXlsaXN0X2lkOiBmb2xkZXIucGxheWxpc3RfaWQsIGZvbGRlcl9jb2xvcjogZm9sZGVyLmZvbGRlcl9jb2xvciB9LCBwbGF5bGlzdFRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXIuZmlyc3RfdmlkZW8gJiYgb25WaWRlb1NlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvU2VsZWN0KGZvbGRlci5maXJzdF92aWRlby52aWRlb191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBmb2xkZXIgcGxheWxpc3QgaXRlbXM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgZ3JvdXAgcmVsYXRpdmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0SW5zcGVjdFRpdGxlKGAke2ZvbGRlckNvbG9yLm5hbWV9IGZvbGRlcmApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTcwMC81MCByb3VuZGVkLXhsIHAtMiBiZy1zbGF0ZS04MDAvMjAgaG92ZXI6Ym9yZGVyLXNreS01MDAvNTAgdHJhbnNpdGlvbi1jb2xvcnMgaC1mdWxsIGZsZXggZmxleC1jb2wgJHtTdHJpbmcocGxheWxpc3QuaWQpID09PSBTdHJpbmcoYWN0aXZlUGxheWxpc3RJZCkgPyAnYWN0aXZlLXBsYXlsaXN0LW1hcmtlcicgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYWN0aXZlLXBsYXlsaXN0PXtTdHJpbmcocGxheWxpc3QuaWQpID09PSBTdHJpbmcoYWN0aXZlUGxheWxpc3RJZCkgPyBcInRydWVcIiA6IFwiZmFsc2VcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb2xkZXIgSW5mbyAtIFNhbWUgZm9ybWF0IGFzIHBsYXlsaXN0IGNhcmQgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0yIHJlbGF0aXZlIGJvcmRlci0yIGJvcmRlci1bIzA1MkY0QV0gcm91bmRlZC1tZCBwLTEgYmctc2xhdGUtMTAwLzkwIHNoYWRvdy1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gaC1bMzhweF0gb3ZlcmZsb3ctaGlkZGVuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGp1c3RpZnktY2VudGVyIHBsLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbG9yZWQgZG90IGluZGljYXRvciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMyBoLTMgcm91bmRlZC1mdWxsIGZsZXgtc2hyaW5rLTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogZm9sZGVyQ29sb3IuaGV4IH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNtIHRydW5jYXRlIHRyYW5zaXRpb24tY29sb3JzIHByLThcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnIzA1MkY0QScgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eyhlKSA9PiBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuY29sb3IgPSAnIzM4YmRmOCd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoZSkgPT4gZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmNvbG9yID0gJyMwNTJGNEEnfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9sZGVyQ29sb3IubmFtZX0gRm9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSG92ZXIgQ29udHJvbHMgLSBNb3ZlZCB0byBUaXRsZSBCYXIgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgYWJzb2x1dGUgcmlnaHQtMSB0b3AtMCBib3R0b20tMCBwci0xIHBsLTQgYmctZ3JhZGllbnQtdG8tbCBmcm9tLXNsYXRlLTEwMCB2aWEtc2xhdGUtMTAwIHRvLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2V0VmlkZW9zSW5Gb2xkZXIoZm9sZGVyLnBsYXlsaXN0X2lkLCBmb2xkZXIuZm9sZGVyX2NvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHBhcmVudFBsYXlsaXN0IG5hbWUgaWYgYXZhaWxhYmxlIChpdCBzaG91bGQgYmUgYXR0YWNoIHRvIGl0ZW0gaW4gdGhlIGxpc3QgYnVpbGRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWxpc3RUaXRsZSA9IGl0ZW0ucGFyZW50UGxheWxpc3QgPyBpdGVtLnBhcmVudFBsYXlsaXN0Lm5hbWUgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQbGF5bGlzdEl0ZW1zKGl0ZW1zLCBmb2xkZXIucGxheWxpc3RfaWQsIHsgcGxheWxpc3RfaWQ6IGZvbGRlci5wbGF5bGlzdF9pZCwgZm9sZGVyX2NvbG9yOiBmb2xkZXIuZm9sZGVyX2NvbG9yIH0sIHBsYXlsaXN0VGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCAmJiBvblZpZGVvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdChpdGVtc1swXS52aWRlb191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBmb2xkZXIgcGxheWxpc3QgaXRlbXM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db250ZXh0TWVudT17YXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdldFZpZGVvc0luRm9sZGVyKGZvbGRlci5wbGF5bGlzdF9pZCwgZm9sZGVyLmZvbGRlcl9jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0VGl0bGUgPSBpdGVtLnBhcmVudFBsYXlsaXN0ID8gaXRlbS5wYXJlbnRQbGF5bGlzdC5uYW1lIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgZm9sZGVyLnBsYXlsaXN0X2lkLCB7IHBsYXlsaXN0X2lkOiBmb2xkZXIucGxheWxpc3RfaWQsIGZvbGRlcl9jb2xvcjogZm9sZGVyLmZvbGRlcl9jb2xvciB9LCBwbGF5bGlzdFRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwICYmIG9uVmlkZW9TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0VmlkZW8gPSBpdGVtc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRodW1ibmFpbFVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY292ZXJNYXRjaCA9IGl0ZW1zLmZpbmQodiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFRodW1iID0gZ2V0VGh1bWJuYWlsVXJsKHYudmlkZW9faWQsICdtYXgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RkVGh1bWIgPSBnZXRUaHVtYm5haWxVcmwodi52aWRlb19pZCwgJ3N0YW5kYXJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXhUaHVtYiA9PT0gYWN0aXZlVGh1bWJuYWlsVXJsIHx8IHN0ZFRodW1iID09PSBhY3RpdmVUaHVtYm5haWxVcmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3Zlck1hdGNoKSB0YXJnZXRWaWRlbyA9IGNvdmVyTWF0Y2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9TZWxlY3QodGFyZ2V0VmlkZW8udmlkZW9fdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBsYXkgZm9sZGVyIGNvdmVyOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMSBob3ZlcjpiZy1zbGF0ZS0yMDAgcm91bmRlZCB0ZXh0LVsjMDUyRjRBXSBob3Zlcjp0ZXh0LXNreS02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUGxheSBmb2xkZXIgKFJpZ2h0LWNsaWNrIGZvciBjb3ZlciB2aWRlbylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBsYXkgc2l6ZT17MTh9IGZpbGw9XCJjdXJyZW50Q29sb3JcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRWaWRlb3NJbkZvbGRlcihmb2xkZXIucGxheWxpc3RfaWQsIGZvbGRlci5mb2xkZXJfY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaHVmZmxlZCA9IFsuLi5pdGVtc10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBwYXJlbnRQbGF5bGlzdCBuYW1lIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5bGlzdFRpdGxlID0gaXRlbS5wYXJlbnRQbGF5bGlzdCA/IGl0ZW0ucGFyZW50UGxheWxpc3QubmFtZSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBsYXlsaXN0SXRlbXMoc2h1ZmZsZWQsIGZvbGRlci5wbGF5bGlzdF9pZCwgeyBwbGF5bGlzdF9pZDogZm9sZGVyLnBsYXlsaXN0X2lkLCBmb2xkZXJfY29sb3I6IGZvbGRlci5mb2xkZXJfY29sb3IgfSwgcGxheWxpc3RUaXRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2h1ZmZsZWQubGVuZ3RoID4gMCAmJiBvblZpZGVvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdChzaHVmZmxlZFswXS52aWRlb191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2h1ZmZsZSBmb2xkZXI6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIGhvdmVyOmJnLXNsYXRlLTIwMCByb3VuZGVkIHRleHQtWyMwNTJGNEFdIGhvdmVyOnRleHQtc2t5LTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJTaHVmZmxlIGZvbGRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2h1ZmZsZSBzaXplPXsxOH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogMy1kb3QgbWVudSAtIHJlbW92ZWQgZnJvbSBib3R0b20gcmlnaHQgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUaHVtYm5haWwgLSBTYW1lIGZvcm1hdCBhcyBwbGF5bGlzdCBjYXJkICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmUgZ3JvdXAgbXQtYXV0b1wiIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogJzU2LjI1JScsIC8vIDE2OjkgYXNwZWN0IHJhdGlvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMGYxNzJhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbG9yZWQgbGVmdCBib3JkZXIgaW5kaWNhdG9yICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBsZWZ0LTAgdG9wLTAgYm90dG9tLTAgdy0yIHotMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGZvbGRlckNvbG9yLmhleCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUaHVtYm5haWxVcmwgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2FjdGl2ZVRodW1ibmFpbFVybH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e2ZvbGRlci5maXJzdF92aWRlbz8udGl0bGUgfHwgJ0ZvbGRlciB0aHVtYm5haWwnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlRmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1hZ2VMb2FkRXJyb3JzKHByZXYgPT4gbmV3IFNldChwcmV2KS5hZGQoZm9sZGVySW1hZ2VLZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ6ICdjb3ZlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6ICc4cHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6ICc4cHgnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LXNsYXRlLTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTMgN3YxMGEyIDIgMCAwMDIgMmgxNGEyIDIgMCAwMDItMlY5YTIgMiAwIDAwLTItMmgtNmwtMi0ySDVhMiAyIDAgMDAtMiAyelwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUGxheSBvdmVybGF5IG9uIGhvdmVyIC0gUkVNT1ZFRCAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiAzLWRvdCBtZW51IC0gbW92ZWQgdG8gaG92ZXIgb3ZlcmxheSAoVG9wIFJpZ2h0KSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIgcmlnaHQtMiBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTIwMCB6LTIwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkTWVudVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e1tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGlzU3R1Y2sgPyAnVW5zdGljayBGb2xkZXInIDogJ1N0aWNrIEZvbGRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGlzU3R1Y2sgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSA1YTIgMiAwIDAxMi0yaDEwYTIgMiAwIDAxMiAydjE2bC03LTMuNUw1IDIxVjV6XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAndG9nZ2xlU3RpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3B0aW9uQ2xpY2s9e2FzeW5jIChvcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uYWN0aW9uID09PSAndG9nZ2xlU3RpY2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3R1Y2tTdGF0dXMgPSBhd2FpdCB0b2dnbGVTdHVja0ZvbGRlcihmb2xkZXIucGxheWxpc3RfaWQsIGZvbGRlci5mb2xkZXJfY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlcktleSA9IGAke2ZvbGRlci5wbGF5bGlzdF9pZH06JHtmb2xkZXIuZm9sZGVyX2NvbG9yfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3R1Y2tGb2xkZXJzKHByZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBTZXQocHJldik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3R1Y2tTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5hZGQoZm9sZGVyS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuZGVsZXRlKGZvbGRlcktleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdG9nZ2xlIHN0aWNrIGZvbGRlcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSkoKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8Lz5cclxuICAgICAgKVxyXG4gICAgICB9XHJcbiAgICA8L2RpdiA+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBsYXlsaXN0c1BhZ2U7XHJcblxyXG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL3l0dHYyL3NyYy9jb21wb25lbnRzL1BsYXlsaXN0c1BhZ2UuanN4In0=