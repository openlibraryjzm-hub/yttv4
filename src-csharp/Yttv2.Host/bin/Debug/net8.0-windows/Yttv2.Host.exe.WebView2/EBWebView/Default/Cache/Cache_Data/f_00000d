import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/LikesPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/LikesPage.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useMemo = __vite__cjsImport3_react["useMemo"];
import { usePlaylistStore } from "/src/store/playlistStore.js";
import { getAllPlaylists, getPlaylistItems, createPlaylist, getPlaylistsForVideoIds } from "/src/api/playlistApi.js";
import VideoCard from "/src/components/VideoCard.jsx";
import PageBanner from "/src/components/PageBanner.jsx";
import { useLayoutStore } from "/src/store/layoutStore.js";
import PieGraph from "/src/components/PieGraph.jsx";
import { ChevronLeft, ChevronRight } from "/node_modules/.vite/deps/lucide-react.js?v=cd56faf3";
const COLORS = [
  "#3b82f6",
  // blue-500
  "#ef4444",
  // red-500
  "#10b981",
  // emerald-500
  "#f59e0b",
  // amber-500
  "#8b5cf6",
  // violet-500
  "#ec4899",
  // pink-500
  "#06b6d4",
  // cyan-500
  "#84cc16",
  // lime-500
  "#f43f5e",
  // rose-500
  "#6366f1",
  // indigo-500
  "#14b8a6",
  // teal-500
  "#d946ef"
  // fuchsia-500
];
const ITEMS_PER_PAGE = 24;
const LikesPage = ({ onVideoSelect }) => {
  _s();
  const [likesPlaylistId, setLikesPlaylistId] = useState(null);
  const [likedVideos, setLikedVideos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [distribution, setDistribution] = useState([]);
  const [distLoading, setDistLoading] = useState(false);
  const { currentVideoIndex, currentPlaylistItems } = usePlaylistStore();
  const { inspectMode } = useLayoutStore();
  useEffect(() => {
    const initLikes = async () => {
      setLoading(true);
      try {
        const playlists = await getAllPlaylists();
        let likesPlaylist = playlists.find((p) => p.name === "Likes");
        if (!likesPlaylist) {
          const newId = await createPlaylist("Likes", "Videos you have liked");
          setLikesPlaylistId(newId);
          setLikedVideos([]);
        } else {
          setLikesPlaylistId(likesPlaylist.id);
          const items = await getPlaylistItems(likesPlaylist.id);
          setLikedVideos(items || []);
        }
      } catch (error) {
        console.error("Failed to load likes:", error);
      } finally {
        setLoading(false);
      }
    };
    initLikes();
  }, []);
  const totalPages = Math.ceil(likedVideos.length / ITEMS_PER_PAGE);
  const currentItems = useMemo(() => {
    const start = (currentPage - 1) * ITEMS_PER_PAGE;
    return likedVideos.slice(start, start + ITEMS_PER_PAGE);
  }, [likedVideos, currentPage]);
  useEffect(() => {
    const fetchDistribution = async () => {
      if (currentItems.length === 0) {
        setDistribution([]);
        return;
      }
      setDistLoading(true);
      try {
        const videoIds = currentItems.map((v) => v.video_id);
        const map = await getPlaylistsForVideoIds(videoIds);
        const counts = {};
        Object.values(map).flat().forEach((playlistName) => {
          if (playlistName === "Likes") return;
          counts[playlistName] = (counts[playlistName] || 0) + 1;
        });
        let uncategorizedCount = 0;
        videoIds.forEach((id) => {
          const playlists = map[id] || [];
          const otherPlaylists = playlists.filter((p) => p !== "Likes");
          if (otherPlaylists.length === 0) {
            uncategorizedCount++;
          }
        });
        if (uncategorizedCount > 0) {
          counts["Uncategorized"] = uncategorizedCount;
        }
        const data = Object.entries(counts).map(([name, value], index) => ({
          name,
          value,
          color: name === "Uncategorized" ? "#475569" : COLORS[index % COLORS.length]
        })).sort((a, b) => b.value - a.value);
        setDistribution(data);
      } catch (error) {
        console.error("Failed to fetch distribution:", error);
      } finally {
        setDistLoading(false);
      }
    };
    fetchDistribution();
  }, [currentItems]);
  const renderVideos = () => {
    if (loading) {
      return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center p-12 text-slate-400", children: /* @__PURE__ */ jsxDEV("p", { children: "Loading liked videos..." }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 152,
        columnNumber: 21
      }, this) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 151,
        columnNumber: 9
      }, this);
    }
    if (!likedVideos || likedVideos.length === 0) {
      return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col items-center justify-center p-12 text-slate-400", children: [
        /* @__PURE__ */ jsxDEV("svg", { className: "w-16 h-16 mb-4 opacity-50", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 1.5, d: "M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 161,
          columnNumber: 25
        }, this) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 160,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("h3", { className: "text-xl font-medium mb-2", children: "No Liked Videos" }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 163,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("p", { children: "Videos you like will appear here." }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 164,
          columnNumber: 21
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 159,
        columnNumber: 9
      }, this);
    }
    return /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4", children: currentItems.map((video, index) => {
      const isCurrentlyPlaying = currentPlaylistItems?.[currentVideoIndex]?.id === video.id;
      const displayIndex = (currentPage - 1) * ITEMS_PER_PAGE + index;
      return /* @__PURE__ */ jsxDEV(
        VideoCard,
        {
          video,
          index: displayIndex,
          originalIndex: displayIndex,
          isSelected: false,
          isCurrentlyPlaying,
          videoFolders: [],
          onVideoSelect,
          onVideoClick: () => onVideoSelect(video.video_url)
        },
        video.id || `liked-${index}`,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 176,
          columnNumber: 13
        },
        this
      );
    }) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
      lineNumber: 170,
      columnNumber: 7
    }, this);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex flex-col bg-transparent", children: /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-y-auto custom-scrollbar", children: [
    /* @__PURE__ */ jsxDEV(
      PageBanner,
      {
        title: "Liked Videos",
        description: "Your collection of liked videos.",
        color: null,
        isEditable: false,
        children: distribution.length > 0 && !loading && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center", children: /* @__PURE__ */ jsxDEV(PieGraph, { data: distribution, size: 160 }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 205,
          columnNumber: 29
        }, this) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 204,
          columnNumber: 11
        }, this)
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 196,
        columnNumber: 17
      },
      this
    ),
    /* @__PURE__ */ jsxDEV("div", { className: "p-6 space-y-8", children: [
      totalPages > 1 && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-between items-center bg-slate-900/40 p-3 rounded-lg border border-white/5 backdrop-blur-sm", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "text-sm text-slate-400", children: [
          "Page ",
          /* @__PURE__ */ jsxDEV("span", { className: "text-white font-medium", children: currentPage }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
            lineNumber: 218,
            columnNumber: 38
          }, this),
          " of ",
          /* @__PURE__ */ jsxDEV("span", { className: "text-white font-medium", children: totalPages }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
            lineNumber: 218,
            columnNumber: 103
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 217,
          columnNumber: 29
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => setCurrentPage((p) => Math.max(1, p - 1)),
              disabled: currentPage === 1,
              className: "p-2 rounded hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",
              children: /* @__PURE__ */ jsxDEV(ChevronLeft, { className: "w-5 h-5" }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
                lineNumber: 226,
                columnNumber: 37
              }, this)
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
              lineNumber: 221,
              columnNumber: 33
            },
            this
          ),
          /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => setCurrentPage((p) => Math.min(totalPages, p + 1)),
              disabled: currentPage === totalPages,
              className: "p-2 rounded hover:bg-white/10 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",
              children: /* @__PURE__ */ jsxDEV(ChevronRight, { className: "w-5 h-5" }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
                lineNumber: 233,
                columnNumber: 37
              }, this)
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
              lineNumber: 228,
              columnNumber: 33
            },
            this
          )
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 220,
          columnNumber: 29
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 216,
        columnNumber: 11
      }, this),
      renderVideos(),
      totalPages > 1 && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center mt-8 pb-4", children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 bg-slate-900/60 rounded-full px-4 py-2 border border-white/10 backdrop-blur-md shadow-lg", children: [
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: () => setCurrentPage((p) => Math.max(1, p - 1)),
            disabled: currentPage === 1,
            className: "p-2 rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors",
            children: /* @__PURE__ */ jsxDEV(ChevronLeft, { className: "w-4 h-4" }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
              lineNumber: 250,
              columnNumber: 37
            }, this)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
            lineNumber: 245,
            columnNumber: 33
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("div", { className: "flex gap-1", children: Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
          let pageNum = i + 1;
          if (totalPages > 5) {
            if (currentPage > 3) {
              pageNum = currentPage - 2 + i;
            }
            if (pageNum > totalPages) {
              pageNum = totalPages - 4 + i;
            }
          }
          if (pageNum < 1) pageNum = i + 1;
          return /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => setCurrentPage(pageNum),
              className: `w-8 h-8 rounded-full text-xs font-medium transition-all ${currentPage === pageNum ? "bg-blue-500 text-white shadow-lg scale-110" : "text-slate-400 hover:bg-white/10 hover:text-white"}`,
              children: pageNum
            },
            pageNum,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
              lineNumber: 268,
              columnNumber: 21
            },
            this
          );
        }) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
          lineNumber: 253,
          columnNumber: 33
        }, this),
        /* @__PURE__ */ jsxDEV(
          "button",
          {
            onClick: () => setCurrentPage((p) => Math.min(totalPages, p + 1)),
            disabled: currentPage === totalPages,
            className: "p-2 rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors",
            children: /* @__PURE__ */ jsxDEV(ChevronRight, { className: "w-4 h-4" }, void 0, false, {
              fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
              lineNumber: 287,
              columnNumber: 37
            }, this)
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
            lineNumber: 282,
            columnNumber: 33
          },
          this
        )
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 244,
        columnNumber: 29
      }, this) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
        lineNumber: 243,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
      lineNumber: 210,
      columnNumber: 17
    }, this)
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
    lineNumber: 195,
    columnNumber: 13
  }, this) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/LikesPage.jsx",
    lineNumber: 194,
    columnNumber: 5
  }, this);
};
_s(LikesPage, "k0WVBfpqh2Hau5MP20THjOme7Hg=", false, function() {
  return [usePlaylistStore, useLayoutStore];
});
_c = LikesPage;
export default LikesPage;
var _c;
$RefreshReg$(_c, "LikesPage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/LikesPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/LikesPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUVSO0FBQUUzQixHQTFQSUYsV0FBUztBQUFBLFVBVXlDYixrQkFDNUJPLGNBQWM7QUFBQTtBQUFBNEUsS0FYcEN0RTtBQTRQTixlQUFlQTtBQUFVLElBQUFzRTtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VQbGF5bGlzdFN0b3JlIiwiZ2V0QWxsUGxheWxpc3RzIiwiZ2V0UGxheWxpc3RJdGVtcyIsImNyZWF0ZVBsYXlsaXN0IiwiZ2V0UGxheWxpc3RzRm9yVmlkZW9JZHMiLCJWaWRlb0NhcmQiLCJQYWdlQmFubmVyIiwidXNlTGF5b3V0U3RvcmUiLCJQaWVHcmFwaCIsIkNoZXZyb25MZWZ0IiwiQ2hldnJvblJpZ2h0IiwiQ09MT1JTIiwiSVRFTVNfUEVSX1BBR0UiLCJMaWtlc1BhZ2UiLCJvblZpZGVvU2VsZWN0IiwiX3MiLCJsaWtlc1BsYXlsaXN0SWQiLCJzZXRMaWtlc1BsYXlsaXN0SWQiLCJsaWtlZFZpZGVvcyIsInNldExpa2VkVmlkZW9zIiwibG9hZGluZyIsInNldExvYWRpbmciLCJjdXJyZW50UGFnZSIsInNldEN1cnJlbnRQYWdlIiwiZGlzdHJpYnV0aW9uIiwic2V0RGlzdHJpYnV0aW9uIiwiZGlzdExvYWRpbmciLCJzZXREaXN0TG9hZGluZyIsImN1cnJlbnRWaWRlb0luZGV4IiwiY3VycmVudFBsYXlsaXN0SXRlbXMiLCJpbnNwZWN0TW9kZSIsImluaXRMaWtlcyIsInBsYXlsaXN0cyIsImxpa2VzUGxheWxpc3QiLCJmaW5kIiwicCIsIm5hbWUiLCJuZXdJZCIsImlkIiwiaXRlbXMiLCJlcnJvciIsImNvbnNvbGUiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJsZW5ndGgiLCJjdXJyZW50SXRlbXMiLCJzdGFydCIsInNsaWNlIiwiZmV0Y2hEaXN0cmlidXRpb24iLCJ2aWRlb0lkcyIsIm1hcCIsInYiLCJ2aWRlb19pZCIsImNvdW50cyIsIk9iamVjdCIsInZhbHVlcyIsImZsYXQiLCJmb3JFYWNoIiwicGxheWxpc3ROYW1lIiwidW5jYXRlZ29yaXplZENvdW50Iiwib3RoZXJQbGF5bGlzdHMiLCJmaWx0ZXIiLCJkYXRhIiwiZW50cmllcyIsInZhbHVlIiwiaW5kZXgiLCJjb2xvciIsInNvcnQiLCJhIiwiYiIsInJlbmRlclZpZGVvcyIsInZpZGVvIiwiaXNDdXJyZW50bHlQbGF5aW5nIiwiZGlzcGxheUluZGV4IiwidmlkZW9fdXJsIiwibWF4IiwibWluIiwiQXJyYXkiLCJmcm9tIiwiXyIsImkiLCJwYWdlTnVtIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiTGlrZXNQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUGxheWxpc3RTdG9yZSB9IGZyb20gJy4uL3N0b3JlL3BsYXlsaXN0U3RvcmUnO1xyXG5pbXBvcnQgeyBnZXRBbGxQbGF5bGlzdHMsIGdldFBsYXlsaXN0SXRlbXMsIGNyZWF0ZVBsYXlsaXN0LCBnZXRQbGF5bGlzdHNGb3JWaWRlb0lkcyB9IGZyb20gJy4uL2FwaS9wbGF5bGlzdEFwaSc7XHJcbmltcG9ydCBWaWRlb0NhcmQgZnJvbSAnLi9WaWRlb0NhcmQnO1xyXG5pbXBvcnQgUGFnZUJhbm5lciBmcm9tICcuL1BhZ2VCYW5uZXInO1xyXG5pbXBvcnQgeyB1c2VMYXlvdXRTdG9yZSB9IGZyb20gJy4uL3N0b3JlL2xheW91dFN0b3JlJztcclxuaW1wb3J0IFBpZUdyYXBoIGZyb20gJy4vUGllR3JhcGgnO1xyXG5pbXBvcnQgeyBDaGV2cm9uTGVmdCwgQ2hldnJvblJpZ2h0IH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuXHJcbmNvbnN0IENPTE9SUyA9IFtcclxuICAgICcjM2I4MmY2JywgLy8gYmx1ZS01MDBcclxuICAgICcjZWY0NDQ0JywgLy8gcmVkLTUwMFxyXG4gICAgJyMxMGI5ODEnLCAvLyBlbWVyYWxkLTUwMFxyXG4gICAgJyNmNTllMGInLCAvLyBhbWJlci01MDBcclxuICAgICcjOGI1Y2Y2JywgLy8gdmlvbGV0LTUwMFxyXG4gICAgJyNlYzQ4OTknLCAvLyBwaW5rLTUwMFxyXG4gICAgJyMwNmI2ZDQnLCAvLyBjeWFuLTUwMFxyXG4gICAgJyM4NGNjMTYnLCAvLyBsaW1lLTUwMFxyXG4gICAgJyNmNDNmNWUnLCAvLyByb3NlLTUwMFxyXG4gICAgJyM2MzY2ZjEnLCAvLyBpbmRpZ28tNTAwXHJcbiAgICAnIzE0YjhhNicsIC8vIHRlYWwtNTAwXHJcbiAgICAnI2Q5NDZlZicsIC8vIGZ1Y2hzaWEtNTAwXHJcbl07XHJcblxyXG5jb25zdCBJVEVNU19QRVJfUEFHRSA9IDI0O1xyXG5cclxuY29uc3QgTGlrZXNQYWdlID0gKHsgb25WaWRlb1NlbGVjdCB9KSA9PiB7XHJcbiAgICBjb25zdCBbbGlrZXNQbGF5bGlzdElkLCBzZXRMaWtlc1BsYXlsaXN0SWRdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbbGlrZWRWaWRlb3MsIHNldExpa2VkVmlkZW9zXSA9IHVzZVN0YXRlKFtdKTtcclxuICAgIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gICAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZSgxKTtcclxuXHJcbiAgICAvLyBEaXN0cmlidXRpb24gc3RhdGVcclxuICAgIGNvbnN0IFtkaXN0cmlidXRpb24sIHNldERpc3RyaWJ1dGlvbl0gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbZGlzdExvYWRpbmcsIHNldERpc3RMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgICBjb25zdCB7IGN1cnJlbnRWaWRlb0luZGV4LCBjdXJyZW50UGxheWxpc3RJdGVtcyB9ID0gdXNlUGxheWxpc3RTdG9yZSgpO1xyXG4gICAgY29uc3QgeyBpbnNwZWN0TW9kZSB9ID0gdXNlTGF5b3V0U3RvcmUoKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluaXRMaWtlcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0cyA9IGF3YWl0IGdldEFsbFBsYXlsaXN0cygpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpa2VzUGxheWxpc3QgPSBwbGF5bGlzdHMuZmluZChwID0+IHAubmFtZSA9PT0gJ0xpa2VzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGlmIGRvZXNuJ3QgZXhpc3QgKGNvbnNpc3RlbmN5IHdpdGggUGxheWVyQ29udHJvbGxlcilcclxuICAgICAgICAgICAgICAgIGlmICghbGlrZXNQbGF5bGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gYXdhaXQgY3JlYXRlUGxheWxpc3QoJ0xpa2VzJywgJ1ZpZGVvcyB5b3UgaGF2ZSBsaWtlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExpa2VzUGxheWxpc3RJZChuZXdJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TGlrZWRWaWRlb3MoW10pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRMaWtlc1BsYXlsaXN0SWQobGlrZXNQbGF5bGlzdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRQbGF5bGlzdEl0ZW1zKGxpa2VzUGxheWxpc3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExpa2VkVmlkZW9zKGl0ZW1zIHx8IFtdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGxpa2VzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbml0TGlrZXMoKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICAvLyBQYWdpbmF0aW9uIExvZ2ljXHJcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKGxpa2VkVmlkZW9zLmxlbmd0aCAvIElURU1TX1BFUl9QQUdFKTtcclxuICAgIGNvbnN0IGN1cnJlbnRJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gKGN1cnJlbnRQYWdlIC0gMSkgKiBJVEVNU19QRVJfUEFHRTtcclxuICAgICAgICByZXR1cm4gbGlrZWRWaWRlb3Muc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgSVRFTVNfUEVSX1BBR0UpO1xyXG4gICAgfSwgW2xpa2VkVmlkZW9zLCBjdXJyZW50UGFnZV0pO1xyXG5cclxuICAgIC8vIEZldGNoIERpc3RyaWJ1dGlvbiBmb3IgQ1VSUkVOVCBQQUdFXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZldGNoRGlzdHJpYnV0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0RGlzdHJpYnV0aW9uKFtdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2V0RGlzdExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0lkcyA9IGN1cnJlbnRJdGVtcy5tYXAodiA9PiB2LnZpZGVvX2lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcCA9IGF3YWl0IGdldFBsYXlsaXN0c0ZvclZpZGVvSWRzKHZpZGVvSWRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIG1hcCB0byBjb3VudCBwbGF5bGlzdCBvY2N1cnJlbmNlc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY291bnRzID0ge307XHJcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKG1hcCkuZmxhdCgpLmZvckVhY2gocGxheWxpc3ROYW1lID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxheWxpc3ROYW1lID09PSAnTGlrZXMnKSByZXR1cm47IC8vIEV4Y2x1ZGUgJ0xpa2VzJyBpdHNlbGZcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHNbcGxheWxpc3ROYW1lXSA9IChjb3VudHNbcGxheWxpc3ROYW1lXSB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUcmFjayB2aWRlb3Mgd2l0aCBOTyBvdGhlciBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmlkZW9faWQgaGFzIGVudHJpZXMgaW4gbWFwIGV4Y2x1ZGluZyAnTGlrZXMnXHJcbiAgICAgICAgICAgICAgICBsZXQgdW5jYXRlZ29yaXplZENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIHZpZGVvSWRzLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0cyA9IG1hcFtpZF0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJQbGF5bGlzdHMgPSBwbGF5bGlzdHMuZmlsdGVyKHAgPT4gcCAhPT0gJ0xpa2VzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVyUGxheWxpc3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmNhdGVnb3JpemVkQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodW5jYXRlZ29yaXplZENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50c1snVW5jYXRlZ29yaXplZCddID0gdW5jYXRlZ29yaXplZENvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gYXJyYXlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBPYmplY3QuZW50cmllcyhjb3VudHMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW25hbWUsIHZhbHVlXSwgaW5kZXgpID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogbmFtZSA9PT0gJ1VuY2F0ZWdvcml6ZWQnID8gJyM0NzU1NjknIDogQ09MT1JTW2luZGV4ICUgQ09MT1JTLmxlbmd0aF1cclxuICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi52YWx1ZSAtIGEudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldERpc3RyaWJ1dGlvbihkYXRhKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBkaXN0cmlidXRpb246JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgc2V0RGlzdExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmV0Y2hEaXN0cmlidXRpb24oKTtcclxuICAgIH0sIFtjdXJyZW50SXRlbXNdKTtcclxuXHJcbiAgICAvLyBSZW5kZXIgdmlkZW8gY2FyZHNcclxuICAgIGNvbnN0IHJlbmRlclZpZGVvcyA9ICgpID0+IHtcclxuICAgICAgICBpZiAobG9hZGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTEyIHRleHQtc2xhdGUtNDAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+TG9hZGluZyBsaWtlZCB2aWRlb3MuLi48L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbGlrZWRWaWRlb3MgfHwgbGlrZWRWaWRlb3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtMTIgdGV4dC1zbGF0ZS00MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMTYgaC0xNiBtYi00IG9wYWNpdHktNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsxLjV9IGQ9XCJNNC4zMTggNi4zMThhNC41IDQuNSAwIDAwMCA2LjM2NEwxMiAyMC4zNjRsNy42ODItNy42ODJhNC41IDQuNSAwIDAwLTYuMzY0LTYuMzY0TDEyIDcuNjM2bC0xLjMxOC0xLjMxOGE0LjUgNC41IDAgMDAtNi4zNjQgMHpcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtbWVkaXVtIG1iLTJcIj5ObyBMaWtlZCBWaWRlb3M8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPlZpZGVvcyB5b3UgbGlrZSB3aWxsIGFwcGVhciBoZXJlLjwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIHhsOmdyaWQtY29scy00IGdhcC00XCI+XHJcbiAgICAgICAgICAgICAgICB7Y3VycmVudEl0ZW1zLm1hcCgodmlkZW8sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlQbGF5aW5nID0gY3VycmVudFBsYXlsaXN0SXRlbXM/LltjdXJyZW50VmlkZW9JbmRleF0/LmlkID09PSB2aWRlby5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5SW5kZXggPSAoY3VycmVudFBhZ2UgLSAxKSAqIElURU1TX1BFUl9QQUdFICsgaW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxWaWRlb0NhcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dmlkZW8uaWQgfHwgYGxpa2VkLSR7aW5kZXh9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvPXt2aWRlb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtkaXNwbGF5SW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEluZGV4PXtkaXNwbGF5SW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3VycmVudGx5UGxheWluZz17aXNDdXJyZW50bHlQbGF5aW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9Gb2xkZXJzPXtbXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9TZWxlY3Q9e29uVmlkZW9TZWxlY3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvQ2xpY2s9eygpID0+IG9uVmlkZW9TZWxlY3QodmlkZW8udmlkZW9fdXJsKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGZsZXggZmxleC1jb2wgYmctdHJhbnNwYXJlbnRcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIGN1c3RvbS1zY3JvbGxiYXJcIj5cclxuICAgICAgICAgICAgICAgIDxQYWdlQmFubmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJMaWtlZCBWaWRlb3NcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPVwiWW91ciBjb2xsZWN0aW9uIG9mIGxpa2VkIHZpZGVvcy5cIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yPXtudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIGlzRWRpdGFibGU9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBHcmFwaCBpbiBCYW5uZXIgKi99XHJcbiAgICAgICAgICAgICAgICAgICAge2Rpc3RyaWJ1dGlvbi5sZW5ndGggPiAwICYmICFsb2FkaW5nICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGllR3JhcGggZGF0YT17ZGlzdHJpYnV0aW9ufSBzaXplPXsxNjB9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L1BhZ2VCYW5uZXI+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTYgc3BhY2UteS04XCI+XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFBhZ2luYXRpb24gQ29udHJvbHMgKFRvcCkgKi99XHJcbiAgICAgICAgICAgICAgICAgICAge3RvdGFsUGFnZXMgPiAxICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYmctc2xhdGUtOTAwLzQwIHAtMyByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItd2hpdGUvNSBiYWNrZHJvcC1ibHVyLXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zbGF0ZS00MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYWdlIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgZm9udC1tZWRpdW1cIj57Y3VycmVudFBhZ2V9PC9zcGFuPiBvZiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtXCI+e3RvdGFsUGFnZXN9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKHAgPT4gTWF0aC5tYXgoMSwgcCAtIDEpKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgcm91bmRlZCBob3ZlcjpiZy13aGl0ZS8xMCBkaXNhYmxlZDpvcGFjaXR5LTMwIGRpc2FibGVkOmhvdmVyOmJnLXRyYW5zcGFyZW50IHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uTGVmdCBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKHAgPT4gTWF0aC5taW4odG90YWxQYWdlcywgcCArIDEpKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSB0b3RhbFBhZ2VzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgcm91bmRlZCBob3ZlcjpiZy13aGl0ZS8xMCBkaXNhYmxlZDpvcGFjaXR5LTMwIGRpc2FibGVkOmhvdmVyOmJnLXRyYW5zcGFyZW50IHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAge3JlbmRlclZpZGVvcygpfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7LyogUGFnaW5hdGlvbiBDb250cm9scyAoQm90dG9tKSAqL31cclxuICAgICAgICAgICAgICAgICAgICB7dG90YWxQYWdlcyA+IDEgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgbXQtOCBwYi00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLXNsYXRlLTkwMC82MCByb3VuZGVkLWZ1bGwgcHgtNCBweS0yIGJvcmRlciBib3JkZXItd2hpdGUvMTAgYmFja2Ryb3AtYmx1ci1tZCBzaGFkb3ctbGdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKHAgPT4gTWF0aC5tYXgoMSwgcCAtIDEpKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXdoaXRlLzEwIGRpc2FibGVkOm9wYWNpdHktMzAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZXZyb25MZWZ0IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0FycmF5LmZyb20oeyBsZW5ndGg6IE1hdGgubWluKDUsIHRvdGFsUGFnZXMpIH0sIChfLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZU51bSA9IGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsUGFnZXMgPiA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlID4gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlTnVtID0gY3VycmVudFBhZ2UgLSAyICsgaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VOdW0gPiB0b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSB0b3RhbFBhZ2VzIC0gNCArIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWdlTnVtIDwgMSkgcGFnZU51bSA9IGkgKyAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3BhZ2VOdW19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKHBhZ2VOdW0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LTggaC04IHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tYWxsICR7Y3VycmVudFBhZ2UgPT09IHBhZ2VOdW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtNTAwIHRleHQtd2hpdGUgc2hhZG93LWxnIHNjYWxlLTExMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ3RleHQtc2xhdGUtNDAwIGhvdmVyOmJnLXdoaXRlLzEwIGhvdmVyOnRleHQtd2hpdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwYWdlTnVtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UocCA9PiBNYXRoLm1pbih0b3RhbFBhZ2VzLCBwICsgMSkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPT09IHRvdGFsUGFnZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6Ymctd2hpdGUvMTAgZGlzYWJsZWQ6b3BhY2l0eS0zMCB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvblJpZ2h0IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGlrZXNQYWdlO1xyXG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL3l0dHYyL3NyYy9jb21wb25lbnRzL0xpa2VzUGFnZS5qc3gifQ==