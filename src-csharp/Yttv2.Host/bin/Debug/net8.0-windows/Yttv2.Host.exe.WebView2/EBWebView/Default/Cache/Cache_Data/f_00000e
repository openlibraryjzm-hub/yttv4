import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/PinsPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/PinsPage.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useMemo = __vite__cjsImport3_react["useMemo"];
import { usePinStore } from "/src/store/pinStore.js";
import { usePlaylistStore } from "/src/store/playlistStore.js";
import { useLayoutStore } from "/src/store/layoutStore.js";
import VideoCard from "/src/components/VideoCard.jsx";
import PageBanner from "/src/components/PageBanner.jsx";
import StickyVideoCarousel from "/src/components/StickyVideoCarousel.jsx";
const PinsPage = ({ onVideoSelect }) => {
  _s();
  const { pinnedVideos, priorityPinIds } = usePinStore();
  const { currentVideoIndex, currentPlaylistItems } = usePlaylistStore();
  const { inspectMode } = useLayoutStore();
  const getInspectTitle = (label) => inspectMode ? label : void 0;
  const { priorityVideos, regularVideos } = useMemo(() => {
    if (!pinnedVideos) return { priorityVideos: [], regularVideos: [] };
    const priority = [];
    const regular = [];
    const priorityIds = priorityPinIds || [];
    pinnedVideos.forEach((video) => {
      if (priorityIds.includes(video.id)) {
        priority.push(video);
      } else {
        regular.push(video);
      }
    });
    priority.sort((a, b) => {
      return priorityIds.indexOf(a.id) - priorityIds.indexOf(b.id);
    });
    regular.sort((a, b) => {
      const timeA = a.pinnedAt || 0;
      const timeB = b.pinnedAt || 0;
      return timeB - timeA;
    });
    return { priorityVideos: priority, regularVideos: regular };
  }, [pinnedVideos, priorityPinIds]);
  const renderContent = () => {
    if (!pinnedVideos || pinnedVideos.length === 0) {
      return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col items-center justify-center p-12 text-slate-400", children: [
        /* @__PURE__ */ jsxDEV("svg", { className: "w-16 h-16 mb-4 opacity-50", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 1.5, d: "M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
          lineNumber: 75,
          columnNumber: 25
        }, this) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
          lineNumber: 74,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("h3", { className: "text-xl font-medium mb-2", children: "No Pinned Videos" }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
          lineNumber: 77,
          columnNumber: 21
        }, this),
        /* @__PURE__ */ jsxDEV("p", { children: "Pin videos from any playlist to access them quickly here." }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
          lineNumber: 78,
          columnNumber: 21
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
        lineNumber: 73,
        columnNumber: 9
      }, this);
    }
    const carouselVideos = priorityVideos.slice(0, 10);
    return /* @__PURE__ */ jsxDEV("div", { className: "flex flex-col gap-4", children: [
      carouselVideos.length > 0 && /* @__PURE__ */ jsxDEV(StickyVideoCarousel, { title: "Priority Pins - History", children: carouselVideos.map((video, index) => {
        const isCurrentlyPlaying = currentPlaylistItems?.[currentVideoIndex]?.id === video.id;
        return /* @__PURE__ */ jsxDEV(
          VideoCard,
          {
            video,
            index,
            originalIndex: index,
            isSelected: false,
            isCurrentlyPlaying,
            videoFolders: [],
            onVideoSelect,
            onVideoClick: () => onVideoSelect(video.video_url)
          },
          video.id || `priority-${index}`,
          false,
          {
            fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
            lineNumber: 94,
            columnNumber: 15
          },
          this
        );
      }) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
        lineNumber: 90,
        columnNumber: 9
      }, this),
      regularVideos.length > 0 && /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: regularVideos.map((video, index) => {
        const isCurrentlyPlaying = currentPlaylistItems?.[currentVideoIndex]?.id === video.id;
        return /* @__PURE__ */ jsxDEV(
          VideoCard,
          {
            video,
            index,
            originalIndex: index,
            isSelected: false,
            isCurrentlyPlaying,
            videoFolders: [],
            onVideoSelect,
            onVideoClick: () => onVideoSelect(video.video_url),
            showTimer: true
          },
          video.id || `pinned-${index}`,
          false,
          {
            fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
            lineNumber: 116,
            columnNumber: 15
          },
          this
        );
      }) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
        lineNumber: 112,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
      lineNumber: 87,
      columnNumber: 7
    }, this);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex flex-col bg-transparent", children: /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-y-auto p-4", children: [
    /* @__PURE__ */ jsxDEV(
      PageBanner,
      {
        title: "Pinned Videos",
        description: null,
        color: null,
        isEditable: false,
        topRightContent: priorityVideos.length > 0 ? /* @__PURE__ */ jsxDEV(
          "div",
          {
            className: "relative group cursor-pointer w-64 aspect-video rounded-xl overflow-hidden shadow-2xl border-2 border-transparent hover:border-white/50 transition-all",
            onClick: () => onVideoSelect(priorityVideos[0].video_url),
            children: [
              /* @__PURE__ */ jsxDEV(
                "img",
                {
                  src: `https://img.youtube.com/vi/${priorityVideos[0].video_id}/maxresdefault.jpg`,
                  alt: priorityVideos[0].title,
                  className: "w-full h-full object-cover"
                },
                void 0,
                false,
                {
                  fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                  lineNumber: 150,
                  columnNumber: 29
                },
                this
              ),
              /* @__PURE__ */ jsxDEV("div", { className: "absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors flex items-center justify-center", children: /* @__PURE__ */ jsxDEV("div", { className: "w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsxDEV("svg", { className: "w-6 h-6 text-white fill-current", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { d: "M8 5v14l11-7z" }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 158,
                columnNumber: 41
              }, this) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 157,
                columnNumber: 37
              }, this) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 156,
                columnNumber: 33
              }, this) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 155,
                columnNumber: 29
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "absolute bottom-2 left-2 right-2", children: /* @__PURE__ */ jsxDEV("p", { className: "text-white text-xs font-medium truncate shadow-black drop-shadow-md", children: priorityVideos[0].title }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 163,
                columnNumber: 33
              }, this) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
                lineNumber: 162,
                columnNumber: 29
              }, this)
            ]
          },
          void 0,
          true,
          {
            fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
            lineNumber: 146,
            columnNumber: 11
          },
          this
        ) : null
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
        lineNumber: 140,
        columnNumber: 17
      },
      this
    ),
    renderContent()
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
    lineNumber: 139,
    columnNumber: 13
  }, this) }, void 0, false, {
    fileName: "C:/Projects/yttv2/src/components/PinsPage.jsx",
    lineNumber: 138,
    columnNumber: 5
  }, this);
};
_s(PinsPage, "wwVwHGz73r9JB3SHTLTqJkhH2Uk=", false, function() {
  return [usePinStore, usePlaylistStore, useLayoutStore];
});
_c = PinsPage;
export default PinsPage;
var _c;
$RefreshReg$(_c, "PinsPage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/PinsPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/PinsPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QVMsSUFBQXNDO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJSZWFjdCIsInVzZU1lbW8iLCJ1c2VQaW5TdG9yZSIsInVzZVBsYXlsaXN0U3RvcmUiLCJ1c2VMYXlvdXRTdG9yZSIsIlZpZGVvQ2FyZCIsIlBhZ2VCYW5uZXIiLCJTdGlja3lWaWRlb0Nhcm91c2VsIiwiUGluc1BhZ2UiLCJvblZpZGVvU2VsZWN0IiwiX3MiLCJwaW5uZWRWaWRlb3MiLCJwcmlvcml0eVBpbklkcyIsImN1cnJlbnRWaWRlb0luZGV4IiwiY3VycmVudFBsYXlsaXN0SXRlbXMiLCJpbnNwZWN0TW9kZSIsImdldEluc3BlY3RUaXRsZSIsImxhYmVsIiwidW5kZWZpbmVkIiwicHJpb3JpdHlWaWRlb3MiLCJyZWd1bGFyVmlkZW9zIiwicHJpb3JpdHkiLCJyZWd1bGFyIiwicHJpb3JpdHlJZHMiLCJmb3JFYWNoIiwidmlkZW8iLCJpbmNsdWRlcyIsImlkIiwicHVzaCIsInNvcnQiLCJhIiwiYiIsImluZGV4T2YiLCJ0aW1lQSIsInBpbm5lZEF0IiwidGltZUIiLCJyZW5kZXJDb250ZW50IiwibGVuZ3RoIiwiY2Fyb3VzZWxWaWRlb3MiLCJzbGljZSIsIm1hcCIsImluZGV4IiwiaXNDdXJyZW50bHlQbGF5aW5nIiwidmlkZW9fdXJsIiwidmlkZW9faWQiLCJ0aXRsZSIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIlBpbnNQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUGluU3RvcmUgfSBmcm9tICcuLi9zdG9yZS9waW5TdG9yZSc7XHJcbmltcG9ydCB7IHVzZVBsYXlsaXN0U3RvcmUgfSBmcm9tICcuLi9zdG9yZS9wbGF5bGlzdFN0b3JlJztcclxuaW1wb3J0IHsgdXNlTGF5b3V0U3RvcmUgfSBmcm9tICcuLi9zdG9yZS9sYXlvdXRTdG9yZSc7XHJcbmltcG9ydCBWaWRlb0NhcmQgZnJvbSAnLi9WaWRlb0NhcmQnO1xyXG5pbXBvcnQgUGFnZUJhbm5lciBmcm9tICcuL1BhZ2VCYW5uZXInO1xyXG5pbXBvcnQgU3RpY2t5VmlkZW9DYXJvdXNlbCBmcm9tICcuL1N0aWNreVZpZGVvQ2Fyb3VzZWwnO1xyXG5cclxuY29uc3QgUGluc1BhZ2UgPSAoeyBvblZpZGVvU2VsZWN0IH0pID0+IHtcclxuICAgIGNvbnN0IHsgcGlubmVkVmlkZW9zLCBwcmlvcml0eVBpbklkcyB9ID0gdXNlUGluU3RvcmUoKTtcclxuICAgIGNvbnN0IHsgY3VycmVudFZpZGVvSW5kZXgsIGN1cnJlbnRQbGF5bGlzdEl0ZW1zIH0gPSB1c2VQbGF5bGlzdFN0b3JlKCk7XHJcbiAgICBjb25zdCB7IGluc3BlY3RNb2RlIH0gPSB1c2VMYXlvdXRTdG9yZSgpO1xyXG5cclxuICAgIC8vIEhlbHBlciB0byBnZXQgaW5zcGVjdCBsYWJlbFxyXG4gICAgY29uc3QgZ2V0SW5zcGVjdFRpdGxlID0gKGxhYmVsKSA9PiBpbnNwZWN0TW9kZSA/IGxhYmVsIDogdW5kZWZpbmVkO1xyXG5cclxuICAgIC8vIFNwbGl0IHZpZGVvcyBpbnRvIFByaW9yaXR5IGFuZCBSZWd1bGFyXHJcbiAgICBjb25zdCB7IHByaW9yaXR5VmlkZW9zLCByZWd1bGFyVmlkZW9zIH0gPSB1c2VNZW1vKCgpID0+IHtcclxuICAgICAgICBpZiAoIXBpbm5lZFZpZGVvcykgcmV0dXJuIHsgcHJpb3JpdHlWaWRlb3M6IFtdLCByZWd1bGFyVmlkZW9zOiBbXSB9O1xyXG5cclxuICAgICAgICBjb25zdCBwcmlvcml0eSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlZ3VsYXIgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gVXNlIFNldCBmb3IgZmFzdCBsb29rdXAgaWYgd2UgaGFkIG1hbnkgSURzLCBidXQgYXJyYXkgaW5jbHVkZXMgaXMgZmluZSBmb3Igc21hbGwgbGlzdHNcclxuICAgICAgICBjb25zdCBwcmlvcml0eUlkcyA9IHByaW9yaXR5UGluSWRzIHx8IFtdO1xyXG5cclxuICAgICAgICAvLyBEaXN0cmlidXRlIHZpZGVvc1xyXG4gICAgICAgIHBpbm5lZFZpZGVvcy5mb3JFYWNoKHZpZGVvID0+IHtcclxuICAgICAgICAgICAgaWYgKHByaW9yaXR5SWRzLmluY2x1ZGVzKHZpZGVvLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHkucHVzaCh2aWRlbyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWd1bGFyLnB1c2godmlkZW8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNvcnQgcHJpb3JpdHkgdmlkZW9zIGJ5IHRoZWlyIG9yZGVyIGluIHByaW9yaXR5UGluSWRzIChtb3N0IHJlY2VudCBmaXJzdClcclxuICAgICAgICBwcmlvcml0eS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmlvcml0eUlkcy5pbmRleE9mKGEuaWQpIC0gcHJpb3JpdHlJZHMuaW5kZXhPZihiLmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU29ydCByZWd1bGFyIHZpZGVvcyBieSBwaW5uZWRBdCB0aW1lc3RhbXAgKG5ld2VzdCBmaXJzdClcclxuICAgICAgICByZWd1bGFyLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGltZUEgPSBhLnBpbm5lZEF0IHx8IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVCID0gYi5waW5uZWRBdCB8fCAwO1xyXG4gICAgICAgICAgICByZXR1cm4gdGltZUIgLSB0aW1lQTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgcHJpb3JpdHlWaWRlb3M6IHByaW9yaXR5LCByZWd1bGFyVmlkZW9zOiByZWd1bGFyIH07XHJcbiAgICB9LCBbcGlubmVkVmlkZW9zLCBwcmlvcml0eVBpbklkc10pO1xyXG5cclxuICAgIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwaW5uZWRWaWRlb3MgfHwgcGlubmVkVmlkZW9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTEyIHRleHQtc2xhdGUtNDAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgbWItNCBvcGFjaXR5LTUwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17MS41fSBkPVwiTTUgNWEyIDIgMCAwMTItMmgxMGEyIDIgMCAwMTIgMnYxNmwtNy0zLjVMNSAyMVY1elwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1tZWRpdW0gbWItMlwiPk5vIFBpbm5lZCBWaWRlb3M8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPlBpbiB2aWRlb3MgZnJvbSBhbnkgcGxheWxpc3QgdG8gYWNjZXNzIHRoZW0gcXVpY2tseSBoZXJlLjwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IHRvcCAxMCBwcmlvcml0eSBwaW5zIGZvciBjYXJvdXNlbFxyXG4gICAgICAgIGNvbnN0IGNhcm91c2VsVmlkZW9zID0gcHJpb3JpdHlWaWRlb3Muc2xpY2UoMCwgMTApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTRcIj5cclxuICAgICAgICAgICAgICAgIHsvKiBQcmlvcml0eSBQaW5zIENhcm91c2VsICovfVxyXG4gICAgICAgICAgICAgICAge2Nhcm91c2VsVmlkZW9zLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxTdGlja3lWaWRlb0Nhcm91c2VsIHRpdGxlPVwiUHJpb3JpdHkgUGlucyAtIEhpc3RvcnlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2Nhcm91c2VsVmlkZW9zLm1hcCgodmlkZW8sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRseVBsYXlpbmcgPSBjdXJyZW50UGxheWxpc3RJdGVtcz8uW2N1cnJlbnRWaWRlb0luZGV4XT8uaWQgPT09IHZpZGVvLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VmlkZW9DYXJkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dmlkZW8uaWQgfHwgYHByaW9yaXR5LSR7aW5kZXh9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW89e3ZpZGVvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsSW5kZXg9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDdXJyZW50bHlQbGF5aW5nPXtpc0N1cnJlbnRseVBsYXlpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRm9sZGVycz17W119IC8vIFBpbm5lZCB2aWV3IGRvZXNuJ3Qgc2hvdyBmb2xkZXIgY29udGV4dCB1c3VhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9TZWxlY3Q9e29uVmlkZW9TZWxlY3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9DbGljaz17KCkgPT4gb25WaWRlb1NlbGVjdCh2aWRlby52aWRlb191cmwpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8L1N0aWNreVZpZGVvQ2Fyb3VzZWw+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBSZWd1bGFyIFBpbnMgR3JpZCAqL31cclxuICAgICAgICAgICAgICAgIHtyZWd1bGFyVmlkZW9zLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyBnYXAtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVndWxhclZpZGVvcy5tYXAoKHZpZGVvLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlQbGF5aW5nID0gY3VycmVudFBsYXlsaXN0SXRlbXM/LltjdXJyZW50VmlkZW9JbmRleF0/LmlkID09PSB2aWRlby5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFZpZGVvQ2FyZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3ZpZGVvLmlkIHx8IGBwaW5uZWQtJHtpbmRleH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlbz17dmlkZW99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxJbmRleD17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnRseVBsYXlpbmc9e2lzQ3VycmVudGx5UGxheWluZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9Gb2xkZXJzPXtbXX0gLy8gUGlubmVkIHZpZXcgZG9lc24ndCBzaG93IGZvbGRlciBjb250ZXh0IHVzdWFsbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdD17b25WaWRlb1NlbGVjdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb0NsaWNrPXsoKSA9PiBvblZpZGVvU2VsZWN0KHZpZGVvLnZpZGVvX3VybCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVOQUJMRSBUSU1FUiBPTkxZIEZPUiBSRUdVTEFSIFBJTlMgT04gVEhJUyBQQUdFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaW1lcj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGZsZXgtY29sIGJnLXRyYW5zcGFyZW50XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTRcIj5cclxuICAgICAgICAgICAgICAgIDxQYWdlQmFubmVyXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJQaW5uZWQgVmlkZW9zXCJcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17bnVsbH1cclxuICAgICAgICAgICAgICAgICAgICBjb2xvcj17bnVsbH1cclxuICAgICAgICAgICAgICAgICAgICBpc0VkaXRhYmxlPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICB0b3BSaWdodENvbnRlbnQ9e3ByaW9yaXR5VmlkZW9zLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIGdyb3VwIGN1cnNvci1wb2ludGVyIHctNjQgYXNwZWN0LXZpZGVvIHJvdW5kZWQteGwgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdy0yeGwgYm9yZGVyLTIgYm9yZGVyLXRyYW5zcGFyZW50IGhvdmVyOmJvcmRlci13aGl0ZS81MCB0cmFuc2l0aW9uLWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblZpZGVvU2VsZWN0KHByaW9yaXR5VmlkZW9zWzBdLnZpZGVvX3VybCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2BodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8ke3ByaW9yaXR5VmlkZW9zWzBdLnZpZGVvX2lkfS9tYXhyZXNkZWZhdWx0LmpwZ2B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtwcmlvcml0eVZpZGVvc1swXS50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzIwIGdyb3VwLWhvdmVyOmJnLWJsYWNrLzEwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgYmctd2hpdGUvMjAgYmFja2Ryb3AtYmx1ci1tZCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02IHRleHQtd2hpdGUgZmlsbC1jdXJyZW50XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk04IDV2MTRsMTEtN3pcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMiBsZWZ0LTIgcmlnaHQtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC14cyBmb250LW1lZGl1bSB0cnVuY2F0ZSBzaGFkb3ctYmxhY2sgZHJvcC1zaGFkb3ctbWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ByaW9yaXR5VmlkZW9zWzBdLnRpdGxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAge3JlbmRlckNvbnRlbnQoKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG5cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBpbnNQYWdlO1xyXG4iXSwiZmlsZSI6IkM6L1Byb2plY3RzL3l0dHYyL3NyYy9jb21wb25lbnRzL1BpbnNQYWdlLmpzeCJ9