import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/VideosPage.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/VideosPage.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"]; const useMemo = __vite__cjsImport3_react["useMemo"]; const useRef = __vite__cjsImport3_react["useRef"];
import { usePlaylistStore } from "/src/store/playlistStore.js";
import { useFolderStore } from "/src/store/folderStore.js";
import { useLayoutStore } from "/src/store/layoutStore.js";
import { assignVideoToFolder, unassignVideoFromFolder, getVideoFolderAssignments, getAllFolderAssignments, getVideosInFolder, removeVideoFromPlaylist, getWatchedVideoIds, getAllVideoProgress } from "/src/api/playlistApi.js";
import { FOLDER_COLORS, getFolderColorById } from "/src/utils/folderColors.js";
import { extractVideoId } from "/src/utils/youtubeUtils.js";
import VideoCard from "/src/components/VideoCard.jsx";
import PlaylistSelectionModal from "/src/components/PlaylistSelectionModal.jsx";
import PlaylistUploader from "/src/components/PlaylistUploader.jsx";
import { addVideoToPlaylist, getPlaylistItems } from "/src/api/playlistApi.js";
import { useStickyStore } from "/src/store/stickyStore.js";
import StickyVideoCarousel from "/src/components/StickyVideoCarousel.jsx";
import PageBanner from "/src/components/PageBanner.jsx";
import EditPlaylistModal from "/src/components/EditPlaylistModal.jsx";
import UnifiedBannerBackground from "/src/components/UnifiedBannerBackground.jsx";
import { useNavigationStore } from "/src/store/navigationStore.js";
import { Star, MoreVertical, Plus, Play, Check, X, ArrowUp, Clock, Heart, Pin, Settings, Cat } from "/node_modules/.vite/deps/lucide-react.js?v=cd56faf3";
import VideoCardSkeleton from "/src/components/skeletons/VideoCardSkeleton.jsx";
import { updatePlaylist, getAllPlaylists, getFolderMetadata, setFolderMetadata } from "/src/api/playlistApi.js";
import { useConfigStore } from "/src/store/configStore.js";
import { useShuffleStore } from "/src/store/shuffleStore.js";
const VideosPage = ({ onVideoSelect, onSecondPlayerSelect }) => {
  _s();
  const {
    currentPlaylistItems,
    currentVideoIndex,
    currentPlaylistId,
    setPlaylistItems,
    previewPlaylistItems,
    previewPlaylistId,
    previewFolderInfo,
    setPreviewPlaylist,
    allPlaylists,
    setAllPlaylists
  } = usePlaylistStore();
  const [selectedVideoIndex, setSelectedVideoIndex] = useState(null);
  const {
    selectedFolder,
    setSelectedFolder,
    setVideoFolders,
    videoFolderAssignments,
    loadVideoFolders,
    quickAssignFolder,
    setQuickAssignFolder,
    bulkTagMode,
    setBulkTagMode,
    bulkTagSelections,
    toggleBulkTagSelection,
    clearBulkTagSelections
  } = useFolderStore();
  const { shuffleStates, getShuffleState } = useShuffleStore();
  const { setViewMode, inspectMode, viewMode } = useLayoutStore();
  const { currentPage: currentNavTab, setCurrentPage: setCurrentNavTab } = useNavigationStore();
  const scrollContainerRef = useRef(null);
  const scrollToTop = () => {
    scrollContainerRef.current?.scrollTo({ top: 0, behavior: "smooth" });
  };
  const tabs = [
    { id: "playlists", label: "Playlists" },
    { id: "videos", label: "Videos" },
    { id: "history", label: "History", icon: /* @__PURE__ */ jsxDEV(Clock, { size: 16 }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 83,
      columnNumber: 44
    }, this) },
    { id: "likes", label: "Likes", icon: /* @__PURE__ */ jsxDEV(Heart, { size: 16 }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 84,
      columnNumber: 40
    }, this) },
    { id: "pins", label: "Pins", icon: /* @__PURE__ */ jsxDEV(Pin, { size: 16 }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 85,
      columnNumber: 38
    }, this) },
    { id: "settings", label: "Settings", icon: /* @__PURE__ */ jsxDEV(Settings, { size: 16 }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 86,
      columnNumber: 46
    }, this) },
    { id: "support", label: "Support", icon: /* @__PURE__ */ jsxDEV(Cat, { size: 16 }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 87,
      columnNumber: 44
    }, this) }
  ];
  const handleTabClick = (tabId) => {
    setCurrentNavTab(tabId);
    const isNavigationTab = ["playlists", "videos", "history", "likes", "pins", "settings", "support"].includes(tabId);
    if (isNavigationTab && viewMode === "full") {
      setViewMode("half");
    }
  };
  const { userName, userAvatar, customPageBannerImage, bannerHeight, bannerBgSize } = useConfigStore();
  const getInspectTitle = (label) => inspectMode ? label : void 0;
  const [displayedVideos, setDisplayedVideos] = useState([]);
  const [loadingFolders, setLoadingFolders] = useState(true);
  const [savingBulkTags, setSavingBulkTags] = useState(false);
  const [sortBy, setSortBy] = useState("shuffle");
  const [sortDirection, setSortDirection] = useState("desc");
  const [includeUnwatched, setIncludeUnwatched] = useState(true);
  const [showOnlyCompleted, setShowOnlyCompleted] = useState(false);
  const [watchedVideoIds, setWatchedVideoIds] = useState(/* @__PURE__ */ new Set());
  const [videoProgress, setVideoProgress] = useState(/* @__PURE__ */ new Map());
  const [showPlaylistSelector, setShowPlaylistSelector] = useState(false);
  const [selectedVideoForAction, setSelectedVideoForAction] = useState(null);
  const [actionType, setActionType] = useState(null);
  const [showUploader, setShowUploader] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [folderMetadata, setFolderMetadataState] = useState(null);
  const activePlaylistItems = previewPlaylistItems || currentPlaylistItems;
  const activePlaylistId = previewPlaylistId || currentPlaylistId;
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 50;
  useEffect(() => {
    setCurrentPage(1);
    if (scrollContainerRef.current) {
      scrollContainerRef.current.scrollTo(0, 0);
    }
  }, [activePlaylistId, selectedFolder, sortBy, sortDirection, includeUnwatched, showOnlyCompleted]);
  useEffect(() => {
    if (scrollContainerRef.current) {
      scrollContainerRef.current.scrollTo(0, 0);
    }
  }, [currentPage]);
  useEffect(() => {
    if (currentVideoIndex >= 0 && activePlaylistItems.length > 0) {
      setSelectedVideoIndex(currentVideoIndex);
    }
  }, [currentVideoIndex, activePlaylistItems]);
  const { isStickied, toggleSticky, stickiedVideos: allStickiedVideos } = useStickyStore();
  const handleToggleSticky = (playlistId, videoId) => {
    console.log(`[VideosPage] Toggling sticky for playlist ${playlistId}, video ${videoId}, folder ${selectedFolder}`);
    toggleSticky(playlistId, videoId, selectedFolder);
  };
  useEffect(() => {
    console.log("[VideosPage] Active Playlist:", activePlaylistId);
    console.log("[VideosPage] Sticky Data:", allStickiedVideos);
    console.log("[VideosPage] Selected Folder:", selectedFolder);
  }, [activePlaylistId, allStickiedVideos, selectedFolder]);
  useEffect(() => {
    setSelectedFolder(null);
  }, [activePlaylistId, setSelectedFolder]);
  useEffect(() => {
    if (!bulkTagMode) {
      clearBulkTagSelections();
    }
  }, [bulkTagMode, clearBulkTagSelections]);
  useEffect(() => {
    const loadProgress = async () => {
      try {
        const watchedIds = await getWatchedVideoIds();
        setWatchedVideoIds(new Set(watchedIds));
        const allProgress = await getAllVideoProgress();
        const progressMap = /* @__PURE__ */ new Map();
        for (const progress of allProgress) {
          progressMap.set(progress.video_id, {
            percentage: progress.progress_percentage,
            hasFullyWatched: progress.has_fully_watched,
            last_updated: progress.last_updated
          });
        }
        setVideoProgress(progressMap);
      } catch (error) {
        console.error("Failed to load video progress:", error);
      }
    };
    loadProgress();
    const intervalId = setInterval(loadProgress, 5e3);
    return () => clearInterval(intervalId);
  }, []);
  useEffect(() => {
    const refreshProgress = async () => {
      if (activePlaylistItems.length > 0 && currentVideoIndex < activePlaylistItems.length) {
        try {
          const watchedIds = await getWatchedVideoIds();
          setWatchedVideoIds(new Set(watchedIds));
          const allProgress = await getAllVideoProgress();
          const progressMap = /* @__PURE__ */ new Map();
          for (const progress of allProgress) {
            progressMap.set(progress.video_id, {
              percentage: progress.progress_percentage,
              hasFullyWatched: progress.has_fully_watched,
              last_updated: progress.last_updated
            });
          }
          setVideoProgress(progressMap);
        } catch (error) {
          console.error("Failed to refresh video progress:", error);
        }
      }
    };
    const timeoutId = setTimeout(refreshProgress, 2e3);
    return () => clearTimeout(timeoutId);
  }, [currentVideoIndex, activePlaylistItems]);
  useEffect(() => {
    const loadAssignments = async () => {
      setLoadingFolders(true);
      if (!activePlaylistId) {
        loadVideoFolders({});
        setLoadingFolders(false);
        return;
      }
      try {
        const assignments = await getAllFolderAssignments(activePlaylistId);
        loadVideoFolders(assignments || {});
      } catch (error) {
        console.error("Failed to load folder assignments:", error);
        loadVideoFolders({});
      } finally {
        setLoadingFolders(false);
      }
    };
    loadAssignments();
  }, [activePlaylistId, activePlaylistItems, loadVideoFolders]);
  useEffect(() => {
    if (activePlaylistId && activePlaylistItems.length > 0) {
      getShuffleState(activePlaylistId, activePlaylistItems.map((v) => v.id));
    }
  }, [activePlaylistId, activePlaylistItems, getShuffleState]);
  useEffect(() => {
    if (!activePlaylistId || activePlaylistItems.length === 0) {
      setDisplayedVideos([]);
      return;
    }
    const filterVideos = async () => {
      if (selectedFolder === null) {
        setDisplayedVideos(activePlaylistItems);
        return;
      }
      setLoadingFolders(true);
      try {
        if (selectedFolder === "unsorted") {
          const unsortedVideos = [];
          for (const video of activePlaylistItems) {
            const folders = videoFolderAssignments[video.id];
            if (!folders || folders.length === 0) {
              unsortedVideos.push(video);
            }
          }
          console.log(`Unsorted filter: Found ${unsortedVideos.length} videos`);
          setDisplayedVideos(unsortedVideos);
        } else {
          const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
          console.log(`Folder ${selectedFolder}: Found ${videos?.length || 0} videos with assignments`);
          setDisplayedVideos(Array.isArray(videos) ? videos : []);
        }
      } catch (error) {
        console.error("Failed to load folder videos:", error);
        setDisplayedVideos([]);
      } finally {
        setLoadingFolders(false);
      }
    };
    filterVideos();
  }, [selectedFolder, activePlaylistId, activePlaylistItems]);
  const handleMenuOptionClick = async (option, video) => {
    console.log("handleMenuOptionClick:", option.action, video.id, "activePermission:", !!activePlaylistId);
    if (!activePlaylistId) {
      console.warn("Action attempted without activePlaylistId");
    }
    try {
      switch (option.action) {
        case "delete":
          const confirmed = window.confirm(
            `Are you sure you want to remove "${video.title || "this video"}" from the playlist?`
          );
          if (!confirmed) return;
          await removeVideoFromPlaylist(activePlaylistId, video.id);
          setDisplayedVideos((prev) => prev.filter((v) => v.id !== video.id));
          if (previewPlaylistId) {
            const updatedItems = previewPlaylistItems.filter((v) => v.id !== video.id);
            setPreviewPlaylist(updatedItems, previewPlaylistId, previewFolderInfo);
          } else {
            const updatedItems = currentPlaylistItems.filter((v) => v.id !== video.id);
            setPlaylistItems(updatedItems, currentPlaylistId);
          }
          break;
        case "assignFolder":
          if (option.folderColor) {
            const currentFolders = videoFolderAssignments[video.id] || [];
            const isAssigned = currentFolders.includes(option.folderColor);
            if (isAssigned) {
              await unassignVideoFromFolder(activePlaylistId, video.id, option.folderColor);
              setVideoFolders(video.id, currentFolders.filter((f) => f !== option.folderColor));
            } else {
              await assignVideoToFolder(activePlaylistId, video.id, option.folderColor);
              setVideoFolders(video.id, [...currentFolders, option.folderColor]);
            }
            if (selectedFolder === option.folderColor) {
              const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
              setDisplayedVideos(videos || []);
            }
          }
          break;
        case "setQuickAssign":
          if (option.folderColor) {
            setQuickAssignFolder(option.folderColor);
            console.log("Quick assign folder set to:", option.folderColor);
          }
          break;
        case "moveToPlaylist":
          setSelectedVideoForAction(video);
          setActionType("move");
          setShowPlaylistSelector(true);
          break;
        case "setPlaylistCover":
          if (!activePlaylistId) return;
          try {
            const coverUrl = `https://img.youtube.com/vi/${video.video_id}/maxresdefault.jpg`;
            await updatePlaylist(activePlaylistId, null, null, null, coverUrl);
            alert(`Playlist cover updated using thumbnail from "${video.title}"`);
            const playlists = await getAllPlaylists();
            setAllPlaylists(playlists);
          } catch (error) {
            console.error("Failed to set playlist cover:", error);
            alert("Failed to set playlist cover");
          }
          break;
        case "copyToPlaylist":
          setSelectedVideoForAction(video);
          setActionType("copy");
          setShowPlaylistSelector(true);
          break;
        default:
          console.log("Unknown action:", option.action);
      }
    } catch (error) {
      console.error("Failed to handle menu action:", error);
      alert(`Failed to ${option.label.toLowerCase()}: ${error.message || "Unknown error"}`);
    }
  };
  const handleStarClick = async (e, video) => {
    if (!activePlaylistId) return;
    const currentFolders = videoFolderAssignments[video.id] || [];
    const targetFolder = quickAssignFolder;
    const isAssigned = currentFolders.includes(targetFolder);
    try {
      if (isAssigned) {
        await unassignVideoFromFolder(activePlaylistId, video.id, targetFolder);
        const updatedFolders = currentFolders.filter((f) => f !== targetFolder);
        setVideoFolders(video.id, updatedFolders);
        if (selectedFolder === targetFolder) {
          const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
          setDisplayedVideos(videos || []);
        }
      } else {
        await assignVideoToFolder(activePlaylistId, video.id, targetFolder);
        setVideoFolders(video.id, [...currentFolders, targetFolder]);
        if (selectedFolder === targetFolder) {
          const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
          setDisplayedVideos(videos || []);
        }
      }
    } catch (error) {
      console.error("Failed to toggle folder assignment:", error);
      alert(`Failed to ${isAssigned ? "unassign" : "assign"} video: ${error.message || "Unknown error"}`);
    }
  };
  const handleStarColorLeftClick = async (video, folderColor) => {
    if (!activePlaylistId) return;
    const currentFolders = videoFolderAssignments[video.id] || [];
    const isAssigned = currentFolders.includes(folderColor);
    try {
      if (isAssigned) {
        await unassignVideoFromFolder(activePlaylistId, video.id, folderColor);
        const updatedFolders = currentFolders.filter((f) => f !== folderColor);
        setVideoFolders(video.id, updatedFolders);
        if (selectedFolder === folderColor) {
          const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
          setDisplayedVideos(videos || []);
        }
      } else {
        await assignVideoToFolder(activePlaylistId, video.id, folderColor);
        setVideoFolders(video.id, [...currentFolders, folderColor]);
        if (selectedFolder === folderColor) {
          const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
          setDisplayedVideos(videos || []);
        }
      }
    } catch (error) {
      console.error("Failed to toggle folder assignment:", error);
      alert(`Failed to ${isAssigned ? "unassign" : "assign"} video: ${error.message || "Unknown error"}`);
    }
  };
  const handleStarColorRightClick = (folderColor) => {
    setQuickAssignFolder(folderColor);
    console.log("Quick assign folder set to:", folderColor);
  };
  const handleVideoClick = (video, index) => {
    if (bulkTagMode) return;
    if (previewPlaylistId) {
      const playlist = allPlaylists.find((p) => p.id === previewPlaylistId);
      const title = playlist ? playlist.name : null;
      setPlaylistItems(previewPlaylistItems, previewPlaylistId, previewFolderInfo, title);
    }
    const originalIndex = activePlaylistItems.findIndex((v) => v.id === video.id);
    setSelectedVideoIndex(originalIndex >= 0 ? originalIndex : index);
    if (onVideoSelect) {
      onVideoSelect(video.video_url);
    }
  };
  const handleBulkTagColorClick = (video, folderColor) => {
    toggleBulkTagSelection(video.id, folderColor);
  };
  const handleSaveBulkTags = async () => {
    if (!activePlaylistId) return;
    const selections = Object.entries(bulkTagSelections);
    if (selections.length === 0) {
      alert("No selections to save");
      return;
    }
    setSavingBulkTags(true);
    try {
      let successCount = 0;
      let errorCount = 0;
      for (const [videoId, folderColors] of selections) {
        const videoIdNum = parseInt(videoId);
        const folders = Array.from(folderColors);
        const currentFolders = videoFolderAssignments[videoIdNum] || [];
        const foldersToAdd = folders.filter((f) => !currentFolders.includes(f));
        const foldersToRemove = currentFolders.filter((f) => !folders.includes(f));
        for (const folderColor of foldersToAdd) {
          try {
            await assignVideoToFolder(activePlaylistId, videoIdNum, folderColor);
            successCount++;
          } catch (error) {
            console.error(`Failed to assign video ${videoIdNum} to folder ${folderColor}:`, error);
            errorCount++;
          }
        }
        for (const folderColor of foldersToRemove) {
          try {
            await unassignVideoFromFolder(activePlaylistId, videoIdNum, folderColor);
            successCount++;
          } catch (error) {
            console.error(`Failed to unassign video ${videoIdNum} from folder ${folderColor}:`, error);
            errorCount++;
          }
        }
        setVideoFolders(videoIdNum, folders);
      }
      const assignments = {};
      for (const video of activePlaylistItems) {
        try {
          const folders = await getVideoFolderAssignments(activePlaylistId, video.id);
          assignments[video.id] = Array.isArray(folders) && folders.length > 0 ? folders : [];
        } catch (error) {
          console.error(`Failed to load folders for video ${video.id}:`, error);
          assignments[video.id] = [];
        }
      }
      loadVideoFolders(assignments);
      if (selectedFolder !== null) {
        const videos = await getVideosInFolder(activePlaylistId, selectedFolder);
        setDisplayedVideos(videos || []);
      }
      clearBulkTagSelections();
      setBulkTagMode(false);
      if (errorCount > 0) {
        alert(`Saved ${successCount} assignments, but ${errorCount} failed. Check console for details.`);
      } else {
        alert(`Successfully saved ${successCount} folder assignments!`);
      }
    } catch (error) {
      console.error("Failed to save bulk tags:", error);
      alert(`Failed to save bulk tags: ${error.message || "Unknown error"}`);
    } finally {
      setSavingBulkTags(false);
    }
  };
  const handleCancelBulkTags = () => {
    clearBulkTagSelections();
    setBulkTagMode(false);
  };
  const handlePlaylistSelect = async (playlistId) => {
    if (!selectedVideoForAction || !actionType) return;
    try {
      const video = selectedVideoForAction;
      console.log(`${actionType === "move" ? "Moving" : "Copying"} video to playlist ${playlistId}:`, video.title);
      const videoId = extractVideoId(video.video_url) || video.video_id;
      await addVideoToPlaylist(
        playlistId,
        video.video_url,
        videoId,
        video.title,
        video.thumbnail_url
      );
      if (actionType === "move" && activePlaylistId) {
        await removeVideoFromPlaylist(activePlaylistId, video.id);
        setDisplayedVideos((prev) => prev.filter((v) => v.id !== video.id));
        if (previewPlaylistId) {
          const updatedItems = previewPlaylistItems.filter((v) => v.id !== video.id);
          setPreviewPlaylist(updatedItems, previewPlaylistId, previewFolderInfo);
        } else {
          const updatedItems = currentPlaylistItems.filter((v) => v.id !== video.id);
          setPlaylistItems(updatedItems, currentPlaylistId);
        }
      }
      console.log(`Video successfully ${actionType === "move" ? "moved" : "copied"}!`);
    } catch (error) {
      console.error(`Failed to ${actionType} video:`, error);
      alert(`Failed to ${actionType} video: ${error.message}`);
    } finally {
      setShowPlaylistSelector(false);
      setSelectedVideoForAction(null);
      setActionType(null);
    }
  };
  const folderCounts = useMemo(() => {
    const counts = {};
    if (videoFolderAssignments) {
      Object.values(videoFolderAssignments).forEach((folders) => {
        if (Array.isArray(folders)) {
          folders.forEach((folderId) => {
            counts[folderId] = (counts[folderId] || 0) + 1;
          });
        }
      });
    }
    return counts;
  }, [videoFolderAssignments]);
  const handleUploadComplete = async () => {
    setShowUploader(false);
    if (activePlaylistId) {
      try {
        const items = await getPlaylistItems(activePlaylistId);
        if (previewPlaylistId) {
          setPreviewPlaylist(items, previewPlaylistId, previewFolderInfo);
        } else {
          setPlaylistItems(items, currentPlaylistId);
        }
      } catch (error) {
        console.error("Failed to reload playlist after upload:", error);
      }
    }
  };
  useEffect(() => {
    const fetchMetadata = async () => {
      if (activePlaylistId && selectedFolder && selectedFolder !== "unsorted") {
        try {
          const metadata = await getFolderMetadata(activePlaylistId, selectedFolder);
          if (metadata) {
            setFolderMetadataState({ name: metadata[0], description: metadata[1], customAscii: metadata[2] });
          } else {
            setFolderMetadataState(null);
          }
        } catch (error) {
          console.error("Failed to fetch folder metadata:", error);
          setFolderMetadataState(null);
        }
      } else {
        setFolderMetadataState(null);
      }
    };
    fetchMetadata();
  }, [activePlaylistId, selectedFolder]);
  const handleUpdateMetadata = async (data) => {
    if (!activePlaylistId) return;
    try {
      if (selectedFolder && selectedFolder !== "unsorted") {
        await setFolderMetadata(activePlaylistId, selectedFolder, data.name, data.description, data.customAscii);
        setFolderMetadataState({ name: data.name, description: data.description, customAscii: data.customAscii });
      } else {
        await updatePlaylist(activePlaylistId, data.name, data.description, data.customAscii);
        const playlists = await getAllPlaylists();
        setAllPlaylists(playlists);
      }
    } catch (error) {
      console.error("Failed to update metadata:", error);
      throw error;
    }
  };
  const sortedVideos = useMemo(() => {
    const baseVideos = selectedFolder !== null ? displayedVideos : activePlaylistItems;
    if (!baseVideos || baseVideos.length === 0) {
      return [];
    }
    if (sortBy === "chronological") {
      return baseVideos;
    }
    if (sortBy === "shuffle") {
      const state = shuffleStates[activePlaylistId];
      if (!state || !state.map) return baseVideos;
      return [...baseVideos].sort((a, b) => {
        const rankA = state.map[a.id] ?? 0;
        const rankB = state.map[b.id] ?? 0;
        return rankA - rankB;
      });
    }
    if (sortBy === "progress") {
      let filtered = [...baseVideos];
      if (!includeUnwatched) {
        filtered = filtered.filter((video) => {
          const videoId = extractVideoId(video.video_url) || video.video_id;
          const data = videoProgress.get(videoId);
          const percentage = data ? typeof data === "number" ? data : data.percentage : 0;
          return percentage > 0;
        });
      }
      if (showOnlyCompleted) {
        filtered = filtered.filter((video) => {
          const videoId = extractVideoId(video.video_url) || video.video_id;
          const data = videoProgress.get(videoId);
          const hasFullyWatched = data ? typeof data === "object" ? data.hasFullyWatched : false : false;
          return !hasFullyWatched;
        });
      }
      const sorted = filtered.sort((a, b) => {
        const idA = extractVideoId(a.video_url) || a.video_id;
        const idB = extractVideoId(b.video_url) || b.video_id;
        const dataA = videoProgress.get(idA);
        const dataB = videoProgress.get(idB);
        const progressA = dataA ? typeof dataA === "number" ? dataA : dataA.percentage : 0;
        const progressB = dataB ? typeof dataB === "number" ? dataB : dataB.percentage : 0;
        return sortDirection === "asc" ? progressA - progressB : progressB - progressA;
      });
      return sorted;
    }
    return baseVideos;
  }, [selectedFolder, displayedVideos, activePlaylistItems, sortBy, sortDirection, videoProgress, includeUnwatched, showOnlyCompleted, shuffleStates, activePlaylistId]);
  const videosToDisplay = selectedFolder !== null ? displayedVideos : activePlaylistItems;
  const stickiedVideos = videosToDisplay.filter((v) => {
    const folderKey = selectedFolder === null ? "root" : selectedFolder;
    const key = `${activePlaylistId}::${folderKey}`;
    const stickies = allStickiedVideos[key] || [];
    return stickies.includes(v.id);
  });
  const regularVideos = sortedVideos;
  const bulkTagSelectionCount = Object.values(bulkTagSelections).reduce(
    (total, folders) => total + folders.size,
    0
  );
  const activeObject = useMemo(() => {
    if (selectedFolder && selectedFolder !== "unsorted") {
      return folderMetadata;
    }
    return allPlaylists.find((p) => p.id === activePlaylistId);
  }, [allPlaylists, activePlaylistId, selectedFolder, folderMetadata]);
  const bannerInfo = useMemo(() => {
    let title = "";
    let description = "";
    let color = null;
    let isEditable = true;
    let customAscii = null;
    let hex = "#3b82f6";
    if (selectedFolder) {
      if (selectedFolder === "unsorted") {
        title = "Unsorted Videos";
        description = `Videos from "${allPlaylists.find((p) => p.id === activePlaylistId)?.name || "Playlist"}" that haven't been assigned to any folder.`;
        color = "unsorted";
        hex = "#64748b";
        isEditable = false;
      } else {
        const colorInfo = FOLDER_COLORS.find((c) => c.id === selectedFolder);
        color = selectedFolder;
        if (colorInfo) hex = colorInfo.hex;
        if (activeObject) {
          title = activeObject.name || (colorInfo ? `${colorInfo.name} Folder` : "Folder");
          description = activeObject.description || "";
          customAscii = activeObject.customAscii;
        } else {
          title = colorInfo ? `${colorInfo.name} Folder` : "Folder";
          description = `Videos in the ${title}.`;
        }
        isEditable = true;
      }
    } else {
      title = activeObject ? activeObject.name : "";
      description = activeObject ? activeObject.description : "";
      customAscii = activeObject ? activeObject.custom_ascii : null;
      color = null;
      isEditable = true;
    }
    return { title, description, color, isEditable, customAscii, hex };
  }, [activeObject, selectedFolder, activePlaylistId, allPlaylists]);
  const modalInitialData = useMemo(() => {
    if (selectedFolder && selectedFolder !== "unsorted") {
      const colorInfo = FOLDER_COLORS.find((c) => c.id === selectedFolder);
      const defaultName = colorInfo ? `${colorInfo.name} Folder` : "Folder";
      return {
        name: activeObject?.name || defaultName,
        description: activeObject?.description || "",
        customAscii: activeObject?.customAscii || ""
      };
    } else {
      return {
        name: activeObject?.name || "",
        description: activeObject?.description || "",
        customAscii: activeObject?.custom_ascii || ""
      };
    }
  }, [activeObject, selectedFolder]);
  const continueVideo = useMemo(() => {
    if (!videosToDisplay || videosToDisplay.length === 0) return null;
    let mostRecent = null;
    let maxTime = 0;
    for (const video of videosToDisplay) {
      const videoId = extractVideoId(video.video_url) || video.video_id;
      const progress = videoProgress.get(videoId);
      if (progress && progress.last_updated) {
        const time = new Date(progress.last_updated).getTime();
        if (time > maxTime) {
          maxTime = time;
          mostRecent = video;
        }
      }
    }
    return mostRecent;
  }, [videosToDisplay, videoProgress]);
  const [isStuck, setIsStuck] = useState(false);
  const stickySentinelRef = useRef(null);
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        setIsStuck(entry.intersectionRatio < 1 && entry.boundingClientRect.top < 0);
      },
      { threshold: [1], rootMargin: "-1px 0px 0px 0px" }
    );
    if (stickySentinelRef.current) {
      observer.observe(stickySentinelRef.current);
    }
    return () => observer.disconnect();
  }, []);
  return /* @__PURE__ */ jsxDEV("div", { className: "w-full h-full flex flex-col", children: [
    showUploader ? /* @__PURE__ */ jsxDEV("div", { className: "flex-1 overflow-y-auto p-4 bg-transparent", children: /* @__PURE__ */ jsxDEV(
      PlaylistUploader,
      {
        onUploadComplete: handleUploadComplete,
        onCancel: () => setShowUploader(false),
        initialPlaylistId: activePlaylistId
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
        lineNumber: 1e3,
        columnNumber: 11
      },
      this
    ) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 999,
      columnNumber: 7
    }, this) : /* @__PURE__ */ jsxDEV("div", { ref: scrollContainerRef, className: "flex-1 overflow-y-auto bg-transparent relative", children: [
      activePlaylistId && /* @__PURE__ */ jsxDEV("div", { className: "px-8 pt-8", children: /* @__PURE__ */ jsxDEV(
        PageBanner,
        {
          title: bannerInfo.title,
          description: bannerInfo.description,
          folderColor: bannerInfo.color,
          onEdit: bannerInfo.isEditable ? () => setShowEditModal(true) : void 0,
          videoCount: videosToDisplay.length,
          creationYear: "2026",
          author: userName,
          avatar: bannerInfo.customAscii || userAvatar,
          continueVideo,
          onContinue: () => {
            if (continueVideo && onVideoSelect) {
              onVideoSelect(continueVideo.video_url);
            }
          },
          seamlessBottom: true
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1011,
          columnNumber: 15
        },
        this
      ) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
        lineNumber: 1010,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("div", { ref: stickySentinelRef, className: "absolute h-px w-full -mt-px pointer-events-none opacity-0" }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
        lineNumber: 1032,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV(
        "div",
        {
          className: `sticky top-0 z-40 transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1) overflow-hidden -mt-16
            ${isStuck ? "backdrop-blur-xl border-y shadow-2xl mx-0 rounded-none mb-6 pt-2 pb-2 bg-slate-900/70" : "backdrop-blur-[2px] border-b border-x border-t border-white/10 shadow-xl mx-8 rounded-b-2xl mb-8 mt-0 pt-1 pb-0 bg-transparent"}
            `,
          style: {
            backgroundColor: isStuck ? void 0 : "transparent"
            // Fully transparent resting state
          },
          children: /* @__PURE__ */ jsxDEV("div", { className: `px-4 flex items-center justify-between transition-all duration-300 relative z-10 ${isStuck ? "h-[52px]" : "py-0.5"}`, children: [
            /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-0 overflow-x-auto no-scrollbar mask-gradient-right flex-1 min-w-0 pr-0", children: [
              /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-3 pr-3 shrink-0", children: [
                /* @__PURE__ */ jsxDEV("div", { className: "relative group shrink-0", children: /* @__PURE__ */ jsxDEV(
                  "select",
                  {
                    value: sortBy,
                    onChange: (e) => setSortBy(e.target.value),
                    className: "bg-slate-800/80 border border-white/10 rounded-md py-1 pl-2 pr-5 text-[10px] font-bold uppercase tracking-wider text-slate-300 focus:outline-none focus:ring-1 focus:ring-sky-500 cursor-pointer hover:bg-slate-700 transition-colors appearance-none",
                    title: "Sort",
                    children: [
                      /* @__PURE__ */ jsxDEV("option", { value: "shuffle", children: "Default" }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                        lineNumber: 1065,
                        columnNumber: 23
                      }, this),
                      /* @__PURE__ */ jsxDEV("option", { value: "chronological", children: "Date" }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                        lineNumber: 1066,
                        columnNumber: 23
                      }, this),
                      /* @__PURE__ */ jsxDEV("option", { value: "progress", children: "Progress" }, void 0, false, {
                        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                        lineNumber: 1067,
                        columnNumber: 23
                      }, this)
                    ]
                  },
                  void 0,
                  true,
                  {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1059,
                    columnNumber: 21
                  },
                  this
                ) }, void 0, false, {
                  fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                  lineNumber: 1058,
                  columnNumber: 19
                }, this),
                /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-1.5 shrink-0", children: [
                  /* @__PURE__ */ jsxDEV(
                    "button",
                    {
                      onClick: () => setSelectedFolder(null),
                      className: `px-2 py-0.5 rounded-md text-[10px] font-bold transition-all uppercase tracking-wider ${selectedFolder === null ? "bg-sky-500 text-white shadow-sm" : "bg-slate-800/80 text-slate-400 hover:bg-slate-700 hover:text-slate-200 border border-white/5"}`,
                      children: "All"
                    },
                    void 0,
                    false,
                    {
                      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                      lineNumber: 1073,
                      columnNumber: 21
                    },
                    this
                  ),
                  /* @__PURE__ */ jsxDEV(
                    "button",
                    {
                      onClick: () => setSelectedFolder("unsorted"),
                      className: `px-2 py-0.5 rounded-md text-[10px] font-bold transition-all uppercase tracking-wider ${selectedFolder === "unsorted" ? "bg-slate-500 text-white shadow-sm" : "bg-slate-800/80 text-slate-400 hover:bg-slate-700 hover:text-slate-200 border border-white/5"}`,
                      children: "Unsorted"
                    },
                    void 0,
                    false,
                    {
                      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                      lineNumber: 1082,
                      columnNumber: 21
                    },
                    this
                  )
                ] }, void 0, true, {
                  fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                  lineNumber: 1072,
                  columnNumber: 19
                }, this)
              ] }, void 0, true, {
                fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                lineNumber: 1056,
                columnNumber: 17
              }, this),
              /* @__PURE__ */ jsxDEV("div", { className: "flex-1 flex items-center shrink-0 h-6 mr-3 border-2 border-black rounded-lg overflow-hidden", children: FOLDER_COLORS.map((color, index) => {
                const isSelected = selectedFolder === color.id;
                const isFirst = index === 0;
                const isLast = index === FOLDER_COLORS.length - 1;
                const count = folderCounts[color.id] || 0;
                return /* @__PURE__ */ jsxDEV(
                  "button",
                  {
                    onClick: () => setSelectedFolder(color.id),
                    className: `h-full flex-1 flex items-center justify-center transition-all ${isSelected ? 'opacity-100 z-10 relative after:content-[""] after:absolute after:inset-0 after:ring-2 after:ring-inset after:ring-white/50' : "opacity-60 hover:opacity-100"} ${isFirst ? "rounded-l-md" : ""} ${isLast ? "rounded-r-md" : ""}`,
                    style: { backgroundColor: color.hex },
                    title: `${color.name} (${count})`,
                    children: count > 0 && /* @__PURE__ */ jsxDEV("span", { className: "text-sm font-bold text-white/90 drop-shadow-md", children: count }, void 0, false, {
                      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                      lineNumber: 1113,
                      columnNumber: 23
                    }, this)
                  },
                  color.id,
                  false,
                  {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1102,
                    columnNumber: 21
                  },
                  this
                );
              }) }, void 0, false, {
                fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                lineNumber: 1094,
                columnNumber: 17
              }, this)
            ] }, void 0, true, {
              fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
              lineNumber: 1054,
              columnNumber: 15
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: "flex items-center gap-2 shrink-0 ml-auto", children: [
              /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: () => setBulkTagMode(!bulkTagMode),
                  className: `p-1.5 rounded-md transition-all ${bulkTagMode ? "bg-blue-600 text-white shadow-lg" : "bg-slate-800/80 text-slate-400 hover:bg-slate-700 hover:text-slate-200 border border-white/10"}`,
                  title: bulkTagMode ? "Exit Bulk Tagging" : "Bulk Tag",
                  children: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" }, void 0, false, {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1135,
                    columnNumber: 21
                  }, this) }, void 0, false, {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1134,
                    columnNumber: 19
                  }, this)
                },
                void 0,
                false,
                {
                  fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                  lineNumber: 1126,
                  columnNumber: 17
                },
                this
              ),
              /* @__PURE__ */ jsxDEV(
                "button",
                {
                  onClick: () => setShowUploader(true),
                  className: "p-1.5 bg-sky-500 hover:bg-sky-400 text-white rounded-md transition-all shadow-lg hover:shadow-sky-500/25 border border-white/10",
                  title: "Add Config",
                  children: /* @__PURE__ */ jsxDEV("svg", { className: "w-4 h-4", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: /* @__PURE__ */ jsxDEV("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 4v16m8-8H4" }, void 0, false, {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1146,
                    columnNumber: 21
                  }, this) }, void 0, false, {
                    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                    lineNumber: 1145,
                    columnNumber: 19
                  }, this)
                },
                void 0,
                false,
                {
                  fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                  lineNumber: 1140,
                  columnNumber: 17
                },
                this
              )
            ] }, void 0, true, {
              fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
              lineNumber: 1124,
              columnNumber: 15
            }, this)
          ] }, void 0, true, {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1048,
            columnNumber: 13
          }, this)
        },
        void 0,
        false,
        {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1035,
          columnNumber: 11
        },
        this
      ),
      /* @__PURE__ */ jsxDEV("div", { className: "px-8 pb-8", children: [
        /* @__PURE__ */ jsxDEV(
          EditPlaylistModal,
          {
            isOpen: showEditModal,
            onClose: () => setShowEditModal(false),
            onSave: handleUpdateMetadata,
            initialData: modalInitialData
          },
          void 0,
          false,
          {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1158,
            columnNumber: 13
          },
          this
        ),
        loadingFolders ? /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 animate-pulse", children: [...Array(12)].map(
          (_, i) => /* @__PURE__ */ jsxDEV(VideoCardSkeleton, {}, i, false, {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1168,
            columnNumber: 13
          }, this)
        ) }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1166,
          columnNumber: 11
        }, this) : sortedVideos.length > 0 ? /* @__PURE__ */ jsxDEV(Fragment, { children: [
          stickiedVideos.length > 0 && selectedFolder !== "unsorted" && /* @__PURE__ */ jsxDEV(StickyVideoCarousel, { children: stickiedVideos.map((video, index) => {
            const originalIndex = activePlaylistItems.findIndex((v) => v.id === video.id);
            return /* @__PURE__ */ jsxDEV(
              VideoCard,
              {
                video,
                index,
                originalIndex,
                isSelected: selectedVideoIndex === originalIndex,
                isCurrentlyPlaying: currentVideoIndex === originalIndex,
                videoFolders: videoFolderAssignments[video.id] || [],
                selectedFolder,
                onVideoClick: () => handleVideoClick(video, index),
                onStarClick: (e) => handleStarClick(e, video),
                onStarColorLeftClick: handleStarColorLeftClick,
                onStarColorRightClick: handleStarColorRightClick,
                onMenuOptionClick: (option) => {
                  if (option.action === "toggleSticky") {
                    handleToggleSticky(activePlaylistId, video.id);
                  } else {
                    handleMenuOptionClick(option, video);
                  }
                },
                onQuickAssign: handleStarClick,
                bulkTagMode,
                bulkTagSelections: bulkTagSelections[video.id] || /* @__PURE__ */ new Set(),
                onBulkTagColorClick: (color) => handleBulkTagColorClick(video, color),
                onPinClick: () => {
                },
                isStickied: true,
                progress: (() => {
                  const videoId = extractVideoId(video.video_url) || video.video_id;
                  const data = videoProgress.get(videoId);
                  return data ? typeof data === "number" ? data : data.percentage : 0;
                })(),
                isWatched: (() => {
                  const videoId = extractVideoId(video.video_url) || video.video_id;
                  return watchedVideoIds.has(videoId);
                })()
              },
              video.id,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                lineNumber: 1179,
                columnNumber: 19
              },
              this
            );
          }) }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1175,
            columnNumber: 13
          }, this),
          /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 animate-fade-in", children: regularVideos.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage).map((video, index) => {
            const originalIndex = activePlaylistItems.findIndex((v) => v.id === video.id);
            const folderKey = selectedFolder === null ? "root" : selectedFolder;
            const key = `${activePlaylistId}::${folderKey}`;
            const isContextStickied = (allStickiedVideos[key] || []).includes(video.id);
            return /* @__PURE__ */ jsxDEV(
              VideoCard,
              {
                video,
                index,
                originalIndex,
                isSelected: selectedVideoIndex === originalIndex,
                isCurrentlyPlaying: currentVideoIndex === originalIndex,
                videoFolders: videoFolderAssignments[video.id] || [],
                selectedFolder,
                onVideoClick: () => handleVideoClick(video, index),
                onStarClick: (e) => handleStarClick(e, video),
                onStarColorLeftClick: handleStarColorLeftClick,
                onStarColorRightClick: handleStarColorRightClick,
                onMenuOptionClick: (option) => {
                  if (option.action === "toggleSticky") {
                    handleToggleSticky(activePlaylistId, video.id);
                  } else {
                    handleMenuOptionClick(option, video);
                  }
                },
                onQuickAssign: handleStarClick,
                bulkTagMode,
                bulkTagSelections: bulkTagSelections[video.id] || /* @__PURE__ */ new Set(),
                onBulkTagColorClick: (color) => handleBulkTagColorClick(video, color),
                onPinClick: () => {
                },
                isStickied: isContextStickied,
                progress: (() => {
                  const videoId = extractVideoId(video.video_url) || video.video_id;
                  const data = videoProgress.get(video.id) || videoProgress.get(extractVideoId(video.video_url));
                  return data ? typeof data === "number" ? data : data.percentage : 0;
                })(),
                isWatched: (() => {
                  const videoId = extractVideoId(video.video_url) || video.video_id;
                  return watchedVideoIds.has(videoId);
                })()
              },
              video.id,
              false,
              {
                fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
                lineNumber: 1230,
                columnNumber: 19
              },
              this
            );
          }) }, void 0, false, {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1221,
            columnNumber: 17
          }, this)
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1172,
          columnNumber: 11
        }, this) : /* @__PURE__ */ jsxDEV("div", { className: "text-center text-slate-400 py-8", children: "No videos found in this playlist." }, void 0, false, {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1271,
          columnNumber: 11
        }, this),
        regularVideos.length > itemsPerPage && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center items-center gap-4 mt-8 mb-4", children: [
          /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => setCurrentPage((prev) => Math.max(prev - 1, 1)),
              disabled: currentPage === 1,
              className: "px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium transition-colors border border-slate-600 text-sky-400 hover:text-sky-300",
              children: "Previous"
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
              lineNumber: 1279,
              columnNumber: 17
            },
            this
          ),
          /* @__PURE__ */ jsxDEV("span", { className: "text-slate-400 font-medium", children: [
            "Page ",
            currentPage,
            " of ",
            Math.ceil(regularVideos.length / itemsPerPage)
          ] }, void 0, true, {
            fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
            lineNumber: 1287,
            columnNumber: 17
          }, this),
          /* @__PURE__ */ jsxDEV(
            "button",
            {
              onClick: () => setCurrentPage((prev) => Math.min(prev + 1, Math.ceil(regularVideos.length / itemsPerPage))),
              disabled: currentPage >= Math.ceil(regularVideos.length / itemsPerPage),
              className: "px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-medium transition-colors border border-slate-600 text-sky-400 hover:text-sky-300",
              children: "Next"
            },
            void 0,
            false,
            {
              fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
              lineNumber: 1291,
              columnNumber: 17
            },
            this
          )
        ] }, void 0, true, {
          fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
          lineNumber: 1278,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
        lineNumber: 1156,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
      lineNumber: 1007,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV(
      PlaylistSelectionModal,
      {
        isOpen: showPlaylistSelector,
        onClose: () => {
          setShowPlaylistSelector(false);
          setSelectedVideoForAction(null);
          setActionType(null);
        },
        onSelect: handlePlaylistSelect,
        title: actionType === "move" ? "Move to Playlist" : "Copy to Playlist"
      },
      void 0,
      false,
      {
        fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
        lineNumber: 1306,
        columnNumber: 7
      },
      this
    )
  ] }, void 0, true, {
    fileName: "C:/Projects/yttv2/src/components/VideosPage.jsx",
    lineNumber: 996,
    columnNumber: 5
  }, this);
};
_s(VideosPage, "5PkqXEH2DCKJQzOP0dhgewIVX/8=", false, function() {
  return [usePlaylistStore, useFolderStore, useShuffleStore, useLayoutStore, useNavigationStore, useConfigStore, useStickyStore];
});
_c = VideosPage;
export default VideosPage;
var _c;
$RefreshReg$(_c, "VideosPage");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/VideosPage.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/VideosPage.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QUE7QUFBQSxJQVF5RTtBQUFBLE9BOVQzRTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBZ1VBO0FBRUo7QUFBRS9FLEdBM3ZDSUgsWUFBVTtBQUFBLFVBWVY1QyxrQkFlQUMsZ0JBQ3VDMEMsaUJBQ0l6QyxnQkFDMEJzQixvQkF3QldrQixnQkF3RFp2QixjQUFjO0FBQUE7QUFBQXNTLEtBOUdsRjdRO0FBNnZDTixlQUFlQTtBQUFXLElBQUE2UTtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VQbGF5bGlzdFN0b3JlIiwidXNlRm9sZGVyU3RvcmUiLCJ1c2VMYXlvdXRTdG9yZSIsImFzc2lnblZpZGVvVG9Gb2xkZXIiLCJ1bmFzc2lnblZpZGVvRnJvbUZvbGRlciIsImdldFZpZGVvRm9sZGVyQXNzaWdubWVudHMiLCJnZXRBbGxGb2xkZXJBc3NpZ25tZW50cyIsImdldFZpZGVvc0luRm9sZGVyIiwicmVtb3ZlVmlkZW9Gcm9tUGxheWxpc3QiLCJnZXRXYXRjaGVkVmlkZW9JZHMiLCJnZXRBbGxWaWRlb1Byb2dyZXNzIiwiRk9MREVSX0NPTE9SUyIsImdldEZvbGRlckNvbG9yQnlJZCIsImV4dHJhY3RWaWRlb0lkIiwiVmlkZW9DYXJkIiwiUGxheWxpc3RTZWxlY3Rpb25Nb2RhbCIsIlBsYXlsaXN0VXBsb2FkZXIiLCJhZGRWaWRlb1RvUGxheWxpc3QiLCJnZXRQbGF5bGlzdEl0ZW1zIiwidXNlU3RpY2t5U3RvcmUiLCJTdGlja3lWaWRlb0Nhcm91c2VsIiwiUGFnZUJhbm5lciIsIkVkaXRQbGF5bGlzdE1vZGFsIiwiVW5pZmllZEJhbm5lckJhY2tncm91bmQiLCJ1c2VOYXZpZ2F0aW9uU3RvcmUiLCJTdGFyIiwiTW9yZVZlcnRpY2FsIiwiUGx1cyIsIlBsYXkiLCJDaGVjayIsIlgiLCJBcnJvd1VwIiwiQ2xvY2siLCJIZWFydCIsIlBpbiIsIlNldHRpbmdzIiwiQ2F0IiwiVmlkZW9DYXJkU2tlbGV0b24iLCJ1cGRhdGVQbGF5bGlzdCIsImdldEFsbFBsYXlsaXN0cyIsImdldEZvbGRlck1ldGFkYXRhIiwic2V0Rm9sZGVyTWV0YWRhdGEiLCJ1c2VDb25maWdTdG9yZSIsInVzZVNodWZmbGVTdG9yZSIsIlZpZGVvc1BhZ2UiLCJvblZpZGVvU2VsZWN0Iiwib25TZWNvbmRQbGF5ZXJTZWxlY3QiLCJfcyIsImN1cnJlbnRQbGF5bGlzdEl0ZW1zIiwiY3VycmVudFZpZGVvSW5kZXgiLCJjdXJyZW50UGxheWxpc3RJZCIsInNldFBsYXlsaXN0SXRlbXMiLCJwcmV2aWV3UGxheWxpc3RJdGVtcyIsInByZXZpZXdQbGF5bGlzdElkIiwicHJldmlld0ZvbGRlckluZm8iLCJzZXRQcmV2aWV3UGxheWxpc3QiLCJhbGxQbGF5bGlzdHMiLCJzZXRBbGxQbGF5bGlzdHMiLCJzZWxlY3RlZFZpZGVvSW5kZXgiLCJzZXRTZWxlY3RlZFZpZGVvSW5kZXgiLCJzZWxlY3RlZEZvbGRlciIsInNldFNlbGVjdGVkRm9sZGVyIiwic2V0VmlkZW9Gb2xkZXJzIiwidmlkZW9Gb2xkZXJBc3NpZ25tZW50cyIsImxvYWRWaWRlb0ZvbGRlcnMiLCJxdWlja0Fzc2lnbkZvbGRlciIsInNldFF1aWNrQXNzaWduRm9sZGVyIiwiYnVsa1RhZ01vZGUiLCJzZXRCdWxrVGFnTW9kZSIsImJ1bGtUYWdTZWxlY3Rpb25zIiwidG9nZ2xlQnVsa1RhZ1NlbGVjdGlvbiIsImNsZWFyQnVsa1RhZ1NlbGVjdGlvbnMiLCJzaHVmZmxlU3RhdGVzIiwiZ2V0U2h1ZmZsZVN0YXRlIiwic2V0Vmlld01vZGUiLCJpbnNwZWN0TW9kZSIsInZpZXdNb2RlIiwiY3VycmVudFBhZ2UiLCJjdXJyZW50TmF2VGFiIiwic2V0Q3VycmVudFBhZ2UiLCJzZXRDdXJyZW50TmF2VGFiIiwic2Nyb2xsQ29udGFpbmVyUmVmIiwic2Nyb2xsVG9Ub3AiLCJjdXJyZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJiZWhhdmlvciIsInRhYnMiLCJpZCIsImxhYmVsIiwiaWNvbiIsImhhbmRsZVRhYkNsaWNrIiwidGFiSWQiLCJpc05hdmlnYXRpb25UYWIiLCJpbmNsdWRlcyIsInVzZXJOYW1lIiwidXNlckF2YXRhciIsImN1c3RvbVBhZ2VCYW5uZXJJbWFnZSIsImJhbm5lckhlaWdodCIsImJhbm5lckJnU2l6ZSIsImdldEluc3BlY3RUaXRsZSIsInVuZGVmaW5lZCIsImRpc3BsYXllZFZpZGVvcyIsInNldERpc3BsYXllZFZpZGVvcyIsImxvYWRpbmdGb2xkZXJzIiwic2V0TG9hZGluZ0ZvbGRlcnMiLCJzYXZpbmdCdWxrVGFncyIsInNldFNhdmluZ0J1bGtUYWdzIiwic29ydEJ5Iiwic2V0U29ydEJ5Iiwic29ydERpcmVjdGlvbiIsInNldFNvcnREaXJlY3Rpb24iLCJpbmNsdWRlVW53YXRjaGVkIiwic2V0SW5jbHVkZVVud2F0Y2hlZCIsInNob3dPbmx5Q29tcGxldGVkIiwic2V0U2hvd09ubHlDb21wbGV0ZWQiLCJ3YXRjaGVkVmlkZW9JZHMiLCJzZXRXYXRjaGVkVmlkZW9JZHMiLCJTZXQiLCJ2aWRlb1Byb2dyZXNzIiwic2V0VmlkZW9Qcm9ncmVzcyIsIk1hcCIsInNob3dQbGF5bGlzdFNlbGVjdG9yIiwic2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IiLCJzZWxlY3RlZFZpZGVvRm9yQWN0aW9uIiwic2V0U2VsZWN0ZWRWaWRlb0ZvckFjdGlvbiIsImFjdGlvblR5cGUiLCJzZXRBY3Rpb25UeXBlIiwic2hvd1VwbG9hZGVyIiwic2V0U2hvd1VwbG9hZGVyIiwic2hvd0VkaXRNb2RhbCIsInNldFNob3dFZGl0TW9kYWwiLCJmb2xkZXJNZXRhZGF0YSIsInNldEZvbGRlck1ldGFkYXRhU3RhdGUiLCJhY3RpdmVQbGF5bGlzdEl0ZW1zIiwiYWN0aXZlUGxheWxpc3RJZCIsIml0ZW1zUGVyUGFnZSIsImxlbmd0aCIsImlzU3RpY2tpZWQiLCJ0b2dnbGVTdGlja3kiLCJzdGlja2llZFZpZGVvcyIsImFsbFN0aWNraWVkVmlkZW9zIiwiaGFuZGxlVG9nZ2xlU3RpY2t5IiwicGxheWxpc3RJZCIsInZpZGVvSWQiLCJjb25zb2xlIiwibG9nIiwibG9hZFByb2dyZXNzIiwid2F0Y2hlZElkcyIsImFsbFByb2dyZXNzIiwicHJvZ3Jlc3NNYXAiLCJwcm9ncmVzcyIsInNldCIsInZpZGVvX2lkIiwicGVyY2VudGFnZSIsInByb2dyZXNzX3BlcmNlbnRhZ2UiLCJoYXNGdWxseVdhdGNoZWQiLCJoYXNfZnVsbHlfd2F0Y2hlZCIsImxhc3RfdXBkYXRlZCIsImVycm9yIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInJlZnJlc2hQcm9ncmVzcyIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJsb2FkQXNzaWdubWVudHMiLCJhc3NpZ25tZW50cyIsIm1hcCIsInYiLCJmaWx0ZXJWaWRlb3MiLCJ1bnNvcnRlZFZpZGVvcyIsInZpZGVvIiwiZm9sZGVycyIsInB1c2giLCJ2aWRlb3MiLCJBcnJheSIsImlzQXJyYXkiLCJoYW5kbGVNZW51T3B0aW9uQ2xpY2siLCJvcHRpb24iLCJhY3Rpb24iLCJ3YXJuIiwiY29uZmlybWVkIiwid2luZG93IiwiY29uZmlybSIsInRpdGxlIiwicHJldiIsImZpbHRlciIsInVwZGF0ZWRJdGVtcyIsImZvbGRlckNvbG9yIiwiY3VycmVudEZvbGRlcnMiLCJpc0Fzc2lnbmVkIiwiZiIsImNvdmVyVXJsIiwiYWxlcnQiLCJwbGF5bGlzdHMiLCJ0b0xvd2VyQ2FzZSIsIm1lc3NhZ2UiLCJoYW5kbGVTdGFyQ2xpY2siLCJlIiwidGFyZ2V0Rm9sZGVyIiwidXBkYXRlZEZvbGRlcnMiLCJoYW5kbGVTdGFyQ29sb3JMZWZ0Q2xpY2siLCJoYW5kbGVTdGFyQ29sb3JSaWdodENsaWNrIiwiaGFuZGxlVmlkZW9DbGljayIsImluZGV4IiwicGxheWxpc3QiLCJmaW5kIiwicCIsIm5hbWUiLCJvcmlnaW5hbEluZGV4IiwiZmluZEluZGV4IiwidmlkZW9fdXJsIiwiaGFuZGxlQnVsa1RhZ0NvbG9yQ2xpY2siLCJoYW5kbGVTYXZlQnVsa1RhZ3MiLCJzZWxlY3Rpb25zIiwiT2JqZWN0IiwiZW50cmllcyIsInN1Y2Nlc3NDb3VudCIsImVycm9yQ291bnQiLCJmb2xkZXJDb2xvcnMiLCJ2aWRlb0lkTnVtIiwicGFyc2VJbnQiLCJmcm9tIiwiZm9sZGVyc1RvQWRkIiwiZm9sZGVyc1RvUmVtb3ZlIiwiaGFuZGxlQ2FuY2VsQnVsa1RhZ3MiLCJoYW5kbGVQbGF5bGlzdFNlbGVjdCIsInRodW1ibmFpbF91cmwiLCJmb2xkZXJDb3VudHMiLCJjb3VudHMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiZm9sZGVySWQiLCJoYW5kbGVVcGxvYWRDb21wbGV0ZSIsIml0ZW1zIiwiZmV0Y2hNZXRhZGF0YSIsIm1ldGFkYXRhIiwiZGVzY3JpcHRpb24iLCJjdXN0b21Bc2NpaSIsImhhbmRsZVVwZGF0ZU1ldGFkYXRhIiwiZGF0YSIsInNvcnRlZFZpZGVvcyIsImJhc2VWaWRlb3MiLCJzdGF0ZSIsInNvcnQiLCJhIiwiYiIsInJhbmtBIiwicmFua0IiLCJmaWx0ZXJlZCIsImdldCIsInNvcnRlZCIsImlkQSIsImlkQiIsImRhdGFBIiwiZGF0YUIiLCJwcm9ncmVzc0EiLCJwcm9ncmVzc0IiLCJ2aWRlb3NUb0Rpc3BsYXkiLCJmb2xkZXJLZXkiLCJrZXkiLCJzdGlja2llcyIsInJlZ3VsYXJWaWRlb3MiLCJidWxrVGFnU2VsZWN0aW9uQ291bnQiLCJyZWR1Y2UiLCJ0b3RhbCIsInNpemUiLCJhY3RpdmVPYmplY3QiLCJiYW5uZXJJbmZvIiwiY29sb3IiLCJpc0VkaXRhYmxlIiwiaGV4IiwiY29sb3JJbmZvIiwiYyIsImN1c3RvbV9hc2NpaSIsIm1vZGFsSW5pdGlhbERhdGEiLCJkZWZhdWx0TmFtZSIsImNvbnRpbnVlVmlkZW8iLCJtb3N0UmVjZW50IiwibWF4VGltZSIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImlzU3R1Y2siLCJzZXRJc1N0dWNrIiwic3RpY2t5U2VudGluZWxSZWYiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cnkiLCJpbnRlcnNlY3Rpb25SYXRpbyIsImJvdW5kaW5nQ2xpZW50UmVjdCIsInRocmVzaG9sZCIsInJvb3RNYXJnaW4iLCJvYnNlcnZlIiwiZGlzY29ubmVjdCIsImJhY2tncm91bmRDb2xvciIsInRhcmdldCIsInZhbHVlIiwiaXNTZWxlY3RlZCIsImlzRmlyc3QiLCJpc0xhc3QiLCJjb3VudCIsIl8iLCJpIiwiaGFzIiwic2xpY2UiLCJpc0NvbnRleHRTdGlja2llZCIsIk1hdGgiLCJtYXgiLCJjZWlsIiwibWluIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiVmlkZW9zUGFnZS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUGxheWxpc3RTdG9yZSB9IGZyb20gJy4uL3N0b3JlL3BsYXlsaXN0U3RvcmUnO1xyXG5pbXBvcnQgeyB1c2VGb2xkZXJTdG9yZSB9IGZyb20gJy4uL3N0b3JlL2ZvbGRlclN0b3JlJztcclxuaW1wb3J0IHsgdXNlTGF5b3V0U3RvcmUgfSBmcm9tICcuLi9zdG9yZS9sYXlvdXRTdG9yZSc7XHJcbmltcG9ydCB7IGFzc2lnblZpZGVvVG9Gb2xkZXIsIHVuYXNzaWduVmlkZW9Gcm9tRm9sZGVyLCBnZXRWaWRlb0ZvbGRlckFzc2lnbm1lbnRzLCBnZXRBbGxGb2xkZXJBc3NpZ25tZW50cywgZ2V0VmlkZW9zSW5Gb2xkZXIsIHJlbW92ZVZpZGVvRnJvbVBsYXlsaXN0LCBnZXRXYXRjaGVkVmlkZW9JZHMsIGdldEFsbFZpZGVvUHJvZ3Jlc3MgfSBmcm9tICcuLi9hcGkvcGxheWxpc3RBcGknO1xyXG5pbXBvcnQgeyBGT0xERVJfQ09MT1JTLCBnZXRGb2xkZXJDb2xvckJ5SWQgfSBmcm9tICcuLi91dGlscy9mb2xkZXJDb2xvcnMnO1xyXG5pbXBvcnQgeyBleHRyYWN0VmlkZW9JZCB9IGZyb20gJy4uL3V0aWxzL3lvdXR1YmVVdGlscyc7XHJcbmltcG9ydCBWaWRlb0NhcmQgZnJvbSAnLi9WaWRlb0NhcmQnO1xyXG5pbXBvcnQgUGxheWxpc3RTZWxlY3Rpb25Nb2RhbCBmcm9tICcuL1BsYXlsaXN0U2VsZWN0aW9uTW9kYWwnO1xyXG5pbXBvcnQgUGxheWxpc3RVcGxvYWRlciBmcm9tICcuL1BsYXlsaXN0VXBsb2FkZXInO1xyXG5pbXBvcnQgeyBhZGRWaWRlb1RvUGxheWxpc3QsIGdldFBsYXlsaXN0SXRlbXMgfSBmcm9tICcuLi9hcGkvcGxheWxpc3RBcGknO1xyXG5pbXBvcnQgeyB1c2VTdGlja3lTdG9yZSB9IGZyb20gJy4uL3N0b3JlL3N0aWNreVN0b3JlJztcclxuaW1wb3J0IFN0aWNreVZpZGVvQ2Fyb3VzZWwgZnJvbSAnLi9TdGlja3lWaWRlb0Nhcm91c2VsJztcclxuaW1wb3J0IFBhZ2VCYW5uZXIgZnJvbSAnLi9QYWdlQmFubmVyJztcclxuaW1wb3J0IEVkaXRQbGF5bGlzdE1vZGFsIGZyb20gJy4vRWRpdFBsYXlsaXN0TW9kYWwnO1xyXG5pbXBvcnQgVW5pZmllZEJhbm5lckJhY2tncm91bmQgZnJvbSAnLi9VbmlmaWVkQmFubmVyQmFja2dyb3VuZCc7XHJcbmltcG9ydCB7IHVzZU5hdmlnYXRpb25TdG9yZSB9IGZyb20gJy4uL3N0b3JlL25hdmlnYXRpb25TdG9yZSc7XHJcbmltcG9ydCB7IFN0YXIsIE1vcmVWZXJ0aWNhbCwgUGx1cywgUGxheSwgQ2hlY2ssIFgsIEFycm93VXAsIENsb2NrLCBIZWFydCwgUGluLCBTZXR0aW5ncywgQ2F0IH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IFZpZGVvQ2FyZFNrZWxldG9uIGZyb20gJy4vc2tlbGV0b25zL1ZpZGVvQ2FyZFNrZWxldG9uJztcclxuaW1wb3J0IHsgdXBkYXRlUGxheWxpc3QsIGdldEFsbFBsYXlsaXN0cywgZ2V0Rm9sZGVyTWV0YWRhdGEsIHNldEZvbGRlck1ldGFkYXRhIH0gZnJvbSAnLi4vYXBpL3BsYXlsaXN0QXBpJztcclxuaW1wb3J0IHsgdXNlQ29uZmlnU3RvcmUgfSBmcm9tICcuLi9zdG9yZS9jb25maWdTdG9yZSc7XHJcbmltcG9ydCB7IHVzZVNodWZmbGVTdG9yZSB9IGZyb20gJy4uL3N0b3JlL3NodWZmbGVTdG9yZSc7XHJcblxyXG5jb25zdCBWaWRlb3NQYWdlID0gKHsgb25WaWRlb1NlbGVjdCwgb25TZWNvbmRQbGF5ZXJTZWxlY3QgfSkgPT4ge1xyXG4gIGNvbnN0IHtcclxuICAgIGN1cnJlbnRQbGF5bGlzdEl0ZW1zLFxyXG4gICAgY3VycmVudFZpZGVvSW5kZXgsXHJcbiAgICBjdXJyZW50UGxheWxpc3RJZCxcclxuICAgIHNldFBsYXlsaXN0SXRlbXMsXHJcbiAgICBwcmV2aWV3UGxheWxpc3RJdGVtcyxcclxuICAgIHByZXZpZXdQbGF5bGlzdElkLFxyXG4gICAgcHJldmlld0ZvbGRlckluZm8sXHJcbiAgICBzZXRQcmV2aWV3UGxheWxpc3QsXHJcbiAgICBhbGxQbGF5bGlzdHMsXHJcbiAgICBzZXRBbGxQbGF5bGlzdHMsXHJcbiAgfSA9IHVzZVBsYXlsaXN0U3RvcmUoKTtcclxuICBjb25zdCBbc2VsZWN0ZWRWaWRlb0luZGV4LCBzZXRTZWxlY3RlZFZpZGVvSW5kZXhdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3Qge1xyXG4gICAgc2VsZWN0ZWRGb2xkZXIsXHJcbiAgICBzZXRTZWxlY3RlZEZvbGRlcixcclxuICAgIHNldFZpZGVvRm9sZGVycyxcclxuICAgIHZpZGVvRm9sZGVyQXNzaWdubWVudHMsXHJcbiAgICBsb2FkVmlkZW9Gb2xkZXJzLFxyXG4gICAgcXVpY2tBc3NpZ25Gb2xkZXIsXHJcbiAgICBzZXRRdWlja0Fzc2lnbkZvbGRlcixcclxuICAgIGJ1bGtUYWdNb2RlLFxyXG4gICAgc2V0QnVsa1RhZ01vZGUsXHJcbiAgICBidWxrVGFnU2VsZWN0aW9ucyxcclxuICAgIHRvZ2dsZUJ1bGtUYWdTZWxlY3Rpb24sXHJcbiAgICBjbGVhckJ1bGtUYWdTZWxlY3Rpb25zLFxyXG4gIH0gPSB1c2VGb2xkZXJTdG9yZSgpO1xyXG4gIGNvbnN0IHsgc2h1ZmZsZVN0YXRlcywgZ2V0U2h1ZmZsZVN0YXRlIH0gPSB1c2VTaHVmZmxlU3RvcmUoKTtcclxuICBjb25zdCB7IHNldFZpZXdNb2RlLCBpbnNwZWN0TW9kZSwgdmlld01vZGUgfSA9IHVzZUxheW91dFN0b3JlKCk7XHJcbiAgY29uc3QgeyBjdXJyZW50UGFnZTogY3VycmVudE5hdlRhYiwgc2V0Q3VycmVudFBhZ2U6IHNldEN1cnJlbnROYXZUYWIgfSA9IHVzZU5hdmlnYXRpb25TdG9yZSgpO1xyXG4gIGNvbnN0IHNjcm9sbENvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgY29uc3Qgc2Nyb2xsVG9Ub3AgPSAoKSA9PiB7XHJcbiAgICBzY3JvbGxDb250YWluZXJSZWYuY3VycmVudD8uc2Nyb2xsVG8oeyB0b3A6IDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCB0YWJzID0gW1xyXG4gICAgeyBpZDogJ3BsYXlsaXN0cycsIGxhYmVsOiAnUGxheWxpc3RzJyB9LFxyXG4gICAgeyBpZDogJ3ZpZGVvcycsIGxhYmVsOiAnVmlkZW9zJyB9LFxyXG4gICAgeyBpZDogJ2hpc3RvcnknLCBsYWJlbDogJ0hpc3RvcnknLCBpY29uOiA8Q2xvY2sgc2l6ZT17MTZ9IC8+IH0sXHJcbiAgICB7IGlkOiAnbGlrZXMnLCBsYWJlbDogJ0xpa2VzJywgaWNvbjogPEhlYXJ0IHNpemU9ezE2fSAvPiB9LFxyXG4gICAgeyBpZDogJ3BpbnMnLCBsYWJlbDogJ1BpbnMnLCBpY29uOiA8UGluIHNpemU9ezE2fSAvPiB9LFxyXG4gICAgeyBpZDogJ3NldHRpbmdzJywgbGFiZWw6ICdTZXR0aW5ncycsIGljb246IDxTZXR0aW5ncyBzaXplPXsxNn0gLz4gfSxcclxuICAgIHsgaWQ6ICdzdXBwb3J0JywgbGFiZWw6ICdTdXBwb3J0JywgaWNvbjogPENhdCBzaXplPXsxNn0gLz4gfSxcclxuICBdO1xyXG5cclxuICBjb25zdCBoYW5kbGVUYWJDbGljayA9ICh0YWJJZCkgPT4ge1xyXG4gICAgc2V0Q3VycmVudE5hdlRhYih0YWJJZCk7XHJcbiAgICBjb25zdCBpc05hdmlnYXRpb25UYWIgPSBbJ3BsYXlsaXN0cycsICd2aWRlb3MnLCAnaGlzdG9yeScsICdsaWtlcycsICdwaW5zJywgJ3NldHRpbmdzJywgJ3N1cHBvcnQnXS5pbmNsdWRlcyh0YWJJZCk7XHJcbiAgICBpZiAoaXNOYXZpZ2F0aW9uVGFiICYmIHZpZXdNb2RlID09PSAnZnVsbCcpIHtcclxuICAgICAgc2V0Vmlld01vZGUoJ2hhbGYnKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGNvbnN0IHsgdXNlck5hbWUsIHVzZXJBdmF0YXIsIGN1c3RvbVBhZ2VCYW5uZXJJbWFnZSwgYmFubmVySGVpZ2h0LCBiYW5uZXJCZ1NpemUgfSA9IHVzZUNvbmZpZ1N0b3JlKCk7XHJcblxyXG4gIC8vIEhlbHBlciB0byBnZXQgaW5zcGVjdCBsYWJlbFxyXG4gIGNvbnN0IGdldEluc3BlY3RUaXRsZSA9IChsYWJlbCkgPT4gaW5zcGVjdE1vZGUgPyBsYWJlbCA6IHVuZGVmaW5lZDtcclxuICBjb25zdCBbZGlzcGxheWVkVmlkZW9zLCBzZXREaXNwbGF5ZWRWaWRlb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtsb2FkaW5nRm9sZGVycywgc2V0TG9hZGluZ0ZvbGRlcnNdID0gdXNlU3RhdGUodHJ1ZSk7IC8vIFN0YXJ0IHRydWUgdG8gc2hvdyBza2VsZXRvbnMgaW1tZWRpYXRlbHlcclxuICBjb25zdCBbc2F2aW5nQnVsa1RhZ3MsIHNldFNhdmluZ0J1bGtUYWdzXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbc29ydEJ5LCBzZXRTb3J0QnldID0gdXNlU3RhdGUoJ3NodWZmbGUnKTsgLy8gJ3NodWZmbGUnLCAnY2hyb25vbG9naWNhbCcsICdwcm9ncmVzcydcclxuICBjb25zdCBbc29ydERpcmVjdGlvbiwgc2V0U29ydERpcmVjdGlvbl0gPSB1c2VTdGF0ZSgnZGVzYycpOyAvLyAnYXNjJywgJ2Rlc2MnXHJcbiAgY29uc3QgW2luY2x1ZGVVbndhdGNoZWQsIHNldEluY2x1ZGVVbndhdGNoZWRdID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW3Nob3dPbmx5Q29tcGxldGVkLCBzZXRTaG93T25seUNvbXBsZXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3dhdGNoZWRWaWRlb0lkcywgc2V0V2F0Y2hlZFZpZGVvSWRzXSA9IHVzZVN0YXRlKG5ldyBTZXQoKSk7XHJcbiAgY29uc3QgW3ZpZGVvUHJvZ3Jlc3MsIHNldFZpZGVvUHJvZ3Jlc3NdID0gdXNlU3RhdGUobmV3IE1hcCgpKTsgLy8gTWFwPHZpZGVvSWQsIHsgcGVyY2VudGFnZTogbnVtYmVyLCBoYXNGdWxseVdhdGNoZWQ6IGJvb2xlYW4gfT5cclxuXHJcbiAgLy8gTW92ZS9Db3B5IHN0YXRlXHJcbiAgY29uc3QgW3Nob3dQbGF5bGlzdFNlbGVjdG9yLCBzZXRTaG93UGxheWxpc3RTZWxlY3Rvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3NlbGVjdGVkVmlkZW9Gb3JBY3Rpb24sIHNldFNlbGVjdGVkVmlkZW9Gb3JBY3Rpb25dID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgW2FjdGlvblR5cGUsIHNldEFjdGlvblR5cGVdID0gdXNlU3RhdGUobnVsbCk7IC8vICdtb3ZlJyBvciAnY29weSdcclxuICBjb25zdCBbc2hvd1VwbG9hZGVyLCBzZXRTaG93VXBsb2FkZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtzaG93RWRpdE1vZGFsLCBzZXRTaG93RWRpdE1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZm9sZGVyTWV0YWRhdGEsIHNldEZvbGRlck1ldGFkYXRhU3RhdGVdID0gdXNlU3RhdGUobnVsbCk7IC8vIHsgY3VzdG9tX25hbWUsIGRlc2NyaXB0aW9uIH1cclxuXHJcbiAgLy8gVXNlIHByZXZpZXcgaXRlbXMgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIGN1cnJlbnQgcGxheWxpc3QgaXRlbXNcclxuICBjb25zdCBhY3RpdmVQbGF5bGlzdEl0ZW1zID0gcHJldmlld1BsYXlsaXN0SXRlbXMgfHwgY3VycmVudFBsYXlsaXN0SXRlbXM7XHJcbiAgY29uc3QgYWN0aXZlUGxheWxpc3RJZCA9IHByZXZpZXdQbGF5bGlzdElkIHx8IGN1cnJlbnRQbGF5bGlzdElkO1xyXG5cclxuICAvLyBQYWdpbmF0aW9uIHN0YXRlXHJcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZSgxKTtcclxuICBjb25zdCBpdGVtc1BlclBhZ2UgPSA1MDtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIC8vIFJlc2V0IHBhZ2Ugd2hlbiBwbGF5bGlzdCwgZm9sZGVyLCBvciBzb3J0IGZpbHRlcnMgY2hhbmdlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNldEN1cnJlbnRQYWdlKDEpO1xyXG4gICAgaWYgKHNjcm9sbENvbnRhaW5lclJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHNjcm9sbENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgfVxyXG4gIH0sIFthY3RpdmVQbGF5bGlzdElkLCBzZWxlY3RlZEZvbGRlciwgc29ydEJ5LCBzb3J0RGlyZWN0aW9uLCBpbmNsdWRlVW53YXRjaGVkLCBzaG93T25seUNvbXBsZXRlZF0pO1xyXG5cclxuICAvLyBTY3JvbGwgdG8gdG9wIHdoZW4gcGFnZSBjaGFuZ2VzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChzY3JvbGxDb250YWluZXJSZWYuY3VycmVudCkge1xyXG4gICAgICBzY3JvbGxDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxUbygwLCAwKTtcclxuICAgIH1cclxuICB9LCBbY3VycmVudFBhZ2VdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIFN5bmMgc2VsZWN0ZWQgdmlkZW8gd2l0aCBjdXJyZW50IHBsYXlpbmcgdmlkZW9cclxuICAgIGlmIChjdXJyZW50VmlkZW9JbmRleCA+PSAwICYmIGFjdGl2ZVBsYXlsaXN0SXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBzZXRTZWxlY3RlZFZpZGVvSW5kZXgoY3VycmVudFZpZGVvSW5kZXgpO1xyXG4gICAgfVxyXG4gIH0sIFtjdXJyZW50VmlkZW9JbmRleCwgYWN0aXZlUGxheWxpc3RJdGVtc10pO1xyXG5cclxuICBjb25zdCB7IGlzU3RpY2tpZWQsIHRvZ2dsZVN0aWNreSwgc3RpY2tpZWRWaWRlb3M6IGFsbFN0aWNraWVkVmlkZW9zIH0gPSB1c2VTdGlja3lTdG9yZSgpO1xyXG5cclxuICBjb25zdCBoYW5kbGVUb2dnbGVTdGlja3kgPSAocGxheWxpc3RJZCwgdmlkZW9JZCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFtWaWRlb3NQYWdlXSBUb2dnbGluZyBzdGlja3kgZm9yIHBsYXlsaXN0ICR7cGxheWxpc3RJZH0sIHZpZGVvICR7dmlkZW9JZH0sIGZvbGRlciAke3NlbGVjdGVkRm9sZGVyfWApO1xyXG4gICAgLy8gUGFzcyBzZWxlY3RlZEZvbGRlciB0byB0b2dnbGUgZnVuY3Rpb24gdG8gc2NvcGUgdGhlIGtleVxyXG4gICAgdG9nZ2xlU3RpY2t5KHBsYXlsaXN0SWQsIHZpZGVvSWQsIHNlbGVjdGVkRm9sZGVyKTtcclxuICB9O1xyXG5cclxuICAvLyBEZWJ1ZyBlZmZlY3RcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ1tWaWRlb3NQYWdlXSBBY3RpdmUgUGxheWxpc3Q6JywgYWN0aXZlUGxheWxpc3RJZCk7XHJcbiAgICBjb25zb2xlLmxvZygnW1ZpZGVvc1BhZ2VdIFN0aWNreSBEYXRhOicsIGFsbFN0aWNraWVkVmlkZW9zKTtcclxuICAgIGNvbnNvbGUubG9nKCdbVmlkZW9zUGFnZV0gU2VsZWN0ZWQgRm9sZGVyOicsIHNlbGVjdGVkRm9sZGVyKTtcclxuICB9LCBbYWN0aXZlUGxheWxpc3RJZCwgYWxsU3RpY2tpZWRWaWRlb3MsIHNlbGVjdGVkRm9sZGVyXSk7XHJcblxyXG4gIC8vIFJlc2V0IHNlbGVjdGVkIGZvbGRlciB3aGVuIHBsYXlsaXN0IGNoYW5nZXMgdG8gcHJldmVudCBzaG93aW5nIHdyb25nIHZpZGVvc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBzZXRTZWxlY3RlZEZvbGRlcihudWxsKTtcclxuICB9LCBbYWN0aXZlUGxheWxpc3RJZCwgc2V0U2VsZWN0ZWRGb2xkZXJdKTtcclxuXHJcbiAgLy8gQ2xlYXIgYnVsayB0YWcgc2VsZWN0aW9ucyB3aGVuIGV4aXRpbmcgYnVsayB0YWcgbW9kZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWJ1bGtUYWdNb2RlKSB7XHJcbiAgICAgIGNsZWFyQnVsa1RhZ1NlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuICB9LCBbYnVsa1RhZ01vZGUsIGNsZWFyQnVsa1RhZ1NlbGVjdGlvbnNdKTtcclxuXHJcbiAgLy8gTG9hZCB2aWRlbyBwcm9ncmVzcyBkYXRhIGZvciBzb3J0aW5nXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGxvYWRQcm9ncmVzcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBMb2FkIHdhdGNoZWQgdmlkZW8gSURzICg+PSA4NSUgcHJvZ3Jlc3MpXHJcbiAgICAgICAgY29uc3Qgd2F0Y2hlZElkcyA9IGF3YWl0IGdldFdhdGNoZWRWaWRlb0lkcygpO1xyXG4gICAgICAgIHNldFdhdGNoZWRWaWRlb0lkcyhuZXcgU2V0KHdhdGNoZWRJZHMpKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCBhbGwgdmlkZW8gcHJvZ3Jlc3NcclxuICAgICAgICBjb25zdCBhbGxQcm9ncmVzcyA9IGF3YWl0IGdldEFsbFZpZGVvUHJvZ3Jlc3MoKTtcclxuICAgICAgICBjb25zdCBwcm9ncmVzc01hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHByb2dyZXNzIG9mIGFsbFByb2dyZXNzKSB7XHJcbiAgICAgICAgICBwcm9ncmVzc01hcC5zZXQocHJvZ3Jlc3MudmlkZW9faWQsIHtcclxuICAgICAgICAgICAgcGVyY2VudGFnZTogcHJvZ3Jlc3MucHJvZ3Jlc3NfcGVyY2VudGFnZSxcclxuICAgICAgICAgICAgaGFzRnVsbHlXYXRjaGVkOiBwcm9ncmVzcy5oYXNfZnVsbHlfd2F0Y2hlZCxcclxuICAgICAgICAgICAgbGFzdF91cGRhdGVkOiBwcm9ncmVzcy5sYXN0X3VwZGF0ZWRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRWaWRlb1Byb2dyZXNzKHByb2dyZXNzTWFwKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCB2aWRlbyBwcm9ncmVzczonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbG9hZFByb2dyZXNzKCk7XHJcblxyXG4gICAgLy8gUG9sbCBmb3IgcHJvZ3Jlc3MgdXBkYXRlcyBldmVyeSA1IHNlY29uZHMgdG8ga2VlcCBVSSBmcmVzaFxyXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGxvYWRQcm9ncmVzcywgNTAwMCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBSZWZyZXNoIHZpZGVvIHByb2dyZXNzIHdoZW4gY3VycmVudCB2aWRlbyBjaGFuZ2VzICh0byB1cGRhdGUgc29ydGluZyBpbiByZWFsLXRpbWUpXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHJlZnJlc2hQcm9ncmVzcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKGFjdGl2ZVBsYXlsaXN0SXRlbXMubGVuZ3RoID4gMCAmJiBjdXJyZW50VmlkZW9JbmRleCA8IGFjdGl2ZVBsYXlsaXN0SXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFJlZnJlc2ggd2F0Y2hlZCB2aWRlbyBJRHNcclxuICAgICAgICAgIGNvbnN0IHdhdGNoZWRJZHMgPSBhd2FpdCBnZXRXYXRjaGVkVmlkZW9JZHMoKTtcclxuICAgICAgICAgIHNldFdhdGNoZWRWaWRlb0lkcyhuZXcgU2V0KHdhdGNoZWRJZHMpKTtcclxuXHJcbiAgICAgICAgICAvLyBSZWZyZXNoIGFsbCBwcm9ncmVzcyBkYXRhXHJcbiAgICAgICAgICBjb25zdCBhbGxQcm9ncmVzcyA9IGF3YWl0IGdldEFsbFZpZGVvUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgIGNvbnN0IHByb2dyZXNzTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBwcm9ncmVzcyBvZiBhbGxQcm9ncmVzcykge1xyXG4gICAgICAgICAgICBwcm9ncmVzc01hcC5zZXQocHJvZ3Jlc3MudmlkZW9faWQsIHtcclxuICAgICAgICAgICAgICBwZXJjZW50YWdlOiBwcm9ncmVzcy5wcm9ncmVzc19wZXJjZW50YWdlLFxyXG4gICAgICAgICAgICAgIGhhc0Z1bGx5V2F0Y2hlZDogcHJvZ3Jlc3MuaGFzX2Z1bGx5X3dhdGNoZWQsXHJcbiAgICAgICAgICAgICAgbGFzdF91cGRhdGVkOiBwcm9ncmVzcy5sYXN0X3VwZGF0ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZXRWaWRlb1Byb2dyZXNzKHByb2dyZXNzTWFwKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlZnJlc2ggdmlkZW8gcHJvZ3Jlc3M6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBEZWJvdW5jZSB0aGUgcmVmcmVzaCB0byBhdm9pZCB0b28gbWFueSBBUEkgY2FsbHNcclxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQocmVmcmVzaFByb2dyZXNzLCAyMDAwKTtcclxuICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICB9LCBbY3VycmVudFZpZGVvSW5kZXgsIGFjdGl2ZVBsYXlsaXN0SXRlbXNdKTtcclxuXHJcbiAgLy8gTG9hZCBmb2xkZXIgYXNzaWdubWVudHMgd2hlbiBwbGF5bGlzdCBjaGFuZ2VzIChidXQgZG9uJ3QgZmlsdGVyIGhlcmUpXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGxvYWRBc3NpZ25tZW50cyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gU2V0IGxvYWRpbmcgdHJ1ZSBpbW1lZGlhdGVseSB3aGVuIElEIGNoYW5nZXNcclxuICAgICAgc2V0TG9hZGluZ0ZvbGRlcnModHJ1ZSk7XHJcblxyXG4gICAgICAvLyBJZiBubyBwbGF5bGlzdCBvciBpdCdzIGVtcHR5LCBjbGVhciBmb2xkZXJzXHJcbiAgICAgIC8vIEFjdHVhbGx5LCBldmVuIGlmIGl0ZW1zIGFyZSBlbXB0eSwgd2UgbWlnaHQgd2FudCB0byBjbGVhciBvciBqdXN0IHdhaXQuXHJcbiAgICAgIC8vIEJ1dCBpZiB3ZSBoYXZlIGFuIElELCB3ZSBjYW4gZmV0Y2ggYXNzaWdubWVudHMuXHJcbiAgICAgIGlmICghYWN0aXZlUGxheWxpc3RJZCkge1xyXG4gICAgICAgIGxvYWRWaWRlb0ZvbGRlcnMoe30pO1xyXG4gICAgICAgIHNldExvYWRpbmdGb2xkZXJzKGZhbHNlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUEVSRk9STUFOQ0U6IEJhdGNoIGZldGNoIGFsbCBmb2xkZXIgYXNzaWdubWVudHMgaW4gT05FIGNhbGxcclxuICAgICAgICAvLyBUaGlzIHJlcGxhY2VzIHRoZSBwcmV2aW91cyBOKzEgbG9vcCB0aGF0IGNhdXNlZCBtYXNzaXZlIHN0dXR0ZXJpbmdcclxuICAgICAgICBjb25zdCBhc3NpZ25tZW50cyA9IGF3YWl0IGdldEFsbEZvbGRlckFzc2lnbm1lbnRzKGFjdGl2ZVBsYXlsaXN0SWQpO1xyXG4gICAgICAgIGxvYWRWaWRlb0ZvbGRlcnMoYXNzaWdubWVudHMgfHwge30pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGZvbGRlciBhc3NpZ25tZW50czonLCBlcnJvcik7XHJcbiAgICAgICAgbG9hZFZpZGVvRm9sZGVycyh7fSk7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0TG9hZGluZ0ZvbGRlcnMoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxvYWRBc3NpZ25tZW50cygpO1xyXG4gIH0sIFthY3RpdmVQbGF5bGlzdElkLCBhY3RpdmVQbGF5bGlzdEl0ZW1zLCBsb2FkVmlkZW9Gb2xkZXJzXSk7XHJcblxyXG4gIC8vIEluaXRpYWxpemUgc2h1ZmZsZSBzdGF0ZSB3aGVuIGVudGVyaW5nIHNodWZmbGUgbW9kZSBvciBwbGF5bGlzdCBsb2FkaW5nXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChhY3RpdmVQbGF5bGlzdElkICYmIGFjdGl2ZVBsYXlsaXN0SXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBXZSBlc3NlbnRpYWxseSB3YW50IHRvIGVuc3VyZSB0aGUgc2h1ZmZsZSBtYXAgZXhpc3RzIGZvciB0aGlzIHBsYXlsaXN0XHJcbiAgICAgIC8vIFRoaXMgaXMgXCJsb3cgY29zdFwiIGJlY2F1c2UgZ2V0U2h1ZmZsZVN0YXRlIGNoZWNrcyBpZiBpdCBleGlzdHMgZmlyc3RcclxuICAgICAgZ2V0U2h1ZmZsZVN0YXRlKGFjdGl2ZVBsYXlsaXN0SWQsIGFjdGl2ZVBsYXlsaXN0SXRlbXMubWFwKHYgPT4gdi5pZCkpO1xyXG4gICAgfVxyXG4gIH0sIFthY3RpdmVQbGF5bGlzdElkLCBhY3RpdmVQbGF5bGlzdEl0ZW1zLCBnZXRTaHVmZmxlU3RhdGVdKTtcclxuXHJcbiAgLy8gRmlsdGVyIHZpZGVvcyBieSBzZWxlY3RlZCBmb2xkZXIgLSB0aGlzIGlzIHRoZSBtYWluIGZpbHRlcmluZyBsb2dpY1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWFjdGl2ZVBsYXlsaXN0SWQgfHwgYWN0aXZlUGxheWxpc3RJdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKFtdKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbHRlclZpZGVvcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKHNlbGVjdGVkRm9sZGVyID09PSBudWxsKSB7XHJcbiAgICAgICAgLy8gU2hvdyBhbGwgdmlkZW9zIHdoZW4gbm8gZm9sZGVyIGlzIHNlbGVjdGVkXHJcbiAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKGFjdGl2ZVBsYXlsaXN0SXRlbXMpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0TG9hZGluZ0ZvbGRlcnModHJ1ZSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkRm9sZGVyID09PSAndW5zb3J0ZWQnKSB7XHJcbiAgICAgICAgICAvLyBGaWx0ZXIgZm9yIHZpZGVvcyB3aXRoIG5vIGZvbGRlciBhc3NpZ25tZW50c1xyXG4gICAgICAgICAgY29uc3QgdW5zb3J0ZWRWaWRlb3MgPSBbXTtcclxuICAgICAgICAgIGZvciAoY29uc3QgdmlkZW8gb2YgYWN0aXZlUGxheWxpc3RJdGVtcykge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBzdG9yZWQgYXNzaWdubWVudHNcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVycyA9IHZpZGVvRm9sZGVyQXNzaWdubWVudHNbdmlkZW8uaWRdO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBsb2FkZWQgYXNzaWdubWVudHMgYW5kIGl0J3MgZW1wdHksIG9yIGlmIHdlIGhhdmVuJ3QgbG9hZGVkLCBsZXQncyBjaGVja1xyXG4gICAgICAgICAgICAvLyBOb3RlOiB2aWRlb0ZvbGRlckFzc2lnbm1lbnRzIGlzIHBvcHVsYXRlZCBvbiBwbGF5bGlzdCBjaGFuZ2UsIHNvIGl0IHNob3VsZCBiZSByZWxpYWJsZS5cclxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdG8gYmUgc2FmZSwgd2UgY291bGQgY2hlY2sgREIgYnV0IHRoYXQncyBzbG93IGZvciBcIlVuc29ydGVkXCIgZmlsdGVyLlxyXG4gICAgICAgICAgICAvLyBMZXQncyByZWx5IG9uIHVzZUZvbGRlclN0b3JlJ3MgbG9hZGVkIHN0YXRlIHdoaWNoIGlzIHJlZnJlc2hlZCBvbiBwbGF5bGlzdCBjaGFuZ2UuXHJcbiAgICAgICAgICAgIGlmICghZm9sZGVycyB8fCBmb2xkZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgIHVuc29ydGVkVmlkZW9zLnB1c2godmlkZW8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVW5zb3J0ZWQgZmlsdGVyOiBGb3VuZCAke3Vuc29ydGVkVmlkZW9zLmxlbmd0aH0gdmlkZW9zYCk7XHJcbiAgICAgICAgICBzZXREaXNwbGF5ZWRWaWRlb3ModW5zb3J0ZWRWaWRlb3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBXaGVuIGEgY29sb3IgZm9sZGVyIGlzIHNlbGVjdGVkLCBvbmx5IHNob3cgdmlkZW9zIGV4cGxpY2l0bHkgYXNzaWduZWQgdG8gdGhhdCBmb2xkZXJcclxuICAgICAgICAgIC8vIFRoZSBkYXRhYmFzZSBxdWVyeSB1c2VzIElOTkVSIEpPSU4gc28gaXQgd2lsbCBvbmx5IHJldHVybiB2aWRlb3Mgd2l0aCBhc3NpZ25tZW50c1xyXG4gICAgICAgICAgY29uc3QgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9zSW5Gb2xkZXIoYWN0aXZlUGxheWxpc3RJZCwgc2VsZWN0ZWRGb2xkZXIpO1xyXG4gICAgICAgICAgLy8gRW5zdXJlIHdlIG9ubHkgc2hvdyB2aWRlb3MgdGhhdCBhcmUgYWN0dWFsbHkgaW4gdGhlIHJlc3VsdCAoc2hvdWxkIGJlIGVtcHR5IGlmIG5vIGFzc2lnbm1lbnRzKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coYEZvbGRlciAke3NlbGVjdGVkRm9sZGVyfTogRm91bmQgJHt2aWRlb3M/Lmxlbmd0aCB8fCAwfSB2aWRlb3Mgd2l0aCBhc3NpZ25tZW50c2ApO1xyXG4gICAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKEFycmF5LmlzQXJyYXkodmlkZW9zKSA/IHZpZGVvcyA6IFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZm9sZGVyIHZpZGVvczonLCBlcnJvcik7XHJcbiAgICAgICAgLy8gT24gZXJyb3IsIHNob3cgZW1wdHkgYXJyYXkgKGZvbGRlciBzaG91bGQgYmUgZW1wdHkpXHJcbiAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKFtdKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRMb2FkaW5nRm9sZGVycyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZmlsdGVyVmlkZW9zKCk7XHJcbiAgfSwgW3NlbGVjdGVkRm9sZGVyLCBhY3RpdmVQbGF5bGlzdElkLCBhY3RpdmVQbGF5bGlzdEl0ZW1zXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1lbnVPcHRpb25DbGljayA9IGFzeW5jIChvcHRpb24sIHZpZGVvKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnaGFuZGxlTWVudU9wdGlvbkNsaWNrOicsIG9wdGlvbi5hY3Rpb24sIHZpZGVvLmlkLCAnYWN0aXZlUGVybWlzc2lvbjonLCAhIWFjdGl2ZVBsYXlsaXN0SWQpO1xyXG4gICAgaWYgKCFhY3RpdmVQbGF5bGlzdElkKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignQWN0aW9uIGF0dGVtcHRlZCB3aXRob3V0IGFjdGl2ZVBsYXlsaXN0SWQnKTtcclxuICAgICAgLy8gVGVtcG9yYXJpbHkgYWxsb3cgZm9yIHRlc3RpbmcgaWYgdGhhdCdzIHRoZSBpc3N1ZSwgb3IgYWxlcnQgdXNlclxyXG4gICAgICAvLyByZXR1cm47IFxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHN3aXRjaCAob3B0aW9uLmFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICBjb25zdCBjb25maXJtZWQgPSB3aW5kb3cuY29uZmlybShcclxuICAgICAgICAgICAgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgXCIke3ZpZGVvLnRpdGxlIHx8ICd0aGlzIHZpZGVvJ31cIiBmcm9tIHRoZSBwbGF5bGlzdD9gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICBhd2FpdCByZW1vdmVWaWRlb0Zyb21QbGF5bGlzdChhY3RpdmVQbGF5bGlzdElkLCB2aWRlby5pZCk7XHJcblxyXG4gICAgICAgICAgLy8gUmVtb3ZlIGZyb20gZGlzcGxheWVkIHZpZGVvc1xyXG4gICAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKHByZXYgPT4gcHJldi5maWx0ZXIodiA9PiB2LmlkICE9PSB2aWRlby5pZCkpO1xyXG5cclxuICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIGFjdGl2ZSBwbGF5bGlzdCBpdGVtc1xyXG4gICAgICAgICAgLy8gVXNlIGFjdGl2ZVBsYXlsaXN0SXRlbXMgaW5zdGVhZCBvZiBjdXJyZW50UGxheWxpc3RJdGVtcyBhcyBiYXNlIGlmIHBvc3NpYmxlLCBcclxuICAgICAgICAgIC8vIGJ1dCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc3RvcmUgd2hpY2ggZXhwZWN0cyB1cyB0byB1cGRhdGUgdGhlIHNwZWNpZmljIGxpc3QuXHJcbiAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgbW9kaWZ5aW5nIHRoZSAqYWN0aXZlKiBwbGF5bGlzdCwgd2Ugc2hvdWxkIHVwZGF0ZSB0aGUgc3RvcmUgZm9yIHRoYXQgcGxheWxpc3QuXHJcblxyXG4gICAgICAgICAgaWYgKHByZXZpZXdQbGF5bGlzdElkKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGFyZSBpbiBwcmV2aWV3IG1vZGVcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gcHJldmlld1BsYXlsaXN0SXRlbXMuZmlsdGVyKHYgPT4gdi5pZCAhPT0gdmlkZW8uaWQpO1xyXG4gICAgICAgICAgICAvLyBXZSBuZWVkIGEgY2xlYXJQcmV2aWV3IG9yIHNldFByZXZpZXdQbGF5bGlzdCBtZXRob2QsIGJ1dCBzZXRQcmV2aWV3UGxheWxpc3QgaXMgc2FmZXJcclxuICAgICAgICAgICAgc2V0UHJldmlld1BsYXlsaXN0KHVwZGF0ZWRJdGVtcywgcHJldmlld1BsYXlsaXN0SWQsIHByZXZpZXdGb2xkZXJJbmZvKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGFyZSBpbiBjdXJyZW50IHBsYXliYWNrIG1vZGVcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gY3VycmVudFBsYXlsaXN0SXRlbXMuZmlsdGVyKHYgPT4gdi5pZCAhPT0gdmlkZW8uaWQpO1xyXG4gICAgICAgICAgICBzZXRQbGF5bGlzdEl0ZW1zKHVwZGF0ZWRJdGVtcywgY3VycmVudFBsYXlsaXN0SWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2Fzc2lnbkZvbGRlcic6XHJcbiAgICAgICAgICBpZiAob3B0aW9uLmZvbGRlckNvbG9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGb2xkZXJzID0gdmlkZW9Gb2xkZXJBc3NpZ25tZW50c1t2aWRlby5pZF0gfHwgW107XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQXNzaWduZWQgPSBjdXJyZW50Rm9sZGVycy5pbmNsdWRlcyhvcHRpb24uZm9sZGVyQ29sb3IpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQXNzaWduZWQpIHtcclxuICAgICAgICAgICAgICBhd2FpdCB1bmFzc2lnblZpZGVvRnJvbUZvbGRlcihhY3RpdmVQbGF5bGlzdElkLCB2aWRlby5pZCwgb3B0aW9uLmZvbGRlckNvbG9yKTtcclxuICAgICAgICAgICAgICBzZXRWaWRlb0ZvbGRlcnModmlkZW8uaWQsIGN1cnJlbnRGb2xkZXJzLmZpbHRlcihmID0+IGYgIT09IG9wdGlvbi5mb2xkZXJDb2xvcikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGF3YWl0IGFzc2lnblZpZGVvVG9Gb2xkZXIoYWN0aXZlUGxheWxpc3RJZCwgdmlkZW8uaWQsIG9wdGlvbi5mb2xkZXJDb2xvcik7XHJcbiAgICAgICAgICAgICAgc2V0VmlkZW9Gb2xkZXJzKHZpZGVvLmlkLCBbLi4uY3VycmVudEZvbGRlcnMsIG9wdGlvbi5mb2xkZXJDb2xvcl0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZWZyZXNoIGZvbGRlciB2aWV3IGlmIHZpZXdpbmcgdGhhdCBmb2xkZXJcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRm9sZGVyID09PSBvcHRpb24uZm9sZGVyQ29sb3IpIHtcclxuICAgICAgICAgICAgICBjb25zdCB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb3NJbkZvbGRlcihhY3RpdmVQbGF5bGlzdElkLCBzZWxlY3RlZEZvbGRlcik7XHJcbiAgICAgICAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKHZpZGVvcyB8fCBbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdzZXRRdWlja0Fzc2lnbic6XHJcbiAgICAgICAgICBpZiAob3B0aW9uLmZvbGRlckNvbG9yKSB7XHJcbiAgICAgICAgICAgIHNldFF1aWNrQXNzaWduRm9sZGVyKG9wdGlvbi5mb2xkZXJDb2xvcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdRdWljayBhc3NpZ24gZm9sZGVyIHNldCB0bzonLCBvcHRpb24uZm9sZGVyQ29sb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ21vdmVUb1BsYXlsaXN0JzpcclxuICAgICAgICAgIHNldFNlbGVjdGVkVmlkZW9Gb3JBY3Rpb24odmlkZW8pO1xyXG4gICAgICAgICAgc2V0QWN0aW9uVHlwZSgnbW92ZScpO1xyXG4gICAgICAgICAgc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IodHJ1ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnc2V0UGxheWxpc3RDb3Zlcic6XHJcbiAgICAgICAgICBpZiAoIWFjdGl2ZVBsYXlsaXN0SWQpIHJldHVybjtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFVzZSBtYXggcmVzb2x1dGlvbiBmb3IgY292ZXJcclxuICAgICAgICAgICAgY29uc3QgY292ZXJVcmwgPSBgaHR0cHM6Ly9pbWcueW91dHViZS5jb20vdmkvJHt2aWRlby52aWRlb19pZH0vbWF4cmVzZGVmYXVsdC5qcGdgO1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVQbGF5bGlzdChhY3RpdmVQbGF5bGlzdElkLCBudWxsLCBudWxsLCBudWxsLCBjb3ZlclVybCk7XHJcbiAgICAgICAgICAgIGFsZXJ0KGBQbGF5bGlzdCBjb3ZlciB1cGRhdGVkIHVzaW5nIHRodW1ibmFpbCBmcm9tIFwiJHt2aWRlby50aXRsZX1cImApO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVmcmVzaCBwbGF5bGlzdHMgdG8gcmVmbGVjdCBjaGFuZ2UgaW4gVUkgaW1tZWRpYXRlbHkgaWYgcG9zc2libGVcclxuICAgICAgICAgICAgY29uc3QgcGxheWxpc3RzID0gYXdhaXQgZ2V0QWxsUGxheWxpc3RzKCk7XHJcbiAgICAgICAgICAgIHNldEFsbFBsYXlsaXN0cyhwbGF5bGlzdHMpO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNldCBwbGF5bGlzdCBjb3ZlcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gc2V0IHBsYXlsaXN0IGNvdmVyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnY29weVRvUGxheWxpc3QnOlxyXG4gICAgICAgICAgc2V0U2VsZWN0ZWRWaWRlb0ZvckFjdGlvbih2aWRlbyk7XHJcbiAgICAgICAgICBzZXRBY3Rpb25UeXBlKCdjb3B5Jyk7XHJcbiAgICAgICAgICBzZXRTaG93UGxheWxpc3RTZWxlY3Rvcih0cnVlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1Vua25vd24gYWN0aW9uOicsIG9wdGlvbi5hY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaGFuZGxlIG1lbnUgYWN0aW9uOicsIGVycm9yKTtcclxuICAgICAgYWxlcnQoYEZhaWxlZCB0byAke29wdGlvbi5sYWJlbC50b0xvd2VyQ2FzZSgpfTogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVTdGFyQ2xpY2sgPSBhc3luYyAoZSwgdmlkZW8pID0+IHtcclxuICAgIGlmICghYWN0aXZlUGxheWxpc3RJZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGN1cnJlbnRGb2xkZXJzID0gdmlkZW9Gb2xkZXJBc3NpZ25tZW50c1t2aWRlby5pZF0gfHwgW107XHJcblxyXG4gICAgLy8gVXNlIHF1aWNrIGFzc2lnbiBmb2xkZXIgKHN0b3JlZCBwcmVmZXJlbmNlKSBpbnN0ZWFkIG9mIHNlbGVjdGVkIGZvbGRlclxyXG4gICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gcXVpY2tBc3NpZ25Gb2xkZXI7XHJcbiAgICBjb25zdCBpc0Fzc2lnbmVkID0gY3VycmVudEZvbGRlcnMuaW5jbHVkZXModGFyZ2V0Rm9sZGVyKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoaXNBc3NpZ25lZCkge1xyXG4gICAgICAgIC8vIFVuYXNzaWduIGZyb20gcXVpY2sgYXNzaWduIGZvbGRlclxyXG4gICAgICAgIGF3YWl0IHVuYXNzaWduVmlkZW9Gcm9tRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHZpZGVvLmlkLCB0YXJnZXRGb2xkZXIpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRGb2xkZXJzID0gY3VycmVudEZvbGRlcnMuZmlsdGVyKGYgPT4gZiAhPT0gdGFyZ2V0Rm9sZGVyKTtcclxuICAgICAgICBzZXRWaWRlb0ZvbGRlcnModmlkZW8uaWQsIHVwZGF0ZWRGb2xkZXJzKTtcclxuXHJcbiAgICAgICAgLy8gUmVmcmVzaCBmb2xkZXIgdmlldyBpZiB2aWV3aW5nIHRoYXQgZm9sZGVyXHJcbiAgICAgICAgaWYgKHNlbGVjdGVkRm9sZGVyID09PSB0YXJnZXRGb2xkZXIpIHtcclxuICAgICAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvc0luRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHNlbGVjdGVkRm9sZGVyKTtcclxuICAgICAgICAgIHNldERpc3BsYXllZFZpZGVvcyh2aWRlb3MgfHwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBc3NpZ24gdG8gcXVpY2sgYXNzaWduIGZvbGRlclxyXG4gICAgICAgIGF3YWl0IGFzc2lnblZpZGVvVG9Gb2xkZXIoYWN0aXZlUGxheWxpc3RJZCwgdmlkZW8uaWQsIHRhcmdldEZvbGRlcik7XHJcbiAgICAgICAgc2V0VmlkZW9Gb2xkZXJzKHZpZGVvLmlkLCBbLi4uY3VycmVudEZvbGRlcnMsIHRhcmdldEZvbGRlcl0pO1xyXG5cclxuICAgICAgICAvLyBSZWZyZXNoIGZvbGRlciB2aWV3IGlmIHZpZXdpbmcgdGhhdCBmb2xkZXJcclxuICAgICAgICBpZiAoc2VsZWN0ZWRGb2xkZXIgPT09IHRhcmdldEZvbGRlcikge1xyXG4gICAgICAgICAgY29uc3QgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9zSW5Gb2xkZXIoYWN0aXZlUGxheWxpc3RJZCwgc2VsZWN0ZWRGb2xkZXIpO1xyXG4gICAgICAgICAgc2V0RGlzcGxheWVkVmlkZW9zKHZpZGVvcyB8fCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdG9nZ2xlIGZvbGRlciBhc3NpZ25tZW50OicsIGVycm9yKTtcclxuICAgICAgYWxlcnQoYEZhaWxlZCB0byAke2lzQXNzaWduZWQgPyAndW5hc3NpZ24nIDogJ2Fzc2lnbid9IHZpZGVvOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEhhbmRsZSBzdGFyIGNvbG9yIGxlZnQgY2xpY2sgLSBhc3NpZ24gdmlkZW8gdG8gZm9sZGVyXHJcbiAgY29uc3QgaGFuZGxlU3RhckNvbG9yTGVmdENsaWNrID0gYXN5bmMgKHZpZGVvLCBmb2xkZXJDb2xvcikgPT4ge1xyXG4gICAgaWYgKCFhY3RpdmVQbGF5bGlzdElkKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgY3VycmVudEZvbGRlcnMgPSB2aWRlb0ZvbGRlckFzc2lnbm1lbnRzW3ZpZGVvLmlkXSB8fCBbXTtcclxuICAgIGNvbnN0IGlzQXNzaWduZWQgPSBjdXJyZW50Rm9sZGVycy5pbmNsdWRlcyhmb2xkZXJDb2xvcik7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGlzQXNzaWduZWQpIHtcclxuICAgICAgICAvLyBVbmFzc2lnbiBmcm9tIGZvbGRlclxyXG4gICAgICAgIGF3YWl0IHVuYXNzaWduVmlkZW9Gcm9tRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHZpZGVvLmlkLCBmb2xkZXJDb2xvcik7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEZvbGRlcnMgPSBjdXJyZW50Rm9sZGVycy5maWx0ZXIoZiA9PiBmICE9PSBmb2xkZXJDb2xvcik7XHJcbiAgICAgICAgc2V0VmlkZW9Gb2xkZXJzKHZpZGVvLmlkLCB1cGRhdGVkRm9sZGVycyk7XHJcblxyXG4gICAgICAgIC8vIFJlZnJlc2ggZm9sZGVyIHZpZXcgaWYgdmlld2luZyB0aGF0IGZvbGRlclxyXG4gICAgICAgIGlmIChzZWxlY3RlZEZvbGRlciA9PT0gZm9sZGVyQ29sb3IpIHtcclxuICAgICAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvc0luRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHNlbGVjdGVkRm9sZGVyKTtcclxuICAgICAgICAgIHNldERpc3BsYXllZFZpZGVvcyh2aWRlb3MgfHwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBc3NpZ24gdG8gZm9sZGVyXHJcbiAgICAgICAgYXdhaXQgYXNzaWduVmlkZW9Ub0ZvbGRlcihhY3RpdmVQbGF5bGlzdElkLCB2aWRlby5pZCwgZm9sZGVyQ29sb3IpO1xyXG4gICAgICAgIHNldFZpZGVvRm9sZGVycyh2aWRlby5pZCwgWy4uLmN1cnJlbnRGb2xkZXJzLCBmb2xkZXJDb2xvcl0pO1xyXG5cclxuICAgICAgICAvLyBSZWZyZXNoIGZvbGRlciB2aWV3IGlmIHZpZXdpbmcgdGhhdCBmb2xkZXJcclxuICAgICAgICBpZiAoc2VsZWN0ZWRGb2xkZXIgPT09IGZvbGRlckNvbG9yKSB7XHJcbiAgICAgICAgICBjb25zdCB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb3NJbkZvbGRlcihhY3RpdmVQbGF5bGlzdElkLCBzZWxlY3RlZEZvbGRlcik7XHJcbiAgICAgICAgICBzZXREaXNwbGF5ZWRWaWRlb3ModmlkZW9zIHx8IFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB0b2dnbGUgZm9sZGVyIGFzc2lnbm1lbnQ6JywgZXJyb3IpO1xyXG4gICAgICBhbGVydChgRmFpbGVkIHRvICR7aXNBc3NpZ25lZCA/ICd1bmFzc2lnbicgOiAnYXNzaWduJ30gdmlkZW86ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gSGFuZGxlIHN0YXIgY29sb3IgcmlnaHQgY2xpY2sgLSBzZXQgYXMgcXVpY2sgYXNzaWduIGRlZmF1bHRcclxuICBjb25zdCBoYW5kbGVTdGFyQ29sb3JSaWdodENsaWNrID0gKGZvbGRlckNvbG9yKSA9PiB7XHJcbiAgICBzZXRRdWlja0Fzc2lnbkZvbGRlcihmb2xkZXJDb2xvcik7XHJcbiAgICBjb25zb2xlLmxvZygnUXVpY2sgYXNzaWduIGZvbGRlciBzZXQgdG86JywgZm9sZGVyQ29sb3IpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVZpZGVvQ2xpY2sgPSAodmlkZW8sIGluZGV4KSA9PiB7XHJcbiAgICBpZiAoYnVsa1RhZ01vZGUpIHJldHVybjsgLy8gRG9uJ3QgcGxheSB2aWRlb3MgaW4gYnVsayB0YWcgbW9kZVxyXG5cclxuICAgIC8vIElmIHdlIGFyZSBpbiBwcmV2aWV3IG1vZGUsIGNvbW1pdCB0aGlzIHBsYXlsaXN0IHRvIGJlIHRoZSBhY3RpdmUgb25lXHJcbiAgICBpZiAocHJldmlld1BsYXlsaXN0SWQpIHtcclxuICAgICAgLy8gRmluZCBwbGF5bGlzdCBuYW1lIGZvciB0aXRsZSBjb25zaXN0ZW5jeVxyXG4gICAgICBjb25zdCBwbGF5bGlzdCA9IGFsbFBsYXlsaXN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcHJldmlld1BsYXlsaXN0SWQpO1xyXG4gICAgICBjb25zdCB0aXRsZSA9IHBsYXlsaXN0ID8gcGxheWxpc3QubmFtZSA6IG51bGw7XHJcblxyXG4gICAgICAvLyBDb21taXQgcHJldmlldyB0byBjdXJyZW50XHJcbiAgICAgIHNldFBsYXlsaXN0SXRlbXMocHJldmlld1BsYXlsaXN0SXRlbXMsIHByZXZpZXdQbGF5bGlzdElkLCBwcmV2aWV3Rm9sZGVySW5mbywgdGl0bGUpO1xyXG5cclxuICAgICAgLy8gQ2xlYXIgcHJldmlldyBzdGF0ZSBzaW5jZSBpdCdzIG5vdyBhY3RpdmVcclxuICAgICAgLy8gYWN0dWFsbHkgc2V0UGxheWxpc3RJdGVtcyB1cGRhdGVzIGN1cnJlbnQsIHdlIG1pZ2h0IHdhbnQgdG8gY2xlYXIgcHJldmlldyBleHBsaWNpdGx5IG9yIGxldCBzdG9yZSBoYW5kbGUgaXQ/XHJcbiAgICAgIC8vIHN0b3JlLnNldFBsYXlsaXN0SXRlbXMgZG9lc24ndCBhdXRvY2xlYXIgcHJldmlldy5cclxuICAgICAgLy8gQnV0IHVzdWFsbHkgY2hlY2tpbmcgYGFjdGl2ZVBsYXlsaXN0SXRlbXMgPSBwcmV2aWV3IHx8IGN1cnJlbnRgIGhhbmRsZXMgdGhlIHZpZXcuXHJcbiAgICAgIC8vIElmIHdlIG1hZGUgaXQgY3VycmVudCwgd2Ugc2hvdWxkIHByb2JhYmx5IGNsZWFyIHByZXZpZXcgc28gd2UgYXJlbid0IFwicHJldmlld2luZ1wiIGFueW1vcmUsIHdlIGFyZSBcInBsYXlpbmdcIi5cclxuICAgICAgLy8gQnV0IGxldCdzIHN0aWNrIHRvIHRoZSBjb3JlIHJlcXVpcmVtZW50OiBlbnN1cmUgdGl0bGUgaXMgY29ycmVjdC5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcmlnaW5hbEluZGV4ID0gYWN0aXZlUGxheWxpc3RJdGVtcy5maW5kSW5kZXgodiA9PiB2LmlkID09PSB2aWRlby5pZCk7XHJcbiAgICBzZXRTZWxlY3RlZFZpZGVvSW5kZXgob3JpZ2luYWxJbmRleCA+PSAwID8gb3JpZ2luYWxJbmRleCA6IGluZGV4KTtcclxuICAgIGlmIChvblZpZGVvU2VsZWN0KSB7XHJcbiAgICAgIG9uVmlkZW9TZWxlY3QodmlkZW8udmlkZW9fdXJsKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVCdWxrVGFnQ29sb3JDbGljayA9ICh2aWRlbywgZm9sZGVyQ29sb3IpID0+IHtcclxuICAgIHRvZ2dsZUJ1bGtUYWdTZWxlY3Rpb24odmlkZW8uaWQsIGZvbGRlckNvbG9yKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVTYXZlQnVsa1RhZ3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWFjdGl2ZVBsYXlsaXN0SWQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBzZWxlY3Rpb25zID0gT2JqZWN0LmVudHJpZXMoYnVsa1RhZ1NlbGVjdGlvbnMpO1xyXG4gICAgaWYgKHNlbGVjdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGFsZXJ0KCdObyBzZWxlY3Rpb25zIHRvIHNhdmUnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNhdmluZ0J1bGtUYWdzKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XHJcbiAgICAgIGxldCBlcnJvckNvdW50ID0gMDtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgW3ZpZGVvSWQsIGZvbGRlckNvbG9yc10gb2Ygc2VsZWN0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHZpZGVvSWROdW0gPSBwYXJzZUludCh2aWRlb0lkKTtcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gQXJyYXkuZnJvbShmb2xkZXJDb2xvcnMpO1xyXG5cclxuICAgICAgICAvLyBHZXQgY3VycmVudCBmb2xkZXIgYXNzaWdubWVudHMgZm9yIHRoaXMgdmlkZW9cclxuICAgICAgICBjb25zdCBjdXJyZW50Rm9sZGVycyA9IHZpZGVvRm9sZGVyQXNzaWdubWVudHNbdmlkZW9JZE51bV0gfHwgW107XHJcblxyXG4gICAgICAgIC8vIERldGVybWluZSB3aGljaCBmb2xkZXJzIHRvIGFkZCBhbmQgd2hpY2ggdG8gcmVtb3ZlXHJcbiAgICAgICAgY29uc3QgZm9sZGVyc1RvQWRkID0gZm9sZGVycy5maWx0ZXIoZiA9PiAhY3VycmVudEZvbGRlcnMuaW5jbHVkZXMoZikpO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlcnNUb1JlbW92ZSA9IGN1cnJlbnRGb2xkZXJzLmZpbHRlcihmID0+ICFmb2xkZXJzLmluY2x1ZGVzKGYpKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIG5ldyBhc3NpZ25tZW50c1xyXG4gICAgICAgIGZvciAoY29uc3QgZm9sZGVyQ29sb3Igb2YgZm9sZGVyc1RvQWRkKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBhc3NpZ25WaWRlb1RvRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHZpZGVvSWROdW0sIGZvbGRlckNvbG9yKTtcclxuICAgICAgICAgICAgc3VjY2Vzc0NvdW50Kys7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gYXNzaWduIHZpZGVvICR7dmlkZW9JZE51bX0gdG8gZm9sZGVyICR7Zm9sZGVyQ29sb3J9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIG9sZCBhc3NpZ25tZW50c1xyXG4gICAgICAgIGZvciAoY29uc3QgZm9sZGVyQ29sb3Igb2YgZm9sZGVyc1RvUmVtb3ZlKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB1bmFzc2lnblZpZGVvRnJvbUZvbGRlcihhY3RpdmVQbGF5bGlzdElkLCB2aWRlb0lkTnVtLCBmb2xkZXJDb2xvcik7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHVuYXNzaWduIHZpZGVvICR7dmlkZW9JZE51bX0gZnJvbSBmb2xkZXIgJHtmb2xkZXJDb2xvcn06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICBlcnJvckNvdW50Kys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcclxuICAgICAgICBzZXRWaWRlb0ZvbGRlcnModmlkZW9JZE51bSwgZm9sZGVycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlZnJlc2ggZm9sZGVyIGFzc2lnbm1lbnRzXHJcbiAgICAgIGNvbnN0IGFzc2lnbm1lbnRzID0ge307XHJcbiAgICAgIGZvciAoY29uc3QgdmlkZW8gb2YgYWN0aXZlUGxheWxpc3RJdGVtcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgZ2V0VmlkZW9Gb2xkZXJBc3NpZ25tZW50cyhhY3RpdmVQbGF5bGlzdElkLCB2aWRlby5pZCk7XHJcbiAgICAgICAgICBhc3NpZ25tZW50c1t2aWRlby5pZF0gPSBBcnJheS5pc0FycmF5KGZvbGRlcnMpICYmIGZvbGRlcnMubGVuZ3RoID4gMCA/IGZvbGRlcnMgOiBbXTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgZm9sZGVycyBmb3IgdmlkZW8gJHt2aWRlby5pZH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgYXNzaWdubWVudHNbdmlkZW8uaWRdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGxvYWRWaWRlb0ZvbGRlcnMoYXNzaWdubWVudHMpO1xyXG5cclxuICAgICAgLy8gUmVmcmVzaCBmb2xkZXIgdmlldyBpZiB2aWV3aW5nIGEgZm9sZGVyXHJcbiAgICAgIGlmIChzZWxlY3RlZEZvbGRlciAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvc0luRm9sZGVyKGFjdGl2ZVBsYXlsaXN0SWQsIHNlbGVjdGVkRm9sZGVyKTtcclxuICAgICAgICBzZXREaXNwbGF5ZWRWaWRlb3ModmlkZW9zIHx8IFtdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xlYXIgc2VsZWN0aW9ucyBhbmQgZXhpdCBidWxrIHRhZyBtb2RlXHJcbiAgICAgIGNsZWFyQnVsa1RhZ1NlbGVjdGlvbnMoKTtcclxuICAgICAgc2V0QnVsa1RhZ01vZGUoZmFsc2UpO1xyXG5cclxuICAgICAgaWYgKGVycm9yQ291bnQgPiAwKSB7XHJcbiAgICAgICAgYWxlcnQoYFNhdmVkICR7c3VjY2Vzc0NvdW50fSBhc3NpZ25tZW50cywgYnV0ICR7ZXJyb3JDb3VudH0gZmFpbGVkLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLmApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0KGBTdWNjZXNzZnVsbHkgc2F2ZWQgJHtzdWNjZXNzQ291bnR9IGZvbGRlciBhc3NpZ25tZW50cyFgKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgYnVsayB0YWdzOicsIGVycm9yKTtcclxuICAgICAgYWxlcnQoYEZhaWxlZCB0byBzYXZlIGJ1bGsgdGFnczogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldFNhdmluZ0J1bGtUYWdzKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVDYW5jZWxCdWxrVGFncyA9ICgpID0+IHtcclxuICAgIGNsZWFyQnVsa1RhZ1NlbGVjdGlvbnMoKTtcclxuICAgIHNldEJ1bGtUYWdNb2RlKGZhbHNlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVQbGF5bGlzdFNlbGVjdCA9IGFzeW5jIChwbGF5bGlzdElkKSA9PiB7XHJcbiAgICBpZiAoIXNlbGVjdGVkVmlkZW9Gb3JBY3Rpb24gfHwgIWFjdGlvblR5cGUpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB2aWRlbyA9IHNlbGVjdGVkVmlkZW9Gb3JBY3Rpb247XHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2FjdGlvblR5cGUgPT09ICdtb3ZlJyA/ICdNb3ZpbmcnIDogJ0NvcHlpbmcnfSB2aWRlbyB0byBwbGF5bGlzdCAke3BsYXlsaXN0SWR9OmAsIHZpZGVvLnRpdGxlKTtcclxuXHJcbiAgICAgIGNvbnN0IHZpZGVvSWQgPSBleHRyYWN0VmlkZW9JZCh2aWRlby52aWRlb191cmwpIHx8IHZpZGVvLnZpZGVvX2lkO1xyXG5cclxuICAgICAgLy8gMS4gQWRkIHRvIGRlc3RpbmF0aW9uIHBsYXlsaXN0IChDb3B5IGxvZ2ljKVxyXG4gICAgICBhd2FpdCBhZGRWaWRlb1RvUGxheWxpc3QoXHJcbiAgICAgICAgcGxheWxpc3RJZCxcclxuICAgICAgICB2aWRlby52aWRlb191cmwsXHJcbiAgICAgICAgdmlkZW9JZCxcclxuICAgICAgICB2aWRlby50aXRsZSxcclxuICAgICAgICB2aWRlby50aHVtYm5haWxfdXJsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyAyLiBJZiAnbW92ZScsIHJlbW92ZSBmcm9tIGN1cnJlbnQgcGxheWxpc3RcclxuICAgICAgaWYgKGFjdGlvblR5cGUgPT09ICdtb3ZlJyAmJiBhY3RpdmVQbGF5bGlzdElkKSB7XHJcbiAgICAgICAgYXdhaXQgcmVtb3ZlVmlkZW9Gcm9tUGxheWxpc3QoYWN0aXZlUGxheWxpc3RJZCwgdmlkZW8uaWQpO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgVUkgbG9jYWxseSB0byByZWZsZWN0IHJlbW92YWxcclxuICAgICAgICBzZXREaXNwbGF5ZWRWaWRlb3MocHJldiA9PiBwcmV2LmZpbHRlcih2ID0+IHYuaWQgIT09IHZpZGVvLmlkKSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBnbG9iYWwgc3RvcmVcclxuICAgICAgICBpZiAocHJldmlld1BsYXlsaXN0SWQpIHtcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IHByZXZpZXdQbGF5bGlzdEl0ZW1zLmZpbHRlcih2ID0+IHYuaWQgIT09IHZpZGVvLmlkKTtcclxuICAgICAgICAgIHNldFByZXZpZXdQbGF5bGlzdCh1cGRhdGVkSXRlbXMsIHByZXZpZXdQbGF5bGlzdElkLCBwcmV2aWV3Rm9sZGVySW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IGN1cnJlbnRQbGF5bGlzdEl0ZW1zLmZpbHRlcih2ID0+IHYuaWQgIT09IHZpZGVvLmlkKTtcclxuICAgICAgICAgIHNldFBsYXlsaXN0SXRlbXModXBkYXRlZEl0ZW1zLCBjdXJyZW50UGxheWxpc3RJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTdWNjZXNzIGZlZWRiYWNrIChjb3VsZCB1c2UgYSB0b2FzdClcclxuICAgICAgY29uc29sZS5sb2coYFZpZGVvIHN1Y2Nlc3NmdWxseSAke2FjdGlvblR5cGUgPT09ICdtb3ZlJyA/ICdtb3ZlZCcgOiAnY29waWVkJ30hYCk7XHJcbiAgICAgIC8vIE9wdGlvbmFsOiBhbGVydChgVmlkZW8gJHthY3Rpb25UeXBlID09PSAnbW92ZScgPyAnbW92ZWQnIDogJ2NvcGllZCd9IHN1Y2Nlc3NmdWxseSFgKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gJHthY3Rpb25UeXBlfSB2aWRlbzpgLCBlcnJvcik7XHJcbiAgICAgIGFsZXJ0KGBGYWlsZWQgdG8gJHthY3Rpb25UeXBlfSB2aWRlbzogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IoZmFsc2UpO1xyXG4gICAgICBzZXRTZWxlY3RlZFZpZGVvRm9yQWN0aW9uKG51bGwpO1xyXG4gICAgICBzZXRBY3Rpb25UeXBlKG51bGwpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBmb2xkZXIgY291bnRzXHJcbiAgY29uc3QgZm9sZGVyQ291bnRzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBjb3VudHMgPSB7fTtcclxuICAgIGlmICh2aWRlb0ZvbGRlckFzc2lnbm1lbnRzKSB7XHJcbiAgICAgIE9iamVjdC52YWx1ZXModmlkZW9Gb2xkZXJBc3NpZ25tZW50cykuZm9yRWFjaChmb2xkZXJzID0+IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmb2xkZXJzKSkge1xyXG4gICAgICAgICAgZm9sZGVycy5mb3JFYWNoKGZvbGRlcklkID0+IHtcclxuICAgICAgICAgICAgY291bnRzW2ZvbGRlcklkXSA9IChjb3VudHNbZm9sZGVySWRdIHx8IDApICsgMTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY291bnRzO1xyXG4gIH0sIFt2aWRlb0ZvbGRlckFzc2lnbm1lbnRzXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZVVwbG9hZENvbXBsZXRlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgc2V0U2hvd1VwbG9hZGVyKGZhbHNlKTtcclxuXHJcbiAgICAvLyBSZWxvYWQgdGhlIGN1cnJlbnQgcGxheWxpc3QgdG8gc2hvdyBuZXcgdmlkZW9zXHJcbiAgICBpZiAoYWN0aXZlUGxheWxpc3RJZCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2V0UGxheWxpc3RJdGVtcyhhY3RpdmVQbGF5bGlzdElkKTtcclxuICAgICAgICBpZiAocHJldmlld1BsYXlsaXN0SWQpIHtcclxuICAgICAgICAgIHNldFByZXZpZXdQbGF5bGlzdChpdGVtcywgcHJldmlld1BsYXlsaXN0SWQsIHByZXZpZXdGb2xkZXJJbmZvKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0UGxheWxpc3RJdGVtcyhpdGVtcywgY3VycmVudFBsYXlsaXN0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVsb2FkIHBsYXlsaXN0IGFmdGVyIHVwbG9hZDonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBGZXRjaCBmb2xkZXIgbWV0YWRhdGEgd2hlbiBzZWxlY3RlZCBmb2xkZXIgY2hhbmdlc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBmZXRjaE1ldGFkYXRhID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoYWN0aXZlUGxheWxpc3RJZCAmJiBzZWxlY3RlZEZvbGRlciAmJiBzZWxlY3RlZEZvbGRlciAhPT0gJ3Vuc29ydGVkJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IGdldEZvbGRlck1ldGFkYXRhKGFjdGl2ZVBsYXlsaXN0SWQsIHNlbGVjdGVkRm9sZGVyKTtcclxuICAgICAgICAgIC8vIEFQSSByZXR1cm5zIFtuYW1lLCBkZXNjcmlwdGlvbl0gb3IgbnVsbC5cclxuICAgICAgICAgIC8vIFdhaXQsIGNoZWNrIHJ1c3QgaW1wbGVtZW50YXRpb246IHJldHVybnMgKFN0cmluZywgU3RyaW5nKSBvciBOb25lLlxyXG4gICAgICAgICAgLy8gQ2hlY2sgSlMgaW1wbGVtZW50YXRpb246IHJldHVybnMgcmVzdWx0IHx8IG51bGwuXHJcbiAgICAgICAgICAvLyBTbyBpZiByZXN1bHQgaXMgYXJyYXkvdHVwbGUsIGl0J3MgW25hbWUsIGRlc2NdLlxyXG4gICAgICAgICAgLy8gTGV0J3MgdmVyaWZ5IHdoYXQgVGF1cmkgcmV0dXJucyBmb3IgdHVwbGUuIEl0IHVzdWFsbHkgcmV0dXJucyBhcnJheS5cclxuXHJcbiAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgLy8gRGVzdHJ1Y3R1cmUgY2FyZWZ1bGx5IGlmIGl0J3MgYXJyYXlcclxuICAgICAgICAgICAgc2V0Rm9sZGVyTWV0YWRhdGFTdGF0ZSh7IG5hbWU6IG1ldGFkYXRhWzBdLCBkZXNjcmlwdGlvbjogbWV0YWRhdGFbMV0sIGN1c3RvbUFzY2lpOiBtZXRhZGF0YVsyXSB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNldEZvbGRlck1ldGFkYXRhU3RhdGUobnVsbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyIG1ldGFkYXRhOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICBzZXRGb2xkZXJNZXRhZGF0YVN0YXRlKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRGb2xkZXJNZXRhZGF0YVN0YXRlKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZldGNoTWV0YWRhdGEoKTtcclxuICB9LCBbYWN0aXZlUGxheWxpc3RJZCwgc2VsZWN0ZWRGb2xkZXJdKTtcclxuXHJcblxyXG4gIGNvbnN0IGhhbmRsZVVwZGF0ZU1ldGFkYXRhID0gYXN5bmMgKGRhdGEpID0+IHtcclxuICAgIGlmICghYWN0aXZlUGxheWxpc3RJZCkgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZEZvbGRlciAmJiBzZWxlY3RlZEZvbGRlciAhPT0gJ3Vuc29ydGVkJykge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBGb2xkZXIgTWV0YWRhdGFcclxuICAgICAgICBhd2FpdCBzZXRGb2xkZXJNZXRhZGF0YShhY3RpdmVQbGF5bGlzdElkLCBzZWxlY3RlZEZvbGRlciwgZGF0YS5uYW1lLCBkYXRhLmRlc2NyaXB0aW9uLCBkYXRhLmN1c3RvbUFzY2lpKTtcclxuICAgICAgICAvLyBSZWZyZXNoIGxvY2FsIHN0YXRlXHJcbiAgICAgICAgc2V0Rm9sZGVyTWV0YWRhdGFTdGF0ZSh7IG5hbWU6IGRhdGEubmFtZSwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sIGN1c3RvbUFzY2lpOiBkYXRhLmN1c3RvbUFzY2lpIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBQbGF5bGlzdCBNZXRhZGF0YVxyXG4gICAgICAgIGF3YWl0IHVwZGF0ZVBsYXlsaXN0KGFjdGl2ZVBsYXlsaXN0SWQsIGRhdGEubmFtZSwgZGF0YS5kZXNjcmlwdGlvbiwgZGF0YS5jdXN0b21Bc2NpaSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBnbG9iYWwgc3RhdGUgc3RvcmUgYnkgcmVsb2FkaW5nIGFsbCBwbGF5bGlzdHNcclxuICAgICAgICBjb25zdCBwbGF5bGlzdHMgPSBhd2FpdCBnZXRBbGxQbGF5bGlzdHMoKTtcclxuICAgICAgICBzZXRBbGxQbGF5bGlzdHMocGxheWxpc3RzKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBtZXRhZGF0YTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFNvcnQgdmlkZW9zIGJhc2VkIG9uIHNlbGVjdGVkIHNvcnQgb3B0aW9uXHJcbiAgLy8gSU1QT1JUQU5UOiBUaGlzIGhvb2sgbXVzdCBiZSBjYWxsZWQgQkVGT1JFIGFueSBlYXJseSByZXR1cm5zXHJcbiAgY29uc3Qgc29ydGVkVmlkZW9zID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggdmlkZW9zIHRvIGRpc3BsYXkgKGZvbGRlciBmaWx0ZXJlZCBvciBhbGwpXHJcbiAgICBjb25zdCBiYXNlVmlkZW9zID0gc2VsZWN0ZWRGb2xkZXIgIT09IG51bGwgPyBkaXNwbGF5ZWRWaWRlb3MgOiBhY3RpdmVQbGF5bGlzdEl0ZW1zO1xyXG5cclxuICAgIC8vIEhhbmRsZSBlbXB0eSBhcnJheXNcclxuICAgIGlmICghYmFzZVZpZGVvcyB8fCBiYXNlVmlkZW9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNvcnRCeSA9PT0gJ2Nocm9ub2xvZ2ljYWwnKSB7XHJcbiAgICAgIHJldHVybiBiYXNlVmlkZW9zO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzb3J0QnkgPT09ICdzaHVmZmxlJykge1xyXG4gICAgICBjb25zdCBzdGF0ZSA9IHNodWZmbGVTdGF0ZXNbYWN0aXZlUGxheWxpc3RJZF07XHJcbiAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLm1hcCkgcmV0dXJuIGJhc2VWaWRlb3M7XHJcblxyXG4gICAgICByZXR1cm4gWy4uLmJhc2VWaWRlb3NdLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICBjb25zdCByYW5rQSA9IHN0YXRlLm1hcFthLmlkXSA/PyAwO1xyXG4gICAgICAgIGNvbnN0IHJhbmtCID0gc3RhdGUubWFwW2IuaWRdID8/IDA7XHJcbiAgICAgICAgcmV0dXJuIHJhbmtBIC0gcmFua0I7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzb3J0QnkgPT09ICdwcm9ncmVzcycpIHtcclxuICAgICAgbGV0IGZpbHRlcmVkID0gWy4uLmJhc2VWaWRlb3NdO1xyXG5cclxuICAgICAgLy8gRmlsdGVyOiBIaWRlIFVud2F0Y2hlZFxyXG4gICAgICBpZiAoIWluY2x1ZGVVbndhdGNoZWQpIHtcclxuICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcih2aWRlbyA9PiB7XHJcbiAgICAgICAgICBjb25zdCB2aWRlb0lkID0gZXh0cmFjdFZpZGVvSWQodmlkZW8udmlkZW9fdXJsKSB8fCB2aWRlby52aWRlb19pZDtcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSB2aWRlb1Byb2dyZXNzLmdldCh2aWRlb0lkKTtcclxuICAgICAgICAgIC8vIENoZWNrIGlmIGRhdGEgZXhpc3RzIGFuZCBwZXJjZW50YWdlID4gMC5cclxuICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBkYXRhID8gKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyA/IGRhdGEgOiBkYXRhLnBlcmNlbnRhZ2UpIDogMDtcclxuICAgICAgICAgIHJldHVybiBwZXJjZW50YWdlID4gMDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRmlsdGVyOiBTaG93IE9ubHkgQ29tcGxldGVkIChSZWRlZmluZWQgYnkgdXNlciBhcyBcIlRvZ2dsZSB0byBzaG93L2hpZGUgZnVsbHkgd2F0Y2hlZCB2aWRlb3NcIilcclxuICAgICAgLy8gSWYgdGhlIGJ1dHRvbiBpcyBBQ1RJVkUgKHN0YXRlIHRydWUpLCB3ZSBISURFIGNvbXBsZXRlZCB2aWRlb3MuXHJcbiAgICAgIC8vIFdhaXQsIHN0YW5kYXJkIFVJIHBhdHRlcm46XHJcbiAgICAgIC8vIEJ1dHRvbiBcIlNob3cgQ29tcGxldGVkXCIgKEFjdGl2ZSkgLT4gU2hvdyB0aGVtLlxyXG4gICAgICAvLyBCdXQgdXNlciBzYWlkIFwiSSB3YW50IHRoYXQgYnV0dG9uIHRvIGJlIGEgdG9nZ2xlIHRvIHNob3cvaGlkZSBmdWxseSB3YXRjaGVkIHZpZGVvcyAtIGxlYXZpbmcganVzdCBwYXJ0aWFsbHkgd2F0Y2hlZCBhbmQgdW53YXRjaGVkIGJlaGluZFwiIFxyXG4gICAgICAvLyBUaGlzIGltcGxpZXMgdGhlIEFDVElPTiBvZiB0aGUgYnV0dG9uIGlzIHRvIFJFTU9WRSB0aGVtLlxyXG4gICAgICAvLyBTbyBpZiBgc2hvd09ubHlDb21wbGV0ZWRgIGlzIFRSVUUsIHdlIEhJREUgdGhlbS5cclxuICAgICAgLy8gSWYgdGhlIHN0YXRlIGlzIHRydWUsIHdlIEhJREUgdGhlbS4gSWYgZmFsc2UsIHdlIFNIT1cgdGhlbS5cclxuICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoZSBidXR0b24gbGFiZWwgc2hvdWxkIGlkZWFsbHkgY2hhbmdlIG9yIGlzIGFic3RyYWN0IFwiVG9nZ2xlIENvbXBsZXRlZFwiLlxyXG4gICAgICBpZiAoc2hvd09ubHlDb21wbGV0ZWQpIHtcclxuICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcih2aWRlbyA9PiB7XHJcbiAgICAgICAgICBjb25zdCB2aWRlb0lkID0gZXh0cmFjdFZpZGVvSWQodmlkZW8udmlkZW9fdXJsKSB8fCB2aWRlby52aWRlb19pZDtcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSB2aWRlb1Byb2dyZXNzLmdldCh2aWRlb0lkKTtcclxuICAgICAgICAgIGNvbnN0IGhhc0Z1bGx5V2F0Y2hlZCA9IGRhdGEgPyAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnID8gZGF0YS5oYXNGdWxseVdhdGNoZWQgOiBmYWxzZSkgOiBmYWxzZTtcclxuICAgICAgICAgIHJldHVybiAhaGFzRnVsbHlXYXRjaGVkOyAvLyBISURFIGlmIHdhdGNoZWRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc29ydGVkID0gZmlsdGVyZWQuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkQSA9IGV4dHJhY3RWaWRlb0lkKGEudmlkZW9fdXJsKSB8fCBhLnZpZGVvX2lkO1xyXG4gICAgICAgIGNvbnN0IGlkQiA9IGV4dHJhY3RWaWRlb0lkKGIudmlkZW9fdXJsKSB8fCBiLnZpZGVvX2lkO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhQSA9IHZpZGVvUHJvZ3Jlc3MuZ2V0KGlkQSk7XHJcbiAgICAgICAgY29uc3QgZGF0YUIgPSB2aWRlb1Byb2dyZXNzLmdldChpZEIpO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9ncmVzc0EgPSBkYXRhQSA/ICh0eXBlb2YgZGF0YUEgPT09ICdudW1iZXInID8gZGF0YUEgOiBkYXRhQS5wZXJjZW50YWdlKSA6IDA7XHJcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NCID0gZGF0YUIgPyAodHlwZW9mIGRhdGFCID09PSAnbnVtYmVyJyA/IGRhdGFCIDogZGF0YUIucGVyY2VudGFnZSkgOiAwO1xyXG5cclxuICAgICAgICByZXR1cm4gc29ydERpcmVjdGlvbiA9PT0gJ2FzYydcclxuICAgICAgICAgID8gcHJvZ3Jlc3NBIC0gcHJvZ3Jlc3NCXHJcbiAgICAgICAgICA6IHByb2dyZXNzQiAtIHByb2dyZXNzQTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzb3J0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJhc2VWaWRlb3M7XHJcbiAgfSwgW3NlbGVjdGVkRm9sZGVyLCBkaXNwbGF5ZWRWaWRlb3MsIGFjdGl2ZVBsYXlsaXN0SXRlbXMsIHNvcnRCeSwgc29ydERpcmVjdGlvbiwgdmlkZW9Qcm9ncmVzcywgaW5jbHVkZVVud2F0Y2hlZCwgc2hvd09ubHlDb21wbGV0ZWQsIHNodWZmbGVTdGF0ZXMsIGFjdGl2ZVBsYXlsaXN0SWRdKTtcclxuXHJcbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIHZpZGVvcyB0byBkaXNwbGF5IChmb3IgY291bnQgZGlzcGxheSlcclxuICBjb25zdCB2aWRlb3NUb0Rpc3BsYXkgPSBzZWxlY3RlZEZvbGRlciAhPT0gbnVsbCA/IGRpc3BsYXllZFZpZGVvcyA6IGFjdGl2ZVBsYXlsaXN0SXRlbXM7XHJcblxyXG4gIC8vIFNwbGl0IHNvcnRlZCB2aWRlb3MgaW50byBzdGlja2llZCBhbmQgcmVndWxhclxyXG4gIC8vIFVzZSBhbGxTdGlja2llZFZpZGVvcyB0byBlbnN1cmUgcmVhY3Rpdml0eVxyXG4gIC8vIFN0aWNreSB2aWRlb3Mgc2hvdWxkIE5PVCBiZSBhZmZlY3RlZCBieSBmaWx0ZXJzLCBzbyB3ZSB1c2UgdmlkZW9zVG9EaXNwbGF5ICh1bmZpbHRlcmVkKSBpbnN0ZWFkIG9mIHNvcnRlZFZpZGVvc1xyXG4gIGNvbnN0IHN0aWNraWVkVmlkZW9zID0gdmlkZW9zVG9EaXNwbGF5LmZpbHRlcih2ID0+IHtcclxuICAgIC8vIENoZWNrIHNwZWNpZmljIGZvbGRlciBrZXlcclxuICAgIGNvbnN0IGZvbGRlcktleSA9IHNlbGVjdGVkRm9sZGVyID09PSBudWxsID8gJ3Jvb3QnIDogc2VsZWN0ZWRGb2xkZXI7XHJcbiAgICBjb25zdCBrZXkgPSBgJHthY3RpdmVQbGF5bGlzdElkfTo6JHtmb2xkZXJLZXl9YDtcclxuICAgIGNvbnN0IHN0aWNraWVzID0gYWxsU3RpY2tpZWRWaWRlb3Nba2V5XSB8fCBbXTtcclxuICAgIHJldHVybiBzdGlja2llcy5pbmNsdWRlcyh2LmlkKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcmVndWxhclZpZGVvcyA9IHNvcnRlZFZpZGVvcztcclxuXHJcbiAgY29uc3QgYnVsa1RhZ1NlbGVjdGlvbkNvdW50ID0gT2JqZWN0LnZhbHVlcyhidWxrVGFnU2VsZWN0aW9ucykucmVkdWNlKFxyXG4gICAgKHRvdGFsLCBmb2xkZXJzKSA9PiB0b3RhbCArIGZvbGRlcnMuc2l6ZSxcclxuICAgIDBcclxuICApO1xyXG5cclxuICAvLyBIZWxwZXIgdG8gZ2V0IGJhbm5lciBpbmZvXHJcbiAgY29uc3QgYWN0aXZlT2JqZWN0ID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAoc2VsZWN0ZWRGb2xkZXIgJiYgc2VsZWN0ZWRGb2xkZXIgIT09ICd1bnNvcnRlZCcpIHtcclxuICAgICAgcmV0dXJuIGZvbGRlck1ldGFkYXRhOyAvLyBUaGlzIHdpbGwgYmUgbnVsbCBvciB7bmFtZSwgZGVzY3JpcHRpb259XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWxsUGxheWxpc3RzLmZpbmQocCA9PiBwLmlkID09PSBhY3RpdmVQbGF5bGlzdElkKTtcclxuICB9LCBbYWxsUGxheWxpc3RzLCBhY3RpdmVQbGF5bGlzdElkLCBzZWxlY3RlZEZvbGRlciwgZm9sZGVyTWV0YWRhdGFdKTtcclxuXHJcbiAgY29uc3QgYmFubmVySW5mbyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgbGV0IHRpdGxlID0gJyc7XHJcbiAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcclxuICAgIGxldCBjb2xvciA9IG51bGw7XHJcbiAgICBsZXQgaXNFZGl0YWJsZSA9IHRydWU7XHJcbiAgICBsZXQgY3VzdG9tQXNjaWkgPSBudWxsO1xyXG4gICAgbGV0IGhleCA9ICcjM2I4MmY2JzsgLy8gRGVmYXVsdCBCbHVlXHJcblxyXG4gICAgaWYgKHNlbGVjdGVkRm9sZGVyKSB7XHJcbiAgICAgIGlmIChzZWxlY3RlZEZvbGRlciA9PT0gJ3Vuc29ydGVkJykge1xyXG4gICAgICAgIHRpdGxlID0gJ1Vuc29ydGVkIFZpZGVvcyc7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSBgVmlkZW9zIGZyb20gXCIke2FsbFBsYXlsaXN0cy5maW5kKHAgPT4gcC5pZCA9PT0gYWN0aXZlUGxheWxpc3RJZCk/Lm5hbWUgfHwgJ1BsYXlsaXN0J31cIiB0aGF0IGhhdmVuJ3QgYmVlbiBhc3NpZ25lZCB0byBhbnkgZm9sZGVyLmA7XHJcbiAgICAgICAgY29sb3IgPSAndW5zb3J0ZWQnO1xyXG4gICAgICAgIGhleCA9ICcjNjQ3NDhiJzsgLy8gU2xhdGUtNTAwXHJcbiAgICAgICAgaXNFZGl0YWJsZSA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZvbGRlciBWaWV3XHJcbiAgICAgICAgY29uc3QgY29sb3JJbmZvID0gRk9MREVSX0NPTE9SUy5maW5kKGMgPT4gYy5pZCA9PT0gc2VsZWN0ZWRGb2xkZXIpO1xyXG4gICAgICAgIGNvbG9yID0gc2VsZWN0ZWRGb2xkZXI7XHJcbiAgICAgICAgaWYgKGNvbG9ySW5mbykgaGV4ID0gY29sb3JJbmZvLmhleDtcclxuXHJcbiAgICAgICAgaWYgKGFjdGl2ZU9iamVjdCkgeyAvLyBhY3RpdmVPYmplY3QgaGVyZSByZWZlcnMgdG8gZm9sZGVyTWV0YWRhdGFTdGF0ZVxyXG4gICAgICAgICAgdGl0bGUgPSBhY3RpdmVPYmplY3QubmFtZSB8fCAoY29sb3JJbmZvID8gYCR7Y29sb3JJbmZvLm5hbWV9IEZvbGRlcmAgOiAnRm9sZGVyJyk7XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IGFjdGl2ZU9iamVjdC5kZXNjcmlwdGlvbiB8fCAnJztcclxuICAgICAgICAgIGN1c3RvbUFzY2lpID0gYWN0aXZlT2JqZWN0LmN1c3RvbUFzY2lpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBkZWZhdWx0IG5hbWVzIGlmIG5vIG1ldGFkYXRhXHJcbiAgICAgICAgICB0aXRsZSA9IGNvbG9ySW5mbyA/IGAke2NvbG9ySW5mby5uYW1lfSBGb2xkZXJgIDogJ0ZvbGRlcic7XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IGBWaWRlb3MgaW4gdGhlICR7dGl0bGV9LmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlzRWRpdGFibGUgPSB0cnVlOyAvLyBGb2xkZXJzIGFyZSBlZGl0YWJsZVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQbGF5bGlzdCBWaWV3XHJcbiAgICAgIHRpdGxlID0gYWN0aXZlT2JqZWN0ID8gYWN0aXZlT2JqZWN0Lm5hbWUgOiAnJztcclxuICAgICAgZGVzY3JpcHRpb24gPSBhY3RpdmVPYmplY3QgPyBhY3RpdmVPYmplY3QuZGVzY3JpcHRpb24gOiAnJztcclxuICAgICAgLy8gUGxheWxpc3Qgb2JqZWN0IGZyb20gUnVzdCB1c2VzIHNuYWtlX2Nhc2VcclxuICAgICAgY3VzdG9tQXNjaWkgPSBhY3RpdmVPYmplY3QgPyBhY3RpdmVPYmplY3QuY3VzdG9tX2FzY2lpIDogbnVsbDtcclxuICAgICAgY29sb3IgPSBudWxsO1xyXG4gICAgICBpc0VkaXRhYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB0aXRsZSwgZGVzY3JpcHRpb24sIGNvbG9yLCBpc0VkaXRhYmxlLCBjdXN0b21Bc2NpaSwgaGV4IH07XHJcbiAgfSwgW2FjdGl2ZU9iamVjdCwgc2VsZWN0ZWRGb2xkZXIsIGFjdGl2ZVBsYXlsaXN0SWQsIGFsbFBsYXlsaXN0c10pO1xyXG5cclxuICAvLyBEZXRlcm1pbmUgaW5pdGlhbCBkYXRhIGZvciBtb2RhbFxyXG4gIGNvbnN0IG1vZGFsSW5pdGlhbERhdGEgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGlmIChzZWxlY3RlZEZvbGRlciAmJiBzZWxlY3RlZEZvbGRlciAhPT0gJ3Vuc29ydGVkJykge1xyXG4gICAgICAvLyBGb2xkZXIgZWRpdFxyXG4gICAgICBjb25zdCBjb2xvckluZm8gPSBGT0xERVJfQ09MT1JTLmZpbmQoYyA9PiBjLmlkID09PSBzZWxlY3RlZEZvbGRlcik7XHJcbiAgICAgIGNvbnN0IGRlZmF1bHROYW1lID0gY29sb3JJbmZvID8gYCR7Y29sb3JJbmZvLm5hbWV9IEZvbGRlcmAgOiAnRm9sZGVyJztcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogYWN0aXZlT2JqZWN0Py5uYW1lIHx8IGRlZmF1bHROYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBhY3RpdmVPYmplY3Q/LmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICAgIGN1c3RvbUFzY2lpOiBhY3RpdmVPYmplY3Q/LmN1c3RvbUFzY2lpIHx8ICcnXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQbGF5bGlzdCBlZGl0XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogYWN0aXZlT2JqZWN0Py5uYW1lIHx8ICcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBhY3RpdmVPYmplY3Q/LmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICAgIGN1c3RvbUFzY2lpOiBhY3RpdmVPYmplY3Q/LmN1c3RvbV9hc2NpaSB8fCAnJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sIFthY3RpdmVPYmplY3QsIHNlbGVjdGVkRm9sZGVyXSk7XHJcblxyXG4gIC8vIEZpbmQgbW9zdCByZWNlbnRseSB3YXRjaGVkIHZpZGVvIGZvciBcIkNvbnRpbnVlXCIgZmVhdHVyZVxyXG4gIGNvbnN0IGNvbnRpbnVlVmlkZW8gPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGlmICghdmlkZW9zVG9EaXNwbGF5IHx8IHZpZGVvc1RvRGlzcGxheS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xyXG5cclxuICAgIGxldCBtb3N0UmVjZW50ID0gbnVsbDtcclxuICAgIGxldCBtYXhUaW1lID0gMDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHZpZGVvIG9mIHZpZGVvc1RvRGlzcGxheSkge1xyXG4gICAgICBjb25zdCB2aWRlb0lkID0gZXh0cmFjdFZpZGVvSWQodmlkZW8udmlkZW9fdXJsKSB8fCB2aWRlby52aWRlb19pZDtcclxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSB2aWRlb1Byb2dyZXNzLmdldCh2aWRlb0lkKTtcclxuXHJcbiAgICAgIGlmIChwcm9ncmVzcyAmJiBwcm9ncmVzcy5sYXN0X3VwZGF0ZWQpIHtcclxuICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUocHJvZ3Jlc3MubGFzdF91cGRhdGVkKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgaWYgKHRpbWUgPiBtYXhUaW1lKSB7XHJcbiAgICAgICAgICBtYXhUaW1lID0gdGltZTtcclxuICAgICAgICAgIG1vc3RSZWNlbnQgPSB2aWRlbztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbW9zdFJlY2VudDtcclxuICB9LCBbdmlkZW9zVG9EaXNwbGF5LCB2aWRlb1Byb2dyZXNzXSk7XHJcblxyXG4gIC8vIFN0aWNreSBoZWFkZXIgc3RhdGUgZGV0ZWN0aW9uXHJcbiAgY29uc3QgW2lzU3R1Y2ssIHNldElzU3R1Y2tdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHN0aWNreVNlbnRpbmVsUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICAgIChbZW50cnldKSA9PiB7XHJcbiAgICAgICAgLy8gV2hlbiBzZW50aW5lbCBpcyBOT1QgdmlzaWJsZSAoc2Nyb2xsZWQgcGFzdCB0b3ApLCB3ZSBhcmUgc3R1Y2tcclxuICAgICAgICBzZXRJc1N0dWNrKGVudHJ5LmludGVyc2VjdGlvblJhdGlvIDwgMSAmJiBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QudG9wIDwgMCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHsgdGhyZXNob2xkOiBbMV0sIHJvb3RNYXJnaW46ICctMXB4IDBweCAwcHggMHB4JyB9XHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzdGlja3lTZW50aW5lbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoc3RpY2t5U2VudGluZWxSZWYuY3VycmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGZsZXgtY29sXCI+XHJcbiAgICAgIHsvKiBWaWRlbyBHcmlkIC0gMyBwZXIgcm93ICovfVxyXG4gICAgICB7c2hvd1VwbG9hZGVyID8gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgYmctdHJhbnNwYXJlbnRcIj5cclxuICAgICAgICAgIDxQbGF5bGlzdFVwbG9hZGVyXHJcbiAgICAgICAgICAgIG9uVXBsb2FkQ29tcGxldGU9e2hhbmRsZVVwbG9hZENvbXBsZXRlfVxyXG4gICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gc2V0U2hvd1VwbG9hZGVyKGZhbHNlKX1cclxuICAgICAgICAgICAgaW5pdGlhbFBsYXlsaXN0SWQ9e2FjdGl2ZVBsYXlsaXN0SWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApIDogKFxyXG4gICAgICAgIDxkaXYgcmVmPXtzY3JvbGxDb250YWluZXJSZWZ9IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gYmctdHJhbnNwYXJlbnQgcmVsYXRpdmVcIj5cclxuICAgICAgICAgIHsvKiBQYWdlIEJhbm5lciAtIEFsd2F5cyB2aXNpYmxlIGZvciBjb250ZXh0ICovfVxyXG4gICAgICAgICAge2FjdGl2ZVBsYXlsaXN0SWQgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTggcHQtOFwiPlxyXG4gICAgICAgICAgICAgIDxQYWdlQmFubmVyXHJcbiAgICAgICAgICAgICAgICB0aXRsZT17YmFubmVySW5mby50aXRsZX1cclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtiYW5uZXJJbmZvLmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgZm9sZGVyQ29sb3I9e2Jhbm5lckluZm8uY29sb3J9XHJcbiAgICAgICAgICAgICAgICBvbkVkaXQ9e2Jhbm5lckluZm8uaXNFZGl0YWJsZSA/ICgpID0+IHNldFNob3dFZGl0TW9kYWwodHJ1ZSkgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICB2aWRlb0NvdW50PXt2aWRlb3NUb0Rpc3BsYXkubGVuZ3RofVxyXG4gICAgICAgICAgICAgICAgY3JlYXRpb25ZZWFyPVwiMjAyNlwiXHJcbiAgICAgICAgICAgICAgICBhdXRob3I9e3VzZXJOYW1lfVxyXG4gICAgICAgICAgICAgICAgYXZhdGFyPXtiYW5uZXJJbmZvLmN1c3RvbUFzY2lpIHx8IHVzZXJBdmF0YXJ9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVZpZGVvPXtjb250aW51ZVZpZGVvfVxyXG4gICAgICAgICAgICAgICAgb25Db250aW51ZT17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY29udGludWVWaWRlbyAmJiBvblZpZGVvU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25WaWRlb1NlbGVjdChjb250aW51ZVZpZGVvLnZpZGVvX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICBzZWFtbGVzc0JvdHRvbT17dHJ1ZX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgey8qIFN0aWNreSBTZW50aW5lbCAqL31cclxuICAgICAgICAgIDxkaXYgcmVmPXtzdGlja3lTZW50aW5lbFJlZn0gY2xhc3NOYW1lPVwiYWJzb2x1dGUgaC1weCB3LWZ1bGwgLW10LXB4IHBvaW50ZXItZXZlbnRzLW5vbmUgb3BhY2l0eS0wXCIgLz5cclxuXHJcbiAgICAgICAgICB7LyogU3RpY2t5IFRvb2xiYXIgKi99XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHN0aWNreSB0b3AtMCB6LTQwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTUwMCBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIG92ZXJmbG93LWhpZGRlbiAtbXQtMTZcclxuICAgICAgICAgICAgJHtpc1N0dWNrXHJcbiAgICAgICAgICAgICAgICA/ICdiYWNrZHJvcC1ibHVyLXhsIGJvcmRlci15IHNoYWRvdy0yeGwgbXgtMCByb3VuZGVkLW5vbmUgbWItNiBwdC0yIHBiLTIgYmctc2xhdGUtOTAwLzcwJ1xyXG4gICAgICAgICAgICAgICAgOiAnYmFja2Ryb3AtYmx1ci1bMnB4XSBib3JkZXItYiBib3JkZXIteCBib3JkZXItdCBib3JkZXItd2hpdGUvMTAgc2hhZG93LXhsIG14LTggcm91bmRlZC1iLTJ4bCBtYi04IG10LTAgcHQtMSBwYi0wIGJnLXRyYW5zcGFyZW50J1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYH1cclxuICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzU3R1Y2sgPyB1bmRlZmluZWQgOiAndHJhbnNwYXJlbnQnIC8vIEZ1bGx5IHRyYW5zcGFyZW50IHJlc3Rpbmcgc3RhdGVcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuXHJcblxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHB4LTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCByZWxhdGl2ZSB6LTEwICR7aXNTdHVjayA/ICdoLVs1MnB4XScgOiAncHktMC41J31gfT5cclxuXHJcblxyXG4gICAgICAgICAgICAgIHsvKiBGb2xkZXIgU2VsZWN0aW9uIFJvdyAqL31cclxuICAgICAgICAgICAgICB7LyogTGVmdCBTaWRlOiBDb21wYWN0IEZvbGRlciBTZWxlY3RvciArIFNvcnQgKi99XHJcbiAgICAgICAgICAgICAgey8qIExlZnQgU2lkZTogQ29tcGFjdCBGb2xkZXIgU2VsZWN0b3IgKyBTb3J0ICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTAgb3ZlcmZsb3cteC1hdXRvIG5vLXNjcm9sbGJhciBtYXNrLWdyYWRpZW50LXJpZ2h0IGZsZXgtMSBtaW4tdy0wIHByLTBcIj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHByLTMgc2hyaW5rLTBcIj5cclxuICAgICAgICAgICAgICAgICAgey8qIENvbXBhY3QgU29ydCAqL31cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBncm91cCBzaHJpbmstMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzb3J0Qnl9XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNvcnRCeShlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1zbGF0ZS04MDAvODAgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCByb3VuZGVkLW1kIHB5LTEgcGwtMiBwci01IHRleHQtWzEwcHhdIGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgdGV4dC1zbGF0ZS0zMDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLXNreS01MDAgY3Vyc29yLXBvaW50ZXIgaG92ZXI6Ymctc2xhdGUtNzAwIHRyYW5zaXRpb24tY29sb3JzIGFwcGVhcmFuY2Utbm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlNvcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzaHVmZmxlXCI+RGVmYXVsdDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImNocm9ub2xvZ2ljYWxcIj5EYXRlPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicHJvZ3Jlc3NcIj5Qcm9ncmVzczwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBDb21wYWN0IEZvbGRlciBCdXR0b25zICovfVxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgc2hyaW5rLTBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZEZvbGRlcihudWxsKX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTIgcHktMC41IHJvdW5kZWQtbWQgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciAke3NlbGVjdGVkRm9sZGVyID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXNreS01MDAgdGV4dC13aGl0ZSBzaGFkb3ctc20nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXNsYXRlLTgwMC84MCB0ZXh0LXNsYXRlLTQwMCBob3ZlcjpiZy1zbGF0ZS03MDAgaG92ZXI6dGV4dC1zbGF0ZS0yMDAgYm9yZGVyIGJvcmRlci13aGl0ZS81J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICBBbGxcclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZEZvbGRlcigndW5zb3J0ZWQnKX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTIgcHktMC41IHJvdW5kZWQtbWQgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciAke3NlbGVjdGVkRm9sZGVyID09PSAndW5zb3J0ZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXNsYXRlLTUwMCB0ZXh0LXdoaXRlIHNoYWRvdy1zbSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctc2xhdGUtODAwLzgwIHRleHQtc2xhdGUtNDAwIGhvdmVyOmJnLXNsYXRlLTcwMCBob3Zlcjp0ZXh0LXNsYXRlLTIwMCBib3JkZXIgYm9yZGVyLXdoaXRlLzUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIFVuc29ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIgc2hyaW5rLTAgaC02IG1yLTMgYm9yZGVyLTIgYm9yZGVyLWJsYWNrIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuXCI+XHJcbiAgICAgICAgICAgICAgICAgIHtGT0xERVJfQ09MT1JTLm1hcCgoY29sb3IsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHNlbGVjdGVkRm9sZGVyID09PSBjb2xvci5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0ZpcnN0ID0gaW5kZXggPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNMYXN0ID0gaW5kZXggPT09IEZPTERFUl9DT0xPUlMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGZvbGRlckNvdW50c1tjb2xvci5pZF0gfHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtjb2xvci5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRGb2xkZXIoY29sb3IuaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BoLWZ1bGwgZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tYWxsICR7aXNTZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ29wYWNpdHktMTAwIHotMTAgcmVsYXRpdmUgYWZ0ZXI6Y29udGVudC1bXCJcIl0gYWZ0ZXI6YWJzb2x1dGUgYWZ0ZXI6aW5zZXQtMCBhZnRlcjpyaW5nLTIgYWZ0ZXI6cmluZy1pbnNldCBhZnRlcjpyaW5nLXdoaXRlLzUwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJ29wYWNpdHktNjAgaG92ZXI6b3BhY2l0eS0xMDAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSAke2lzRmlyc3QgPyAncm91bmRlZC1sLW1kJyA6ICcnfSAke2lzTGFzdCA/ICdyb3VuZGVkLXItbWQnIDogJyd9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBjb2xvci5oZXggfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Ake2NvbG9yLm5hbWV9ICgke2NvdW50fSlgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y291bnQgPiAwICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXdoaXRlLzkwIGRyb3Atc2hhZG93LW1kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291bnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgey8qIFJpZ2h0IFNpZGU6IEFjdGlvbnMgKi99XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBzaHJpbmstMCBtbC1hdXRvXCI+XHJcbiAgICAgICAgICAgICAgICB7LyogQnVsayBUYWcgKi99XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEJ1bGtUYWdNb2RlKCFidWxrVGFnTW9kZSl9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMS41IHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1hbGwgJHtidWxrVGFnTW9kZVxyXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtNjAwIHRleHQtd2hpdGUgc2hhZG93LWxnJ1xyXG4gICAgICAgICAgICAgICAgICAgIDogJ2JnLXNsYXRlLTgwMC84MCB0ZXh0LXNsYXRlLTQwMCBob3ZlcjpiZy1zbGF0ZS03MDAgaG92ZXI6dGV4dC1zbGF0ZS0yMDAgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCdcclxuICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgdGl0bGU9e2J1bGtUYWdNb2RlID8gXCJFeGl0IEJ1bGsgVGFnZ2luZ1wiIDogXCJCdWxrIFRhZ1wifVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNyA3aC4wMU03IDNoNWMuNTEyIDAgMS4wMjQuMTk1IDEuNDE0LjU4Nmw3IDdhMiAyIDAgMDEwIDIuODI4bC03IDdhMiAyIDAgMDEtMi44MjggMGwtNy03QTEuOTk0IDEuOTk0IDAgMDEzIDEyVjdhNCA0IDAgMDE0LTR6XCIgLz5cclxuICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogQWRkICovfVxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93VXBsb2FkZXIodHJ1ZSl9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMS41IGJnLXNreS01MDAgaG92ZXI6Ymctc2t5LTQwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1hbGwgc2hhZG93LWxnIGhvdmVyOnNoYWRvdy1za3ktNTAwLzI1IGJvcmRlciBib3JkZXItd2hpdGUvMTBcIlxyXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIkFkZCBDb25maWdcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTIgNHYxNm04LThINFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcblxyXG4gICAgICAgICAgPC9kaXYgPlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtOCBwYi04XCI+XHJcbiAgICAgICAgICAgIHsvKiBFZGl0IFBsYXlsaXN0L0ZvbGRlciBNb2RhbCAqL31cclxuICAgICAgICAgICAgPEVkaXRQbGF5bGlzdE1vZGFsXHJcbiAgICAgICAgICAgICAgaXNPcGVuPXtzaG93RWRpdE1vZGFsfVxyXG4gICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dFZGl0TW9kYWwoZmFsc2UpfVxyXG4gICAgICAgICAgICAgIG9uU2F2ZT17aGFuZGxlVXBkYXRlTWV0YWRhdGF9XHJcbiAgICAgICAgICAgICAgaW5pdGlhbERhdGE9e21vZGFsSW5pdGlhbERhdGF9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICB7bG9hZGluZ0ZvbGRlcnMgPyAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIHhsOmdyaWQtY29scy0zIGdhcC02IGFuaW1hdGUtcHVsc2VcIj5cclxuICAgICAgICAgICAgICAgIHtbLi4uQXJyYXkoMTIpXS5tYXAoKF8sIGkpID0+IChcclxuICAgICAgICAgICAgICAgICAgPFZpZGVvQ2FyZFNrZWxldG9uIGtleT17aX0gLz5cclxuICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApIDogc29ydGVkVmlkZW9zLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgIHsvKiBTdGlja3kgQ2Fyb3VzZWwgU2VjdGlvbiAtIEhpZGUgb24gVW5zb3J0ZWQgcGFnZSAqL31cclxuICAgICAgICAgICAgICAgIHtzdGlja2llZFZpZGVvcy5sZW5ndGggPiAwICYmIHNlbGVjdGVkRm9sZGVyICE9PSAndW5zb3J0ZWQnICYmIChcclxuICAgICAgICAgICAgICAgICAgPFN0aWNreVZpZGVvQ2Fyb3VzZWw+XHJcbiAgICAgICAgICAgICAgICAgICAge3N0aWNraWVkVmlkZW9zLm1hcCgodmlkZW8sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEluZGV4ID0gYWN0aXZlUGxheWxpc3RJdGVtcy5maW5kSW5kZXgodiA9PiB2LmlkID09PSB2aWRlby5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VmlkZW9DYXJkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt2aWRlby5pZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlbz17dmlkZW99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsSW5kZXg9e29yaWdpbmFsSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17c2VsZWN0ZWRWaWRlb0luZGV4ID09PSBvcmlnaW5hbEluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ3VycmVudGx5UGxheWluZz17Y3VycmVudFZpZGVvSW5kZXggPT09IG9yaWdpbmFsSW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9Gb2xkZXJzPXt2aWRlb0ZvbGRlckFzc2lnbm1lbnRzW3ZpZGVvLmlkXSB8fCBbXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZvbGRlcj17c2VsZWN0ZWRGb2xkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb0NsaWNrPXsoKSA9PiBoYW5kbGVWaWRlb0NsaWNrKHZpZGVvLCBpbmRleCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFyQ2xpY2s9eyhlKSA9PiBoYW5kbGVTdGFyQ2xpY2soZSwgdmlkZW8pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhckNvbG9yTGVmdENsaWNrPXtoYW5kbGVTdGFyQ29sb3JMZWZ0Q2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFyQ29sb3JSaWdodENsaWNrPXtoYW5kbGVTdGFyQ29sb3JSaWdodENsaWNrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVudU9wdGlvbkNsaWNrPXsob3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmFjdGlvbiA9PT0gJ3RvZ2dsZVN0aWNreScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG9nZ2xlU3RpY2t5KGFjdGl2ZVBsYXlsaXN0SWQsIHZpZGVvLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1lbnVPcHRpb25DbGljayhvcHRpb24sIHZpZGVvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVpY2tBc3NpZ249e2hhbmRsZVN0YXJDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBidWxrVGFnTW9kZT17YnVsa1RhZ01vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsa1RhZ1NlbGVjdGlvbnM9e2J1bGtUYWdTZWxlY3Rpb25zW3ZpZGVvLmlkXSB8fCBuZXcgU2V0KCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25CdWxrVGFnQ29sb3JDbGljaz17KGNvbG9yKSA9PiBoYW5kbGVCdWxrVGFnQ29sb3JDbGljayh2aWRlbywgY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uUGluQ2xpY2s9eygpID0+IHsgfX0gLy8gSGFuZGxlZCBpbnRlcm5hbGx5IGluIFZpZGVvQ2FyZCB2aWEgc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N0aWNraWVkPXt0cnVlfSAvLyBJdCBpcyBzdGlja2llZCBpbiB0aGlzIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcz17KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvSWQgPSBleHRyYWN0VmlkZW9JZCh2aWRlby52aWRlb191cmwpIHx8IHZpZGVvLnZpZGVvX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHZpZGVvUHJvZ3Jlc3MuZ2V0KHZpZGVvSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEgPyAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInID8gZGF0YSA6IGRhdGEucGVyY2VudGFnZSkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNXYXRjaGVkPXsoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlkZW9JZCA9IGV4dHJhY3RWaWRlb0lkKHZpZGVvLnZpZGVvX3VybCkgfHwgdmlkZW8udmlkZW9faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2F0Y2hlZFZpZGVvSWRzLmhhcyh2aWRlb0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgPC9TdGlja3lWaWRlb0Nhcm91c2VsPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICB7LyogUmVndWxhciBHcmlkICovfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIHhsOmdyaWQtY29scy0zIGdhcC02IGFuaW1hdGUtZmFkZS1pblwiPlxyXG4gICAgICAgICAgICAgICAgICB7cmVndWxhclZpZGVvcy5zbGljZSgoY3VycmVudFBhZ2UgLSAxKSAqIGl0ZW1zUGVyUGFnZSwgY3VycmVudFBhZ2UgKiBpdGVtc1BlclBhZ2UpLm1hcCgodmlkZW8sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxJbmRleCA9IGFjdGl2ZVBsYXlsaXN0SXRlbXMuZmluZEluZGV4KHYgPT4gdi5pZCA9PT0gdmlkZW8uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHN0aWNraWVkIHN0YXR1cyBmb3IgdGhpcyBzcGVjaWZpYyBmb2xkZXIgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlcktleSA9IHNlbGVjdGVkRm9sZGVyID09PSBudWxsID8gJ3Jvb3QnIDogc2VsZWN0ZWRGb2xkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7YWN0aXZlUGxheWxpc3RJZH06OiR7Zm9sZGVyS2V5fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDb250ZXh0U3RpY2tpZWQgPSAoYWxsU3RpY2tpZWRWaWRlb3Nba2V5XSB8fCBbXSkuaW5jbHVkZXModmlkZW8uaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPFZpZGVvQ2FyZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3ZpZGVvLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbz17dmlkZW99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxJbmRleD17b3JpZ2luYWxJbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17c2VsZWN0ZWRWaWRlb0luZGV4ID09PSBvcmlnaW5hbEluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnRseVBsYXlpbmc9e2N1cnJlbnRWaWRlb0luZGV4ID09PSBvcmlnaW5hbEluZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0ZvbGRlcnM9e3ZpZGVvRm9sZGVyQXNzaWdubWVudHNbdmlkZW8uaWRdIHx8IFtdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZvbGRlcj17c2VsZWN0ZWRGb2xkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9DbGljaz17KCkgPT4gaGFuZGxlVmlkZW9DbGljayh2aWRlbywgaW5kZXgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJDbGljaz17KGUpID0+IGhhbmRsZVN0YXJDbGljayhlLCB2aWRlbyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhckNvbG9yTGVmdENsaWNrPXtoYW5kbGVTdGFyQ29sb3JMZWZ0Q2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhckNvbG9yUmlnaHRDbGljaz17aGFuZGxlU3RhckNvbG9yUmlnaHRDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25NZW51T3B0aW9uQ2xpY2s9eyhvcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmFjdGlvbiA9PT0gJ3RvZ2dsZVN0aWNreScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVRvZ2dsZVN0aWNreShhY3RpdmVQbGF5bGlzdElkLCB2aWRlby5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1lbnVPcHRpb25DbGljayhvcHRpb24sIHZpZGVvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVpY2tBc3NpZ249e2hhbmRsZVN0YXJDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVsa1RhZ01vZGU9e2J1bGtUYWdNb2RlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxrVGFnU2VsZWN0aW9ucz17YnVsa1RhZ1NlbGVjdGlvbnNbdmlkZW8uaWRdIHx8IG5ldyBTZXQoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25CdWxrVGFnQ29sb3JDbGljaz17KGNvbG9yKSA9PiBoYW5kbGVCdWxrVGFnQ29sb3JDbGljayh2aWRlbywgY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblBpbkNsaWNrPXsoKSA9PiB7IH19IC8vIEhhbmRsZWQgaW50ZXJuYWxseSBpbiBWaWRlb0NhcmQgdmlhIHN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RpY2tpZWQ9e2lzQ29udGV4dFN0aWNraWVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcz17KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0lkID0gZXh0cmFjdFZpZGVvSWQodmlkZW8udmlkZW9fdXJsKSB8fCB2aWRlby52aWRlb19pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdmlkZW9Qcm9ncmVzcy5nZXQodmlkZW8uaWQpIHx8IHZpZGVvUHJvZ3Jlc3MuZ2V0KGV4dHJhY3RWaWRlb0lkKHZpZGVvLnZpZGVvX3VybCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhID8gKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyA/IGRhdGEgOiBkYXRhLnBlcmNlbnRhZ2UpIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNXYXRjaGVkPXsoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvSWQgPSBleHRyYWN0VmlkZW9JZCh2aWRlby52aWRlb191cmwpIHx8IHZpZGVvLnZpZGVvX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YXRjaGVkVmlkZW9JZHMuaGFzKHZpZGVvSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbGF0ZS00MDAgcHktOFwiPlxyXG4gICAgICAgICAgICAgICAgTm8gdmlkZW9zIGZvdW5kIGluIHRoaXMgcGxheWxpc3QuXHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICB7LyogUGFnaW5hdGlvbiBDb250cm9scyAtIEJhc2VkIG9uIFJlZ3VsYXIgVmlkZW9zIG9ubHksIHNpbmNlIFN0aWNraWVzIGFyZSBhbHdheXMgc2hvd24gKi99XHJcbiAgICAgICAgICAgIHtyZWd1bGFyVmlkZW9zLmxlbmd0aCA+IGl0ZW1zUGVyUGFnZSAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBnYXAtNCBtdC04IG1iLTRcIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UocHJldiA9PiBNYXRoLm1heChwcmV2IC0gMSwgMSkpfVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPT09IDF9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1zbGF0ZS03MDAgaG92ZXI6Ymctc2xhdGUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgYm9yZGVyIGJvcmRlci1zbGF0ZS02MDAgdGV4dC1za3ktNDAwIGhvdmVyOnRleHQtc2t5LTMwMFwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIFByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTQwMCBmb250LW1lZGl1bVwiPlxyXG4gICAgICAgICAgICAgICAgICBQYWdlIHtjdXJyZW50UGFnZX0gb2Yge01hdGguY2VpbChyZWd1bGFyVmlkZW9zLmxlbmd0aCAvIGl0ZW1zUGVyUGFnZSl9XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcblxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRDdXJyZW50UGFnZShwcmV2ID0+IE1hdGgubWluKHByZXYgKyAxLCBNYXRoLmNlaWwocmVndWxhclZpZGVvcy5sZW5ndGggLyBpdGVtc1BlclBhZ2UpKSl9XHJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50UGFnZSA+PSBNYXRoLmNlaWwocmVndWxhclZpZGVvcy5sZW5ndGggLyBpdGVtc1BlclBhZ2UpfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctc2xhdGUtNzAwIGhvdmVyOmJnLXNsYXRlLTYwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCByb3VuZGVkLWxnIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzIGJvcmRlciBib3JkZXItc2xhdGUtNjAwIHRleHQtc2t5LTQwMCBob3Zlcjp0ZXh0LXNreS0zMDBcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICBOZXh0XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2ID5cclxuICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB7LyogUGxheWxpc3QgU2VsZWN0aW9uIE1vZGFsICovfVxyXG4gICAgICA8UGxheWxpc3RTZWxlY3Rpb25Nb2RhbFxyXG4gICAgICAgIGlzT3Blbj17c2hvd1BsYXlsaXN0U2VsZWN0b3J9XHJcbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xyXG4gICAgICAgICAgc2V0U2hvd1BsYXlsaXN0U2VsZWN0b3IoZmFsc2UpO1xyXG4gICAgICAgICAgc2V0U2VsZWN0ZWRWaWRlb0ZvckFjdGlvbihudWxsKTtcclxuICAgICAgICAgIHNldEFjdGlvblR5cGUobnVsbCk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBvblNlbGVjdD17aGFuZGxlUGxheWxpc3RTZWxlY3R9XHJcbiAgICAgICAgdGl0bGU9e2FjdGlvblR5cGUgPT09ICdtb3ZlJyA/ICdNb3ZlIHRvIFBsYXlsaXN0JyA6ICdDb3B5IHRvIFBsYXlsaXN0J31cclxuICAgICAgLz5cclxuICAgIDwvZGl2ID5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmlkZW9zUGFnZTtcclxuXHJcbiJdLCJmaWxlIjoiQzovUHJvamVjdHMveXR0djIvc3JjL2NvbXBvbmVudHMvVmlkZW9zUGFnZS5qc3gifQ==