import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/NativeVideoPlayer.jsx");import __vite__cjsImport0_react_jsxDevRuntime from "/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=cd56faf3"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/node_modules/.vite/deps/react.js?v=cd56faf3"; const React = __vite__cjsImport3_react.__esModule ? __vite__cjsImport3_react.default : __vite__cjsImport3_react; const useEffect = __vite__cjsImport3_react["useEffect"]; const useRef = __vite__cjsImport3_react["useRef"]; const useState = __vite__cjsImport3_react["useState"];
import { updateVideoProgress } from "/src/api/playlistApi.js";
import { invoke } from "/node_modules/.vite/deps/@tauri-apps_api_core.js?v=cd56faf3";
import { getCurrentWindow } from "/node_modules/.vite/deps/@tauri-apps_api_window.js?v=cd56faf3";
import {
  observeMpvProperties
} from "/node_modules/.vite/deps/tauri-plugin-mpv-api.js?v=cd56faf3";
const sendMpvCommand = async (commandData) => {
  const mpvCommand = [commandData.command, 0];
  const windowLabel = getCurrentWindow().label;
  console.log("Invoking sendMpvCommand (wrapped with ID):", { mpvCommand, windowLabel });
  return await invoke("plugin:mpv|command", { mpvCommand, windowLabel });
};
const initializeMpv = async (options) => {
  const windowLabel = getCurrentWindow().label;
  return await invoke("plugin:mpv|init", { ...options, windowLabel });
};
const destroyMpv = async () => {
  const windowLabel = getCurrentWindow().label;
  return await invoke("plugin:mpv|destroy", { windowLabel });
};
const getMpvProperty = async (name) => {
  try {
    const res = await sendMpvCommand({ command: ["get_property", name] });
    return res ? res.data : null;
  } catch (e) {
    console.warn(`getMpvProperty failed for ${name}:`, e);
    return null;
  }
};
const setMpvProperty = async (name, value) => {
  try {
    await sendMpvCommand({ command: ["set_property", name, value] });
  } catch (e) {
    console.warn(`setMpvProperty failed for ${name}=${value}:`, e);
  }
};
const getStoredPlaybackTime = (videoId) => {
  try {
    const stored = localStorage.getItem(`playback_time_${videoId}`);
    return stored ? parseFloat(stored) : 0;
  } catch {
    return 0;
  }
};
const savePlaybackTime = (videoId, time) => {
  try {
    localStorage.setItem(`playback_time_${videoId}`, time.toString());
  } catch (error) {
    console.error("Failed to save playback time:", error);
  }
};
const saveVideoProgress = async (videoId, videoUrl, duration2, currentTime) => {
  try {
    await updateVideoProgress(videoId, videoUrl, duration2, currentTime);
  } catch (error) {
    console.error("Failed to save video progress to database:", error);
  }
};
const NativeVideoPlayer = ({ videoUrl, videoId, playerId = "default", onEnded, ...props }) => {
  _s();
  const containerRef = useRef(null);
  const saveIntervalRef = useRef(null);
  const unlistenRef = useRef(null);
  const initAttemptedRef = useRef(false);
  const onEndedRef = useRef(onEnded);
  const eofHandledRef = useRef(false);
  useEffect(() => {
    onEndedRef.current = onEnded;
  }, [onEnded]);
  const [error, setError] = useState(null);
  const [isInitialized, setIsInitialized] = useState(false);
  useEffect(() => {
    if (!videoUrl) {
      setError(null);
      initAttemptedRef.current = false;
      return;
    }
    if (initAttemptedRef.current) {
      console.log("Init already attempted, skipping...");
      return;
    }
    let isMounted = true;
    initAttemptedRef.current = true;
    eofHandledRef.current = false;
    const initializePlayer = async () => {
      try {
        if (!containerRef.current) {
          console.log("Waiting for container to mount...");
          await new Promise((resolve) => setTimeout(resolve, 200));
        }
        if (!containerRef.current) {
          console.warn("Container element not found, but proceeding with MPV init (might open in separate window)");
        } else {
          console.log("Container ready, initializing mpv with IPC...");
        }
        await new Promise((resolve) => setTimeout(resolve, 300));
        console.log("Initializing mpv with IPC plugin...");
        const config = {
          mpvConfig: {
            "vo": "gpu",
            "hwdec": "auto-safe",
            "keep-open": "yes",
            "force-window": "yes"
          },
          observedProperties: ["pause", "time-pos", "duration", "filename", "wid"]
        };
        try {
          const initPromise = initializeMpv(config);
          const timeoutPromise = new Promise(
            (_, reject) => setTimeout(() => reject(new Error("Initialization timed out after 15000ms")), 15e3)
          );
          await Promise.race([initPromise, timeoutPromise]);
          console.log("✓ mpv initialized successfully with IPC plugin");
        } catch (initError) {
          console.error("Failed to initialize mpv:", initError);
          if (initError.toString().includes("connection refused") || initError.toString().includes("ipc")) {
            throw new Error("Could not connect to mpv plugin. Is the backend running?");
          }
          throw initError;
        }
        if (!isMounted) return;
        setIsInitialized(true);
        await new Promise((resolve) => setTimeout(resolve, 500));
        let filePath = videoUrl;
        if (filePath.startsWith("file://")) {
          filePath = filePath.replace(/^file:\/\/+/, "");
        }
        if (filePath.startsWith("http://127.0.0.1:1422/")) {
          console.warn("Native player received streaming URL, using direct file path");
        }
        console.log("Loading video in mpv:", filePath);
        try {
          console.log("Calling sendMpvCommand loadfile...");
          await sendMpvCommand({ command: ["loadfile", filePath] });
          console.log("✓ loadfile command successful");
          await new Promise((resolve) => setTimeout(resolve, 500));
          try {
            await sendMpvCommand({ command: ["set", "video", "yes"] });
            console.log("✓ Enabled video track");
          } catch (e) {
            console.warn("Could not enable video track:", e);
          }
        } catch (cmdError) {
          console.error("loadfile command failed:", cmdError);
          throw cmdError;
        }
        console.log("Waiting for video to load and initialize video output...");
        let videoLoaded = false;
        let attempts = 0;
        const maxAttempts = 30;
        while (!videoLoaded && attempts < maxAttempts) {
          await new Promise((resolve) => setTimeout(resolve, 200));
          try {
            const path = await getMpvProperty("path");
            const videoFormat = await getMpvProperty("video-format");
            const width = await getMpvProperty("width");
            const height = await getMpvProperty("height");
            const duration2 = await getMpvProperty("duration");
            if (attempts % 5 === 0) {
              console.log(`Video loading check (attempt ${attempts}/${maxAttempts}):`, {
                path: path ? "loaded" : "null",
                videoFormat,
                width,
                height,
                duration: duration2
              });
            }
            if (videoFormat && width && width > 0 && height && height > 0) {
              videoLoaded = true;
              console.log("✓ Video loaded and video output initialized:", { videoFormat, width, height, duration: duration2 });
              break;
            }
          } catch (e) {
            console.warn("Error checking video status:", e);
          }
          attempts++;
        }
        if (!videoLoaded) {
          console.error("❌ Video failed to load after", maxAttempts, "attempts");
          try {
            const path = await getMpvProperty("path");
            const videoFormat = await getMpvProperty("video-format");
            const videoCodec = await getMpvProperty("video-codec");
            console.error("Final video status:", { path, videoFormat, videoCodec });
          } catch (e) {
            console.error("Could not get final video status:", e);
          }
        }
        const id = videoId || videoUrl;
        const storedTime = getStoredPlaybackTime(id);
        if (storedTime > 0 && videoLoaded) {
          const isNearEnd = storedTime >= duration - 5 || duration > 0 && storedTime / duration > 0.95;
          if (isNearEnd) {
            console.log("Stored time is near end, assuming finished. Starting at 0.");
            savePlaybackTime(id, 0);
          } else {
            try {
              console.log("Seeking to stored time:", storedTime);
              await setMpvProperty("time-pos", storedTime);
              console.log("✓ Seek successful");
            } catch (seekError) {
              console.error("Seek failed:", seekError);
            }
          }
        }
        console.log("Setting up property observation...");
        try {
          const unlisten = await observeMpvProperties(
            ["pause", "time-pos", "duration", "eof-reached"],
            async (properties) => {
              if (!isMounted) return;
              const id2 = videoId || videoUrl;
              const currentTime = properties["time-pos"] || 0;
              const duration2 = properties["duration"] || 0;
              const isPaused = properties["pause"] || false;
              if (currentTime > 0) {
                savePlaybackTime(id2, currentTime);
              }
              if (!isPaused && currentTime > 0) {
                if (!saveIntervalRef.current) {
                  saveIntervalRef.current = setInterval(async () => {
                    if (isMounted) {
                      try {
                        const time = await getMpvProperty("time-pos");
                        const dur = await getMpvProperty("duration");
                        if (time && time > 0) {
                          saveVideoProgress(id2, videoUrl, dur || 0, time);
                        }
                      } catch (e) {
                        console.warn("Error saving progress:", e);
                      }
                    }
                  }, 5e3);
                }
              } else {
                if (currentTime > 0 && duration2 > 0) {
                  saveVideoProgress(id2, videoUrl, duration2, currentTime);
                }
                if (saveIntervalRef.current) {
                  clearInterval(saveIntervalRef.current);
                  saveIntervalRef.current = null;
                }
              }
              const isEof = properties["eof-reached"];
              if (isEof && !eofHandledRef.current) {
                console.log("EOF reached, resetting playback time and triggering onEnded");
                eofHandledRef.current = true;
                savePlaybackTime(id2, 0);
                saveVideoProgress(id2, videoUrl, duration2, 0);
                if (onEndedRef.current) {
                  onEndedRef.current();
                }
              }
            }
          );
          unlistenRef.current = unlisten;
          console.log("✓ Property observation set up successfully");
        } catch (obsError) {
          console.error("Property observation setup failed:", obsError);
        }
        try {
          console.log("Starting playback...");
          await setMpvProperty("pause", false);
          console.log("✓ Playback started");
          await new Promise((resolve) => setTimeout(resolve, 1e3));
          try {
            const vo = await getMpvProperty("video-out");
            const width = await getMpvProperty("width");
            const height = await getMpvProperty("height");
            const videoFormat = await getMpvProperty("video-format");
            const wid = await getMpvProperty("wid");
            console.log("Video output info:", { vo, width, height, videoFormat, wid });
            if (!vo || !width || !height) {
              console.warn("⚠️ Video output may not be initialized yet");
              console.warn("This is normal for IPC plugin - mpv window should be embedded");
            } else {
              console.log(`✓ Video rendering: ${width}x${height} using ${vo}`);
            }
          } catch (infoError) {
            console.warn("Could not query video output info:", infoError);
          }
        } catch (playError) {
          console.error("Failed to start playback:", playError);
          throw playError;
        }
      } catch (err) {
        console.error("Failed to initialize mpv player:", err);
        if (isMounted) {
          setError(`Failed to load video: ${err.message || err}`);
        }
      }
    };
    initializePlayer();
    return () => {
      isMounted = false;
      initAttemptedRef.current = false;
      if (unlistenRef.current) {
        unlistenRef.current();
        unlistenRef.current = null;
      }
      if (saveIntervalRef.current) {
        clearInterval(saveIntervalRef.current);
        saveIntervalRef.current = null;
      }
      const saveFinalProgress = async () => {
        try {
          const id = videoId || videoUrl;
          const currentTime = await getMpvProperty("time-pos");
          const duration2 = await getMpvProperty("duration");
          if (currentTime && duration2 && currentTime > 0 && duration2 > 0) {
            savePlaybackTime(id, currentTime);
            saveVideoProgress(id, videoUrl, duration2, currentTime);
          }
        } catch (e) {
        }
      };
      saveFinalProgress().then(() => {
        destroyMpv().catch(console.error);
        console.log("Player cleanup completed");
      });
    };
  }, [videoUrl, videoId, playerId]);
  if (error) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center w-full h-full bg-black text-white", children: /* @__PURE__ */ jsxDEV("p", { children: error }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
      lineNumber: 445,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
      lineNumber: 444,
      columnNumber: 7
    }, this);
  }
  if (!videoUrl) {
    return /* @__PURE__ */ jsxDEV("div", { className: "flex items-center justify-center w-full h-full bg-black text-white", children: /* @__PURE__ */ jsxDEV("p", { children: "No video file selected" }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
      lineNumber: 453,
      columnNumber: 9
    }, this) }, void 0, false, {
      fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
      lineNumber: 452,
      columnNumber: 7
    }, this);
  }
  return /* @__PURE__ */ jsxDEV(
    "div",
    {
      ref: containerRef,
      id: `mpv-player-${playerId}`,
      className: "w-full h-full bg-black flex items-center justify-center",
      style: {
        position: "relative",
        width: "100%",
        height: "100%",
        minWidth: "100%",
        minHeight: "100%"
      },
      children: !isInitialized && /* @__PURE__ */ jsxDEV("div", { className: "text-white", children: /* @__PURE__ */ jsxDEV("p", { children: "Initializing player..." }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
        lineNumber: 474,
        columnNumber: 11
      }, this) }, void 0, false, {
        fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
        lineNumber: 473,
        columnNumber: 7
      }, this)
    },
    void 0,
    false,
    {
      fileName: "C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx",
      lineNumber: 460,
      columnNumber: 5
    },
    this
  );
};
_s(NativeVideoPlayer, "0Opp2WDKzVdRewsdgYINEkZw6EU=");
_c = NativeVideoPlayer;
export default NativeVideoPlayer;
var _c;
$RefreshReg$(_c, "NativeVideoPlayer");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("C:/Projects/yttv2/src/components/NativeVideoPlayer.jsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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b2dyZXNzIiwiaW52b2tlIiwiZ2V0Q3VycmVudFdpbmRvdyIsIm9ic2VydmVNcHZQcm9wZXJ0aWVzIiwic2VuZE1wdkNvbW1hbmQiLCJjb21tYW5kRGF0YSIsIm1wdkNvbW1hbmQiLCJjb21tYW5kIiwid2luZG93TGFiZWwiLCJsYWJlbCIsImNvbnNvbGUiLCJsb2ciLCJpbml0aWFsaXplTXB2Iiwib3B0aW9ucyIsImRlc3Ryb3lNcHYiLCJnZXRNcHZQcm9wZXJ0eSIsIm5hbWUiLCJyZXMiLCJkYXRhIiwiZSIsIndhcm4iLCJzZXRNcHZQcm9wZXJ0eSIsInZhbHVlIiwiZ2V0U3RvcmVkUGxheWJhY2tUaW1lIiwidmlkZW9JZCIsInN0b3JlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZUZsb2F0Iiwic2F2ZVBsYXliYWNrVGltZSIsInRpbWUiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJlcnJvciIsInNhdmVWaWRlb1Byb2dyZXNzIiwidmlkZW9VcmwiLCJkdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwiTmF0aXZlVmlkZW9QbGF5ZXIiLCJwbGF5ZXJJZCIsIm9uRW5kZWQiLCJwcm9wcyIsIl9zIiwiY29udGFpbmVyUmVmIiwic2F2ZUludGVydmFsUmVmIiwidW5saXN0ZW5SZWYiLCJpbml0QXR0ZW1wdGVkUmVmIiwib25FbmRlZFJlZiIsImVvZkhhbmRsZWRSZWYiLCJjdXJyZW50Iiwic2V0RXJyb3IiLCJpc0luaXRpYWxpemVkIiwic2V0SXNJbml0aWFsaXplZCIsImlzTW91bnRlZCIsImluaXRpYWxpemVQbGF5ZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjb25maWciLCJtcHZDb25maWciLCJvYnNlcnZlZFByb3BlcnRpZXMiLCJpbml0UHJvbWlzZSIsInRpbWVvdXRQcm9taXNlIiwiXyIsInJlamVjdCIsIkVycm9yIiwicmFjZSIsImluaXRFcnJvciIsImluY2x1ZGVzIiwiZmlsZVBhdGgiLCJzdGFydHNXaXRoIiwicmVwbGFjZSIsImNtZEVycm9yIiwidmlkZW9Mb2FkZWQiLCJhdHRlbXB0cyIsIm1heEF0dGVtcHRzIiwicGF0aCIsInZpZGVvRm9ybWF0Iiwid2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0NvZGVjIiwiaWQiLCJzdG9yZWRUaW1lIiwiaXNOZWFyRW5kIiwic2Vla0Vycm9yIiwidW5saXN0ZW4iLCJwcm9wZXJ0aWVzIiwiaXNQYXVzZWQiLCJzZXRJbnRlcnZhbCIsImR1ciIsImNsZWFySW50ZXJ2YWwiLCJpc0VvZiIsIm9ic0Vycm9yIiwidm8iLCJ3aWQiLCJpbmZvRXJyb3IiLCJwbGF5RXJyb3IiLCJlcnIiLCJtZXNzYWdlIiwic2F2ZUZpbmFsUHJvZ3Jlc3MiLCJ0aGVuIiwiY2F0Y2giLCJwb3NpdGlvbiIsIm1pbldpZHRoIiwibWluSGVpZ2h0IiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiTmF0aXZlVmlkZW9QbGF5ZXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVwZGF0ZVZpZGVvUHJvZ3Jlc3MgfSBmcm9tICcuLi9hcGkvcGxheWxpc3RBcGknO1xyXG5pbXBvcnQgeyBpbnZva2UgfSBmcm9tICdAdGF1cmktYXBwcy9hcGkvY29yZSc7XHJcbmltcG9ydCB7IGdldEN1cnJlbnRXaW5kb3cgfSBmcm9tICdAdGF1cmktYXBwcy9hcGkvd2luZG93JztcclxuXHJcbi8vIE1hbnVhbGx5IHZlcmlmeSBvYnNlcnZlTXB2UHJvcGVydGllcyBpbXBvcnQgb3IgaW1wbGVtZW50IGxvY2FsbHkgaWYgbmVlZGVkLlxyXG4vLyBLZWVwaW5nIGl0IGZvciBub3cgYXNzdW1pbmcgaXQgdXNlcyBldmVudCBzeXN0ZW0gd2hpY2ggbWlnaHQgbWF0Y2guXHJcbmltcG9ydCB7XHJcbiAgb2JzZXJ2ZU1wdlByb3BlcnRpZXMsXHJcbn0gZnJvbSAndGF1cmktcGx1Z2luLW1wdi1hcGknO1xyXG5cclxuLy8gTG9jYWwgaW1wbGVtZW50YXRpb25zIHRvIGJ5cGFzcyBsaWJyYXJ5IG5hbWluZyBtaXNtYXRjaFxyXG5jb25zdCBzZW5kTXB2Q29tbWFuZCA9IGFzeW5jIChjb21tYW5kRGF0YSkgPT4ge1xyXG4gIC8vIE1hdGNoZXMgZnVuY3Rpb25hbGl0eSBvZiBsaWJyYXJ5J3Mgc2VuZE1wdkNvbW1hbmQgYnV0IGNhbGxzICdwbHVnaW46bXB2fGNvbW1hbmQnXHJcbiAgLy8gV3JhcHMgY29tbWFuZCBpbiBhbiBleHRyYSBhcnJheSBiZWNhdXNlIHRoZSBwbHVnaW4gZXhwZWN0cyBhIHR1cGxlLWxpa2Ugc3RydWN0IChDb21tYW5kLCBJRD8pXHJcbiAgY29uc3QgbXB2Q29tbWFuZCA9IFtjb21tYW5kRGF0YS5jb21tYW5kLCAwXTtcclxuICBjb25zdCB3aW5kb3dMYWJlbCA9IGdldEN1cnJlbnRXaW5kb3coKS5sYWJlbDtcclxuICBjb25zb2xlLmxvZygnSW52b2tpbmcgc2VuZE1wdkNvbW1hbmQgKHdyYXBwZWQgd2l0aCBJRCk6JywgeyBtcHZDb21tYW5kLCB3aW5kb3dMYWJlbCB9KTtcclxuICByZXR1cm4gYXdhaXQgaW52b2tlKCdwbHVnaW46bXB2fGNvbW1hbmQnLCB7IG1wdkNvbW1hbmQsIHdpbmRvd0xhYmVsIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaW5pdGlhbGl6ZU1wdiA9IGFzeW5jIChvcHRpb25zKSA9PiB7XHJcbiAgLy8gTWF0Y2hlcyBmdW5jdGlvbmFsaXR5IG9mIGxpYnJhcnkncyBpbml0aWFsaXplTXB2IGJ1dCBjYWxscyAncGx1Z2luOm1wdnxpbml0J1xyXG4gIGNvbnN0IHdpbmRvd0xhYmVsID0gZ2V0Q3VycmVudFdpbmRvdygpLmxhYmVsO1xyXG4gIHJldHVybiBhd2FpdCBpbnZva2UoJ3BsdWdpbjptcHZ8aW5pdCcsIHsgLi4ub3B0aW9ucywgd2luZG93TGFiZWwgfSk7XHJcbn07XHJcblxyXG5jb25zdCBkZXN0cm95TXB2ID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHdpbmRvd0xhYmVsID0gZ2V0Q3VycmVudFdpbmRvdygpLmxhYmVsO1xyXG4gIHJldHVybiBhd2FpdCBpbnZva2UoJ3BsdWdpbjptcHZ8ZGVzdHJveScsIHsgd2luZG93TGFiZWwgfSk7XHJcbn07XHJcblxyXG5jb25zdCBnZXRNcHZQcm9wZXJ0eSA9IGFzeW5jIChuYW1lKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlbmRNcHZDb21tYW5kKHsgY29tbWFuZDogWydnZXRfcHJvcGVydHknLCBuYW1lXSB9KTtcclxuICAgIHJldHVybiByZXMgPyByZXMuZGF0YSA6IG51bGw7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS53YXJuKGBnZXRNcHZQcm9wZXJ0eSBmYWlsZWQgZm9yICR7bmFtZX06YCwgZSk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBzZXRNcHZQcm9wZXJ0eSA9IGFzeW5jIChuYW1lLCB2YWx1ZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBzZW5kTXB2Q29tbWFuZCh7IGNvbW1hbmQ6IFsnc2V0X3Byb3BlcnR5JywgbmFtZSwgdmFsdWVdIH0pO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUud2Fybihgc2V0TXB2UHJvcGVydHkgZmFpbGVkIGZvciAke25hbWV9PSR7dmFsdWV9OmAsIGUpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBzdG9yZWQgcGxheWJhY2sgdGltZSBmb3IgYSB2aWRlb1xyXG5jb25zdCBnZXRTdG9yZWRQbGF5YmFja1RpbWUgPSAodmlkZW9JZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgcGxheWJhY2tfdGltZV8ke3ZpZGVvSWR9YCk7XHJcbiAgICByZXR1cm4gc3RvcmVkID8gcGFyc2VGbG9hdChzdG9yZWQpIDogMDtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFNhdmUgcGxheWJhY2sgdGltZSBmb3IgYSB2aWRlbyAobG9jYWxTdG9yYWdlIGZvciBxdWljayBhY2Nlc3MpXHJcbmNvbnN0IHNhdmVQbGF5YmFja1RpbWUgPSAodmlkZW9JZCwgdGltZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgcGxheWJhY2tfdGltZV8ke3ZpZGVvSWR9YCwgdGltZS50b1N0cmluZygpKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgcGxheWJhY2sgdGltZTonLCBlcnJvcik7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gU2F2ZSB2aWRlbyBwcm9ncmVzcyB0byBkYXRhYmFzZVxyXG5jb25zdCBzYXZlVmlkZW9Qcm9ncmVzcyA9IGFzeW5jICh2aWRlb0lkLCB2aWRlb1VybCwgZHVyYXRpb24sIGN1cnJlbnRUaW1lKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHVwZGF0ZVZpZGVvUHJvZ3Jlc3ModmlkZW9JZCwgdmlkZW9VcmwsIGR1cmF0aW9uLCBjdXJyZW50VGltZSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHZpZGVvIHByb2dyZXNzIHRvIGRhdGFiYXNlOicsIGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBOYXRpdmVWaWRlb1BsYXllciA9ICh7IHZpZGVvVXJsLCB2aWRlb0lkLCBwbGF5ZXJJZCA9ICdkZWZhdWx0Jywgb25FbmRlZCwgLi4ucHJvcHMgfSkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcclxuICBjb25zdCBzYXZlSW50ZXJ2YWxSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgdW5saXN0ZW5SZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgaW5pdEF0dGVtcHRlZFJlZiA9IHVzZVJlZihmYWxzZSk7IC8vIFByZXZlbnQgbXVsdGlwbGUgaW5pdCBhdHRlbXB0c1xyXG4gIGNvbnN0IG9uRW5kZWRSZWYgPSB1c2VSZWYob25FbmRlZCk7XHJcbiAgY29uc3QgZW9mSGFuZGxlZFJlZiA9IHVzZVJlZihmYWxzZSk7XHJcblxyXG4gIC8vIEtlZXAgb25FbmRlZFJlZiB1cGRhdGVkXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIG9uRW5kZWRSZWYuY3VycmVudCA9IG9uRW5kZWQ7XHJcbiAgfSwgW29uRW5kZWRdKTtcclxuXHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vIEluaXRpYWxpemUgbXB2IGFuZCBsb2FkIHZpZGVvXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghdmlkZW9VcmwpIHtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgIGluaXRBdHRlbXB0ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJldmVudCBtdWx0aXBsZSBpbml0aWFsaXphdGlvbiBhdHRlbXB0c1xyXG4gICAgaWYgKGluaXRBdHRlbXB0ZWRSZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW5pdCBhbHJlYWR5IGF0dGVtcHRlZCwgc2tpcHBpbmcuLi4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xyXG4gICAgaW5pdEF0dGVtcHRlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIGVvZkhhbmRsZWRSZWYuY3VycmVudCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IGluaXRpYWxpemVQbGF5ZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gV2FpdCBmb3IgY29udGFpbmVyIHRvIGJlIG1vdW50ZWRcclxuICAgICAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnV2FpdGluZyBmb3IgY29udGFpbmVyIHRvIG1vdW50Li4uJyk7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNvbnRhaW5lclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbnRhaW5lciBlbGVtZW50IG5vdCBmb3VuZCwgYnV0IHByb2NlZWRpbmcgd2l0aCBNUFYgaW5pdCAobWlnaHQgb3BlbiBpbiBzZXBhcmF0ZSB3aW5kb3cpJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250YWluZXIgcmVhZHksIGluaXRpYWxpemluZyBtcHYgd2l0aCBJUEMuLi4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFdhaXQgZm9yIHdpbmRvdyB0byBiZSBmdWxseSByZWFkeVxyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtcHYgd2l0aCBJUEMgcGx1Z2luXHJcbiAgICAgICAgLy8gVGhlIElQQyBwbHVnaW4gZW1iZWRzIG1wdidzIG93biB3aW5kb3cgaW50byB0aGUgVGF1cmkgd2luZG93XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBtcHYgd2l0aCBJUEMgcGx1Z2luLi4uJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgIG1wdkNvbmZpZzoge1xyXG4gICAgICAgICAgICAndm8nOiAnZ3B1JyxcclxuICAgICAgICAgICAgJ2h3ZGVjJzogJ2F1dG8tc2FmZScsXHJcbiAgICAgICAgICAgICdrZWVwLW9wZW4nOiAneWVzJyxcclxuICAgICAgICAgICAgJ2ZvcmNlLXdpbmRvdyc6ICd5ZXMnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG9ic2VydmVkUHJvcGVydGllczogWydwYXVzZScsICd0aW1lLXBvcycsICdkdXJhdGlvbicsICdmaWxlbmFtZScsICd3aWQnXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBBZGQgYSB0aW1lb3V0IHRvIGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICBjb25zdCBpbml0UHJvbWlzZSA9IGluaXRpYWxpemVNcHYoY29uZmlnKTtcclxuICAgICAgICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT5cclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCdJbml0aWFsaXphdGlvbiB0aW1lZCBvdXQgYWZ0ZXIgMTUwMDBtcycpKSwgMTUwMDApXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGF3YWl0IFByb21pc2UucmFjZShbaW5pdFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyTIG1wdiBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkgd2l0aCBJUEMgcGx1Z2luJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoaW5pdEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBtcHY6JywgaW5pdEVycm9yKTtcclxuICAgICAgICAgIC8vIElmIGNvbm5lY3Rpb24gZmFpbGVkLCBpdCBtaWdodCBiZSBiZWNhdXNlIHRoZSBwbHVnaW4gaXNuJ3QgcmVnaXN0ZXJlZCBvciBETExzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgICBpZiAoaW5pdEVycm9yLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2Nvbm5lY3Rpb24gcmVmdXNlZCcpIHx8IGluaXRFcnJvci50b1N0cmluZygpLmluY2x1ZGVzKCdpcGMnKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBjb25uZWN0IHRvIG1wdiBwbHVnaW4uIElzIHRoZSBiYWNrZW5kIHJ1bm5pbmc/Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyBpbml0RXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuO1xyXG4gICAgICAgIHNldElzSW5pdGlhbGl6ZWQodHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIFdhaXQgZm9yIG1wdiB0byBiZSBmdWxseSByZWFkeVxyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGZpbGUgcGF0aCAocmVtb3ZlIGZpbGU6Ly8gcHJlZml4IGlmIHByZXNlbnQpXHJcbiAgICAgICAgbGV0IGZpbGVQYXRoID0gdmlkZW9Vcmw7XHJcbiAgICAgICAgaWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoJ2ZpbGU6Ly8nKSkge1xyXG4gICAgICAgICAgZmlsZVBhdGggPSBmaWxlUGF0aC5yZXBsYWNlKC9eZmlsZTpcXC9cXC8rLywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgaHR0cDovLyBwcmVmaXggaWYgaXQncyBhIHN0cmVhbWluZyBVUkxcclxuICAgICAgICBpZiAoZmlsZVBhdGguc3RhcnRzV2l0aCgnaHR0cDovLzEyNy4wLjAuMToxNDIyLycpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ05hdGl2ZSBwbGF5ZXIgcmVjZWl2ZWQgc3RyZWFtaW5nIFVSTCwgdXNpbmcgZGlyZWN0IGZpbGUgcGF0aCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgdmlkZW8gaW4gbXB2OicsIGZpbGVQYXRoKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCB0aGUgdmlkZW8gZmlsZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ2FsbGluZyBzZW5kTXB2Q29tbWFuZCBsb2FkZmlsZS4uLicpO1xyXG4gICAgICAgICAgYXdhaXQgc2VuZE1wdkNvbW1hbmQoeyBjb21tYW5kOiBbJ2xvYWRmaWxlJywgZmlsZVBhdGhdIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KckyBsb2FkZmlsZSBjb21tYW5kIHN1Y2Nlc3NmdWwnKTtcclxuXHJcbiAgICAgICAgICAvLyBXYWl0IGZvciBmaWxlIHRvIHN0YXJ0IGxvYWRpbmdcclxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcclxuXHJcbiAgICAgICAgICAvLyBFeHBsaWNpdGx5IGVuYWJsZSB2aWRlb1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgc2VuZE1wdkNvbW1hbmQoeyBjb21tYW5kOiBbJ3NldCcsICd2aWRlbycsICd5ZXMnXSB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KckyBFbmFibGVkIHZpZGVvIHRyYWNrJyk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGVuYWJsZSB2aWRlbyB0cmFjazonLCBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChjbWRFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignbG9hZGZpbGUgY29tbWFuZCBmYWlsZWQ6JywgY21kRXJyb3IpO1xyXG4gICAgICAgICAgdGhyb3cgY21kRXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXYWl0IGZvciB2aWRlbyB0byBsb2FkIGFuZCBpbml0aWFsaXplIHZpZGVvIG91dHB1dFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciB2aWRlbyB0byBsb2FkIGFuZCBpbml0aWFsaXplIHZpZGVvIG91dHB1dC4uLicpO1xyXG4gICAgICAgIGxldCB2aWRlb0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBhdHRlbXB0cyA9IDA7XHJcbiAgICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSAzMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCF2aWRlb0xvYWRlZCAmJiBhdHRlbXB0cyA8IG1heEF0dGVtcHRzKSB7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ3BhdGgnKTtcclxuICAgICAgICAgICAgY29uc3QgdmlkZW9Gb3JtYXQgPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgndmlkZW8tZm9ybWF0Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ3dpZHRoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGF3YWl0IGdldE1wdlByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgnZHVyYXRpb24nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvZyBwcm9ncmVzcyBldmVyeSA1IGF0dGVtcHRzXHJcbiAgICAgICAgICAgIGlmIChhdHRlbXB0cyAlIDUgPT09IDApIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVmlkZW8gbG9hZGluZyBjaGVjayAoYXR0ZW1wdCAke2F0dGVtcHRzfS8ke21heEF0dGVtcHRzfSk6YCwge1xyXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCA/ICdsb2FkZWQnIDogJ251bGwnLFxyXG4gICAgICAgICAgICAgICAgdmlkZW9Gb3JtYXQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB2aWRlbyBpcyBsb2FkZWQgLSBuZWVkIHZpZGVvIGZvcm1hdCBBTkQgZGltZW5zaW9uc1xyXG4gICAgICAgICAgICBpZiAodmlkZW9Gb3JtYXQgJiYgd2lkdGggJiYgd2lkdGggPiAwICYmIGhlaWdodCAmJiBoZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgdmlkZW9Mb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinJMgVmlkZW8gbG9hZGVkIGFuZCB2aWRlbyBvdXRwdXQgaW5pdGlhbGl6ZWQ6JywgeyB2aWRlb0Zvcm1hdCwgd2lkdGgsIGhlaWdodCwgZHVyYXRpb24gfSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjaGVja2luZyB2aWRlbyBzdGF0dXM6JywgZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF2aWRlb0xvYWRlZCkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFZpZGVvIGZhaWxlZCB0byBsb2FkIGFmdGVyJywgbWF4QXR0ZW1wdHMsICdhdHRlbXB0cycpO1xyXG4gICAgICAgICAgLy8gR2V0IGZpbmFsIHN0YXR1c1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IGdldE1wdlByb3BlcnR5KCdwYXRoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvRm9ybWF0ID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ3ZpZGVvLWZvcm1hdCcpO1xyXG4gICAgICAgICAgICBjb25zdCB2aWRlb0NvZGVjID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ3ZpZGVvLWNvZGVjJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbmFsIHZpZGVvIHN0YXR1czonLCB7IHBhdGgsIHZpZGVvRm9ybWF0LCB2aWRlb0NvZGVjIH0pO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZ2V0IGZpbmFsIHZpZGVvIHN0YXR1czonLCBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBzdG9yZWQgcGxheWJhY2sgdGltZVxyXG4gICAgICAgIGNvbnN0IGlkID0gdmlkZW9JZCB8fCB2aWRlb1VybDtcclxuICAgICAgICBjb25zdCBzdG9yZWRUaW1lID0gZ2V0U3RvcmVkUGxheWJhY2tUaW1lKGlkKTtcclxuXHJcbiAgICAgICAgaWYgKHN0b3JlZFRpbWUgPiAwICYmIHZpZGVvTG9hZGVkKSB7XHJcbiAgICAgICAgICAvLyBTbWFydCBSZXN1bWU6IElmIHN0b3JlZCB0aW1lIGlzIG5lYXIgdGhlIGVuZCAod2l0aGluIDUgc2Vjb25kcyBvciA5NSUpLCBzdGFydCBmcm9tIGJlZ2lubmluZ1xyXG4gICAgICAgICAgY29uc3QgaXNOZWFyRW5kID0gc3RvcmVkVGltZSA+PSBkdXJhdGlvbiAtIDUgfHwgKGR1cmF0aW9uID4gMCAmJiBzdG9yZWRUaW1lIC8gZHVyYXRpb24gPiAwLjk1KTtcclxuXHJcbiAgICAgICAgICBpZiAoaXNOZWFyRW5kKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdG9yZWQgdGltZSBpcyBuZWFyIGVuZCwgYXNzdW1pbmcgZmluaXNoZWQuIFN0YXJ0aW5nIGF0IDAuJyk7XHJcbiAgICAgICAgICAgIHNhdmVQbGF5YmFja1RpbWUoaWQsIDApOyAvLyBSZXNldCBzdG9yZWQgdGltZVxyXG4gICAgICAgICAgICAvLyBEb24ndCBzZWVrIChzdGFydHMgYXQgMCBieSBkZWZhdWx0KSBvciBleHBsaWNpdGx5IHNlZWsgdG8gMCBpZiBuZWVkZWRcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlZWtpbmcgdG8gc3RvcmVkIHRpbWU6Jywgc3RvcmVkVGltZSk7XHJcbiAgICAgICAgICAgICAgYXdhaXQgc2V0TXB2UHJvcGVydHkoJ3RpbWUtcG9zJywgc3RvcmVkVGltZSk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KckyBTZWVrIHN1Y2Nlc3NmdWwnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoc2Vla0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2VlayBmYWlsZWQ6Jywgc2Vla0Vycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IHVwIHByb3BlcnR5IG9ic2VydmF0aW9uIGZvciBwcm9ncmVzcyB0cmFja2luZ1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIHByb3BlcnR5IG9ic2VydmF0aW9uLi4uJyk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHVubGlzdGVuID0gYXdhaXQgb2JzZXJ2ZU1wdlByb3BlcnRpZXMoXHJcbiAgICAgICAgICAgIFsncGF1c2UnLCAndGltZS1wb3MnLCAnZHVyYXRpb24nLCAnZW9mLXJlYWNoZWQnXSxcclxuICAgICAgICAgICAgYXN5bmMgKHByb3BlcnRpZXMpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICBjb25zdCBpZCA9IHZpZGVvSWQgfHwgdmlkZW9Vcmw7XHJcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBwcm9wZXJ0aWVzWyd0aW1lLXBvcyddIHx8IDA7XHJcbiAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwcm9wZXJ0aWVzWydkdXJhdGlvbiddIHx8IDA7XHJcbiAgICAgICAgICAgICAgY29uc3QgaXNQYXVzZWQgPSBwcm9wZXJ0aWVzWydwYXVzZSddIHx8IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAvLyBTYXZlIHRvIGxvY2FsU3RvcmFnZSBmb3IgcXVpY2sgYWNjZXNzXHJcbiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2F2ZVBsYXliYWNrVGltZShpZCwgY3VycmVudFRpbWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKCFpc1BhdXNlZCAmJiBjdXJyZW50VGltZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2F2ZUludGVydmFsUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgc2F2ZUludGVydmFsUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IGF3YWl0IGdldE1wdlByb3BlcnR5KCd0aW1lLXBvcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXIgPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgnZHVyYXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgJiYgdGltZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlVmlkZW9Qcm9ncmVzcyhpZCwgdmlkZW9VcmwsIGR1ciB8fCAwLCB0aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHNhdmluZyBwcm9ncmVzczonLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTYXZlIGltbWVkaWF0ZWx5IG9uIHBhdXNlXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWUgPiAwICYmIGR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICBzYXZlVmlkZW9Qcm9ncmVzcyhpZCwgdmlkZW9VcmwsIGR1cmF0aW9uLCBjdXJyZW50VGltZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2F2ZUludGVydmFsUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzYXZlSW50ZXJ2YWxSZWYuY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICAgIHNhdmVJbnRlcnZhbFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIENoZWNrIGZvciBFT0ZcclxuICAgICAgICAgICAgICBjb25zdCBpc0VvZiA9IHByb3BlcnRpZXNbJ2VvZi1yZWFjaGVkJ107XHJcbiAgICAgICAgICAgICAgaWYgKGlzRW9mICYmICFlb2ZIYW5kbGVkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFT0YgcmVhY2hlZCwgcmVzZXR0aW5nIHBsYXliYWNrIHRpbWUgYW5kIHRyaWdnZXJpbmcgb25FbmRlZCcpO1xyXG4gICAgICAgICAgICAgICAgZW9mSGFuZGxlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzdG9yZWQgdGltZSBzbyBpdCBzdGFydHMgZnJvbSBiZWdpbm5pbmcgbmV4dCB0aW1lXHJcbiAgICAgICAgICAgICAgICBzYXZlUGxheWJhY2tUaW1lKGlkLCAwKTtcclxuICAgICAgICAgICAgICAgIHNhdmVWaWRlb1Byb2dyZXNzKGlkLCB2aWRlb1VybCwgZHVyYXRpb24sIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvbkVuZGVkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgb25FbmRlZFJlZi5jdXJyZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgdW5saXN0ZW5SZWYuY3VycmVudCA9IHVubGlzdGVuO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KckyBQcm9wZXJ0eSBvYnNlcnZhdGlvbiBzZXQgdXAgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgfSBjYXRjaCAob2JzRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb3BlcnR5IG9ic2VydmF0aW9uIHNldHVwIGZhaWxlZDonLCBvYnNFcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdGFydCBwbGF5aW5nXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBwbGF5YmFjay4uLicpO1xyXG4gICAgICAgICAgYXdhaXQgc2V0TXB2UHJvcGVydHkoJ3BhdXNlJywgZmFsc2UpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KckyBQbGF5YmFjayBzdGFydGVkJyk7XHJcblxyXG4gICAgICAgICAgLy8gV2FpdCBmb3IgdmlkZW8gdG8gc3RhcnQgcmVuZGVyaW5nXHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xyXG5cclxuICAgICAgICAgIC8vIENoZWNrIGlmIHZpZGVvIGlzIGFjdHVhbGx5IHJlbmRlcmluZ1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgdm8gPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgndmlkZW8tb3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ3dpZHRoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGF3YWl0IGdldE1wdlByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICAgICAgY29uc3QgdmlkZW9Gb3JtYXQgPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgndmlkZW8tZm9ybWF0Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZCA9IGF3YWl0IGdldE1wdlByb3BlcnR5KCd3aWQnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWaWRlbyBvdXRwdXQgaW5mbzonLCB7IHZvLCB3aWR0aCwgaGVpZ2h0LCB2aWRlb0Zvcm1hdCwgd2lkIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF2byB8fCAhd2lkdGggfHwgIWhlaWdodCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFZpZGVvIG91dHB1dCBtYXkgbm90IGJlIGluaXRpYWxpemVkIHlldCcpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhpcyBpcyBub3JtYWwgZm9yIElQQyBwbHVnaW4gLSBtcHYgd2luZG93IHNob3VsZCBiZSBlbWJlZGRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinJMgVmlkZW8gcmVuZGVyaW5nOiAke3dpZHRofXgke2hlaWdodH0gdXNpbmcgJHt2b31gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoaW5mb0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IHF1ZXJ5IHZpZGVvIG91dHB1dCBpbmZvOicsIGluZm9FcnJvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAocGxheUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgcGxheWJhY2s6JywgcGxheUVycm9yKTtcclxuICAgICAgICAgIHRocm93IHBsYXlFcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBtcHYgcGxheWVyOicsIGVycik7XHJcbiAgICAgICAgaWYgKGlzTW91bnRlZCkge1xyXG4gICAgICAgICAgc2V0RXJyb3IoYEZhaWxlZCB0byBsb2FkIHZpZGVvOiAke2Vyci5tZXNzYWdlIHx8IGVycn1gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaW5pdGlhbGl6ZVBsYXllcigpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xyXG4gICAgICBpbml0QXR0ZW1wdGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIENsZWFudXA6IHNhdmUgZmluYWwgcHJvZ3Jlc3NcclxuICAgICAgaWYgKHVubGlzdGVuUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICB1bmxpc3RlblJlZi5jdXJyZW50KCk7XHJcbiAgICAgICAgdW5saXN0ZW5SZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzYXZlSW50ZXJ2YWxSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2F2ZUludGVydmFsUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIHNhdmVJbnRlcnZhbFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2F2ZSBmaW5hbCBwcm9ncmVzcyBiZWZvcmUgZGVzdHJveWluZ1xyXG4gICAgICBjb25zdCBzYXZlRmluYWxQcm9ncmVzcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgaWQgPSB2aWRlb0lkIHx8IHZpZGVvVXJsO1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBhd2FpdCBnZXRNcHZQcm9wZXJ0eSgndGltZS1wb3MnKTtcclxuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gYXdhaXQgZ2V0TXB2UHJvcGVydHkoJ2R1cmF0aW9uJyk7XHJcbiAgICAgICAgICBpZiAoY3VycmVudFRpbWUgJiYgZHVyYXRpb24gJiYgY3VycmVudFRpbWUgPiAwICYmIGR1cmF0aW9uID4gMCkge1xyXG4gICAgICAgICAgICBzYXZlUGxheWJhY2tUaW1lKGlkLCBjdXJyZW50VGltZSk7XHJcbiAgICAgICAgICAgIHNhdmVWaWRlb1Byb2dyZXNzKGlkLCB2aWRlb1VybCwgZHVyYXRpb24sIGN1cnJlbnRUaW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIGR1cmluZyBjbGVhbnVwXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgc2F2ZUZpbmFsUHJvZ3Jlc3MoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAvLyBEZXN0cm95IG1wdiBpbnN0YW5jZVxyXG4gICAgICAgIGRlc3Ryb3lNcHYoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUGxheWVyIGNsZWFudXAgY29tcGxldGVkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9LCBbdmlkZW9VcmwsIHZpZGVvSWQsIHBsYXllcklkXSk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgaC1mdWxsIGJnLWJsYWNrIHRleHQtd2hpdGVcIj5cclxuICAgICAgICA8cD57ZXJyb3J9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXZpZGVvVXJsKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHctZnVsbCBoLWZ1bGwgYmctYmxhY2sgdGV4dC13aGl0ZVwiPlxyXG4gICAgICAgIDxwPk5vIHZpZGVvIGZpbGUgc2VsZWN0ZWQ8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIG1wdiByZW5kZXJzIHZpYSBJUEMgcGx1Z2luIC0gZW1iZWRzIG1wdidzIG93biB3aW5kb3cgaW50byBUYXVyaSB3aW5kb3dcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdlxyXG4gICAgICByZWY9e2NvbnRhaW5lclJlZn1cclxuICAgICAgaWQ9e2BtcHYtcGxheWVyLSR7cGxheWVySWR9YH1cclxuICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBiZy1ibGFjayBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXHJcbiAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICBtaW5XaWR0aDogJzEwMCUnLFxyXG4gICAgICAgIG1pbkhlaWdodDogJzEwMCUnLFxyXG4gICAgICB9fVxyXG4gICAgPlxyXG4gICAgICB7IWlzSW5pdGlhbGl6ZWQgJiYgKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC13aGl0ZVwiPlxyXG4gICAgICAgICAgPHA+SW5pdGlhbGl6aW5nIHBsYXllci4uLjwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgICAgey8qIG1wdiB3aW5kb3cgaXMgZW1iZWRkZWQgYnkgSVBDIHBsdWdpbiAqL31cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOYXRpdmVWaWRlb1BsYXllcjtcclxuIl0sImZpbGUiOiJDOi9Qcm9qZWN0cy95dHR2Mi9zcmMvY29tcG9uZW50cy9OYXRpdmVWaWRlb1BsYXllci5qc3gifQ==